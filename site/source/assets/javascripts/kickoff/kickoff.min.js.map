{"version":3,"sources":["../../../../../src/coffee/models/time/time.coffee","../../../../../src/coffee/models/time/calc.coffee","../../../../../src/coffee/models/time/devide.coffee","../../../../../src/coffee/models/time/leap-year.coffee","../../../../../src/coffee/models/time/last-day.coffee","../../../../../src/coffee/models/time/what-day.coffee","../../../../../src/coffee/models/time/edge.coffee","../../../../../src/coffee/models/time/to-stamp.coffee","../../../../../src/coffee/models/time/compare.coffee","../../../../../src/coffee/models/time/method-names.coffee","../../../../../src/coffee/models/time/to-string.coffee","../../../../../src/coffee/models/time/week-of-year.coffee","../../../../../src/coffee/models/time/weekend.coffee","../../../../../src/coffee/utilities/string.coffee","../../../../../src/coffee/models/task/task.coffee","../../../../../src/coffee/models/timeline/timeline.coffee","../../../../../src/coffee/models/store.coffee","../../../../../src/coffee/mixins/modelable.coffee","../../../../../src/coffee/components/button/link-destroy.coffee","../../../../../src/coffee/mixins/localeable.coffee","../../../../../src/coffee/components/button/milestone-create.coffee","../../../../../src/coffee/components/button/state-switch.coffee","../../../../../src/coffee/components/button/task-create.coffee","../../../../../src/coffee/components/button/task-destroy.coffee","../../../../../src/coffee/components/button/task-edit.coffee","../../../../../src/coffee/components/button/task-fold.coffee","../../../../../src/coffee/components/button/task-pick.coffee","../../../../../src/coffee/components/button/view-switch.coffee","../../../../../src/coffee/components/button/unit-zoom.coffee","../../../../../src/coffee/components/form/form.coffee","../../../../../src/coffee/mixins/inputable.coffee","../../../../../src/coffee/components/form/number.coffee","../../../../../src/coffee/models/task/order.coffee","../../../../../src/coffee/components/form/select.coffee","../../../../../src/coffee/components/form/text.coffee","../../../../../src/coffee/components/form/textarea.coffee","../../../../../src/coffee/components/form/time.coffee","../../../../../src/coffee/models/task/query.coffee","../../../../../src/coffee/models/task/type.coffee","../../../../../src/coffee/utilities/event.coffee","../../../../../src/coffee/models/task/event.coffee","../../../../../src/coffee/models/task/predecessor.coffee","../../../../../src/coffee/models/task/successor.coffee","../../../../../src/coffee/models/task/schedule.coffee","../../../../../src/coffee/models/task/beginning.coffee","../../../../../src/coffee/models/task/can.coffee","../../../../../src/coffee/models/task/create.coffee","../../../../../src/coffee/models/task/fold.coffee","../../../../../src/coffee/models/task/destroy.coffee","../../../../../src/coffee/models/task/end.coffee","../../../../../src/coffee/models/task/duration.coffee","../../../../../src/coffee/models/task/pick.coffee","../../../../../src/coffee/models/task/readonly.coffee","../../../../../src/coffee/models/task/update.coffee","../../../../../src/coffee/models/task/history.coffee","../../../../../src/coffee/models/task/error.coffee","../../../../../src/coffee/models/task/json.coffee","../../../../../src/coffee/models/task/travel.coffee","../../../../../src/coffee/components/gantt/gantt.coffee","../../../../../src/coffee/components/gantt/link.coffee","../../../../../src/coffee/components/gantt/task.coffee","../../../../../src/coffee/components/gantt/timeline.coffee","../../../../../src/coffee/components/header/header.coffee","../../../../../src/coffee/components/modal/modal.coffee","../../../../../src/coffee/components/proper/proper.coffee","../../../../../src/coffee/components/table/table.coffee","../../../../../src/coffee/components/table/task.coffee","../../../../../src/coffee/models/timeline/event.coffee","../../../../../src/coffee/models/timeline/unit.coffee","../../../../../src/coffee/models/timeline/beginning.coffee","../../../../../src/coffee/models/timeline/create.coffee","../../../../../src/coffee/models/timeline/end.coffee","../../../../../src/coffee/models/timeline/duration.coffee","../../../../../src/coffee/models/timeline/fit.coffee","../../../../../src/coffee/models/timeline/units.coffee","../../../../../src/coffee/models/timeline/update.coffee","../../../../../src/coffee/components/kickoff.coffee","../../../../../src/coffee/utilities/drag.coffee"],"names":["Time","mustBeNumber","mustBeValidCount","mustBeValidDay","mustBeValidHours","mustBeValidMinutes","mustBeValidMonth","mustBeValidSeconds","mustBeValidYear","parseArguments","date","d","defaultDate","time","Date","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","ref","results","j","len","length","split","push","concat","map","i","parseInt","year","silence","Number","isInteger","Error","month","day","lastDay","lastDayOfTheMonth","hours","minutes","_prefix","seconds","count","num","[object Object]","this","addPrototypeMethods","unit","prototype","since","current","days","months","s","weeks","years","to","calcYear","calcMonth","calcDay","calcHours","calcMinutes","calcSeconds","calcWeeks","daysCount","Math","abs","nextDay","prevDay","includes","bindMethods","dayRuleFn","devideByUnit","hourRuleFn","monthRuleFn","ruleFn","ruleFns","yearRuleFn","beginning","end","splited","Year","Month","Day","Week","Hour","isLeapYear","whatDay","getDay","beginningOfTheYear","endOfTheYear","beginningOfTheMonth","endOfTheMonth","beginningOfTheDay","endOfTheDay","beginningOfTheHour","endOfTheHour","beginningOfTheWeek","endOfTheWeek","toStamp","getTime","earlist","equals","latest","one","two","times","t","sort","a","b","laterThan","earlierThan","methodNames","nextUnit","luda","camelCase","prevUnit","beginningOfUnit","endOfUnit","calcUnit","double","toString","format","dbPattern","loopObj","pattern","placeholder","str","value","Object","call","replace","m","H","M","S","RegExp","trim","weekOfTheYear","firstDayWeekDay","firstWeekDaysCount","ceil","isWeekend","isWeekday","capitalize","charAt","toUpperCase","slice","Task","builtInProps","depcTypeShortcuts","depcTypes","enhancedProps","find","firstChildWbs","invalidMilestoneActions","isExisted","isRoot","isTask","isValidWbs","joinDeps","joinWbs","milestoneActions","mustBeRoot","mustBeTask","mustBeValidWbs","mustExist","mustHasConsecutiveWbs","mustLikeTask","nextWbs","parent","parentWbs","prevWbs","revokeTask","root","rootTaskActions","splitDeps","splitWbs","taskActions","task","data","error","rootId","uid","rootTask","roots","tasks","uidOrWbs","isString","wbs","includeRoot","parentTaskWbs","isArray","n","number","join","arr","pop","deps","filter","unique","depsArr","allTasks","index","indexOf","splice","options","base","base1","base10","base11","base12","base2","base3","base4","base5","base6","base7","base8","base9","earlistEnd","isMilestone","isTopLevel","key","operations","p","readonlys","rollbackIndex","taskWbs","val","source","guid","assign","created","errors","constructor","events","stacks","undo","redo","exclusions","excludeWeekends","inclusions","minDurationSeconds","maxHistorySize","actions","trigger","type","name","dependencies","finishToStart","startToStart","finishToFinish","startToFinish","depended","readonlyProps","isPicked","Boolean","isFolded","isHidden","nextSecond","keys","forEach","added","pending","wbses","_addDeps","pendingDeps","_tryUpdateSchedule","addDeps","Timeline","mustBeTimeline","mustBeValidLeastRange","mustBeValidPadding","obj","_padding","padding","_leastRange","leastRange","_beginning","_end","_exclusions","_inclusions","_excludeWeekends","_flags","flags","create","destroy","relations","stores","timeline","config","matched","store","some","mixin","model","modelable","component","protect","all","from","removeDeps","help","depc","html","shortcut","title","depcType","dashCase","attr","listen","locale","path","conf","pathes","_locale","$","String","l","localeable","template","setButtonsStates","canRedo","canUndo","undoButton","redoButton","on","id","event","detail","off","tasksToBeDestroied","picked","canBeDestroied","enableOrDisableButton","removeAttr","updated","setTimeout","edit","closeModal","form","kickoffSelector","modal","r","renderName","append","modalNode","kickoffModal","deactivate","get","defaultFormNode","activate","newState","node","oldState","_modalNode","toggleClass","$form","clearTimeout","_isActivatingForm","_isDeactivatingForm","pushUndoState","stopTrackingHistory","startTrackingHistory","popUndoState","_defaultFormNode","e","remove","render","addClass","removeClass","children","toggle","fold","target","ref1","_isRendering","pick","include","view","setGanttView","setTableView","viewType","viewGanttButton","viewTableButton","unitState","zoomInAble","zoomOutAble","avaliableUnits","zoomIn","ensureGanttView","zoomOut","zoomInButton","zoomOutButton","setCurrentUnitText","unitText","text","selector","switcher","kickoffButtonsViewSwitch","fieldType","formFields","fieldTemplate","executeCustomRenderers","fields","parentIndex","field","fieldIndex","label","multiple","prop","inputCls","errorMarkerCls","bottomLevelProp","fieldConfig","inputTemplate","getInputValue","input","setInputValue","getModelValue","toggleInputReadonly","topLevelProp","readonly","toggleFieldError","force","propError","errorMarker","reset","propTree","updateModelValue","update","deferUpdateModelValue","_isUpdating","afterUpdate","newVal","oldVal","creator","fieldIndexes","shift","u","destroyer","ref2","listener","finder","inputable","except","asc","compareWbs","desc","order","aWbs","bWbs","result","reverse","showOptions","hideOptions","toggleOptions","hide","optionsTemplate","inputType","predecessors","isValidPredecessorOf","successors","isValidSuccessorOf","option","valueToStr","refreshOptions","self","useOptions","isFunction","deferOptions","propIsReadonly","simulatedInput","each","item","isReadonly","reverseP","reverseTask","vals","checked","strToValue","setSimulatedInputValue","checkedLabels","toggleOptionsHandler","toggleOptionsBySimulatedInputHandler","hasClass","_handledByFocusin","JSON","stringify","parse","isAffected","newVals","oldVals","arrayEqual","focusedSelect","targets","eventPath","element","is","not","kickoffFormSelect","watch","showDropdown","dropdown","hideDropdown","toggleDropdown","renderMonth","_isRenderingMonth","datesHtml","firstDateWeekday","lastDateWeekday","monthB","monthDates","monthE","monthLabel","selected","devideByDay","unshift","checkedAttr","headerLabel","dates","_renderedMonth","renderPrevMonth","prevMonth","renderNextMonth","nextMonth","setInputValueWhenNoError","checkedInput","toggleDropdownHandler","toggleDropdownBySimulatedInputHandler","focusedTime","kickoffFormTime","ancestors","descendants","firstChild","lastChild","nextSibling","nextSiblings","prevSibling","prevSiblings","where","isChd","tWbs","chd","siblingWbs","isDescendant","collected","isAncestor","conOrRule","conditions","next","prev","CustomEvent","mustBeValidCallback","nsMatches","parseEvent","original","originalTarget","_stopped","_immediateStopped","_prevented","callback","namespace","ns","definedNs","every","TaskEvent","addEvent","addEventOnce","eventCache","removeEvent","triggerEvent","cache","_one","types","q","eventQuene","shouldTrigger","taskEvent","currentTarget","stopPropagation","preventDefault","isImmediatePropagationStopped","isPropagationStopped","isDefaultPrevented","_needResult","isTriggered","addF2FDeps","addF2SDeps","addS2FDeps","addS2SDeps","beforeUpdateDeps","collectDepdWbsData","compareNewAndOld","depWbses","f2fDeps","f2sDeps","isValidDepc","parseDeps","s2fDeps","s2sDeps","touchDeps","triggerDepsEvent","tryUpdateDeps","typeMustBeValid","typeShortcuts","depsObj","depTasks","isEqual","depd","_original","depdDetail","depsDetail","isDepdEventPrevented","isDepsEventPrevented","isPrevented","newDeps","oldDeps","typeDetail","depdWbsArr","existInNew","existInOld","_returnSchedul","newB","newE","resources","schedules","triggered","v","_beforeUpdateSchedule","_schedules","newBegin","newEnd","_touchSchedule","deep","addedWbs","f2sPredecessors","s2sPredecessors","f2fPredecessors","s2fPredecessors","isValidDepcOf","addPredecessors","_pushUndoState","addF2SPredecessors","addS2SPredecessors","addF2FPredecessors","addS2FPredecessors","removePredecessors","predecessorType","addDepd","addF2FDepd","addF2SDepd","addS2FDepd","addS2SDepd","depdType","f2fDepd","f2sDepd","isValidDepd","removeDepd","s2fDepd","s2sDepd","depds","f2sSuccessors","s2sSuccessors","f2fSuccessors","s2fSuccessors","isValidDepdOf","addSuccessors","addF2SSuccessors","addS2SSuccessors","addF2FSuccessors","addS2FSuccessors","removeSuccessors","successorType","addUniqueResource","beforeUpdateSchedule","checkEarlistTaskEnd","checkEarlistTreeBegin","checkEarlistTreeEnd","collectResources","collectTreeDownTravelResources","collectTreeLeafBackwardBeginResources","collectTreeLeafBackwardEndResources","collectTreeLeafForwardBeginResources","collectTreeLeafForwardEndResources","createF2FDepdEntries","createF2SDepdEntries","createS2FDepdEntries","createS2SDepdEntries","descResources","earlistTaskEnd","hasNoTaskChildren","mergeOriginal","propagateResources","taskBeginByEndDiff","taskEndByBeginDiff","touchSchedule","tryUpdateSchedule","minDuration","ok","diff","taskChildren","mode","entries","currentBegin","entry","currentEnd","belongsToTask","depdEntries","leafResources","leafsWithEarlierBegin","notBelongsToTask","treeDownNodes","leaf","leafResource","leafs","leafsWithSameEnd","affectedTreeDownNodes","affectedTreeUpNodes","f2fDepcEnds","f2sDepcEnds","limitions","s2fDepcBegins","s2sDepcBegins","k","len1","len2","len3","ref3","earlistTaskEnds","childrenWithSameOrLaterEnd","c","leafsWithSameBegin","leafsWithLaterEnd","beginDiff","endDiff","max","instance","instanceNewBegin","instanceNewEnd","instanceOldBegin","instanceOldEnd","newResources","resource","existed","newResource","oldB","oldE","childFilter","ancestor","ancestorResource","beginIsCorrect","childTasks","childrenBegins","childrenEnds","correctBegin","correctEnd","depsChanged","endIsCorrect","newF2FDeps","newS2FDeps","child","childResource","descTasks","sortedResources","entryTask","fit","uniqueResources","merged","_returnRes","_resources","touchDetail","updateDetail","beginnings","can","canBeFolded","canBePicked","canBeUpdated","canCreateMilestone","canCreateTask","canDestroyDescendants","canSwitchState","action","auth","isActionEnabled","acts","act","Array","createHistoricalTask","createRoot","createTasks","settings","datas","withWbs","withoutWbs","lastC","foldedAncestors","isFoldedDetail","isHiddenDetail","oldFolded","oldHidden","destroyHistoricalTask","destroyRoot","riseNextSiblings","newWbses","oldWbses","taskWbsArr","wbsArr","shouldUpdate","destroied","depsResources","scheduleResources","taskAncestors","treeDownWbses","depsWbsArr","filtered","w","ends","calcSecs","devideSecs","duration","extractInclusions","mergeExclusions","taskBegin","taskEnd","durationObj","durationSecs","tBegin","tEnd","mergedExclusions","rBegin","rEnd","range","extracted","rB","rE","tB","tE","secs","exceptExclusions","effectedSecs","weekends","cascaded","taskDescendants","isPropReadonly","props","updateHistoricalTask","updateRoot","updateTask","updateTaskEnhancedProps","currentDepds","currentDeps","newDepds","removed","dataForExisted","withUid","withoutUid","results1","newValDup","currentState","diffState","diffTask","history","popRedoState","popState","pushRedoState","pushState","stateEqual","oneKeys","oneType","twoKeys","twoType","oneE","twoE","state","isDiff","toCreate","toCreateUids","toDestroy","toDestroyUids","toUpdate","diffedTask","oldTask","newTask","_exclusionKeys","newKeys","oldKeys","stack","direction","_state","lastState","shouldPush","historyTrackingDisabled","handleError","isUpdated","newV","oldV","sortedTasks","travel","oldBegin","oldEnd","ascTasks","adjustTimelineRange","linkTemplate","findLinkDom","linksContainerDom","findLinkDoms","refreshLinkDomSiblings","nexts","prevs","kickoffGanttLink","insertLinkDom","removeLinkDom","insertLinkDoms","taskTemplate","findTaskDom","tasksContainerDom","insertTaskDom","prevLastChd","kickoffGanttTask","scrollIntoViewIfNeeded","scrollIntoView","after","prepend","removeTaskDom","insertTaskDoms","_reinserting","stopImmediatePropagation","ref4","ref5","arrowWidth","arrowHeight","_rendering","lines","shouldKeep","findTaskContentDom","findLineDoms","drawLine","line","polyline","lineDom","add","linePoints","shouldHide","_showingLine","points","bind","preview","dict","left","pointDom","rootPos","top","start","finish","offset","outerWidth","outerHeight","pageX","pageY","findPreviewLineDom","previewLineDom","resetPreview","findLineDom","findTaskLinksBeginningDom","findTaskLinksEndDom","s2sPolyline","arrow","exchanged","minXWidth","x1","x2","x3","x4","y1","y2","y3","y4","position","timelineCellWidth","arrowRightPoints","min","f2fPolyline","arrowLeftPoints","right","s2fPolyline","rowGap","x5","x6","y5","y6","f2sPolyline","arrowB","arrowT","arrowX","height","width","container","setCls","renderRange","executeCustomGraphRenderer","executeCustomActionsRenderer","executeCustomLinkActionsRenderer","executeCustomSummaryRenderer","pos","pxToTime","timeToPx","move","pxPerSec","px","css","customRenderers","actionTypes","cap","configRendererName","customRenderer","modelType","rendererTypes","renderers","console","graphContainer","renderGraph","actionContainer","actionSlot","actionsContainer","renderAction","renderActions","renderLinkActions","renderSummary","summaryContainer","dragDimensions","dragStartLeft","dragStartRight","dragStartX","screenX","startLeft","startRight","startX","startWidth","distance","resetDragDimensions","previewTravel","previewBegin","setBegin","previewEnd","setEnd","linkNode","previewLinkFrom","cursorCls","point","successorsPropIsReadonly","con","_isLinkingFrom","linksEnd","linksBeginning","linksContainer","resetPreviewLinkFrom","previewLinkFromStart","previewLinkFromFinish","previewLinkTo","isValid","predecessorsPropIsReadonly","_isLinkingTo","previewLinkToStart","previewLinkToFinish","resetPreviewLinkTo","addLink","_isHidden","closeProper","kickoffProper","proper","labelTemplate","barTemplate","linkPointsTemplate","bodyCls","popoverTemplate","popoverActionsTemplate","popoverLinkActionsTemplate","popoverSummaryTemplate","customRendererSlot","defaultRenderer","cls","fragment","linkButtons","s2s","s2f","f2f","f2s","disabled","dayCount","round","touched","ks","popover","foregroundTemplate","groups","group","depth","exclusionTemplate","inclusionTemplate","foregroundFlagTemplate","backgroundTemplate","backgroundFlagTemplate","specialDurationTemplate","cell","cellB","cellE","cells","totalSeconds","style","flag","ensureOccupyFullWidth","ganttWidth","leastDuration","timelineWidth","renderForeground","renderBackground","background","dataAttr","before","ensureResizeDetectorExist","detector","resizeDetector","contentWindow","listenResize","stopListeningResize","lastRenderWidth","innerWidth","resizeRender","_resizeRendering","currentWidth","resizeRenderDelay","addEventListener","removeEventListener","executeCustomNavigationsRenderer","renderer","rendererName","navigationsContainer","renderNavigations","actionsTemplate","navigationsTemplate","tpl","renderGantt","renderTable","toggleClas","tryDeactivate","closeButton","modalBody","clientX","clientY","deferTime","viewPortDimensions","window","innerHeight","selfDimensions","getBoundingClientRect","popoverDimensions","maxLeft","maxTop","bottom","removeCss","deferActivate","_defer","deferDeactivate","mouseupActivateForHoverAction","_mousedownDeactivateDefer","mousedownDeactivateForHoverAction","headTemplate","bodyTemplate","column","titleText","titles","tableColumns","rowIndex","taskRow","kickoffTableTask","insertRow","dashedProp","hasCustomRender","tplName","typeTemplate","durationTemplate","predecessorsTemplate","successorsTemplate","customActionsRenderer","executeCustomActionRenderers","TimelineEvent","timelineEvent","mustBeValidUnit","units","newUnit","_unit","beginningIncludePadding","beginVal","args","endIncludePadding","endVal","begin","beginNoPadding","beginSame","endSame","unitSame","_fitCache","coincidentRanges","excludedRanges","flagsInRange","includedRanges","beginTime","endTime","devideByYear","devideByMonth","toBePushed","week","weekAssignments","devideByWeek","_monthLabel","_dayLabel","dayLabel","hour","devideByHour","rangeArr","coincidents","Kickoff","kickoff","warn","configure","rootCls","renderHeader","_returnSplited","isCreated","splitedReturnValue","taskConf","timelineConf","uiConf","_taskConf","_timelineConf","_uiConf","ui","_mergeConf","modelConfKeys","renderHeaderActions","renderHeaderNavigations","renderHeaderActionCreateTask","renderHeaderActionCreateMilestone","renderHeaderActionDestroyDescendants","renderHeaderActionSwitchState","renderGanttTaskGraph","renderGanttTaskSummary","renderGanttTaskActions","renderGanttTaskActionPick","renderGanttTaskActionFold","renderGanttTaskActionUpdate","renderGanttTaskActionDestroy","renderGanttTaskActionCreateTask","renderGanttTaskActionCreateMilestone","renderGanttTaskLinkActions","renderGanttMilestoneGraph","renderGanttMilestoneSummary","renderGanttMilestoneActions","renderGanttMilestoneActionPick","renderGanttMilestoneActionUpdate","renderGanttMilestoneActionDestroy","renderGanttMilestoneLinkActions","renderTableTaskActions","renderTableTaskActionPick","renderTableTaskActionFold","renderTableTaskActionUpdate","renderTableTaskActionDestroy","renderTableTaskActionCreateTask","renderTableTaskActionCreateMilestone","renderTableMilestoneActions","renderTableMilestoneActionPick","renderTableMilestoneActionUpdate","renderTableMilestoneActionDestroy","renderTaskForm","renderMilestoneForm","header","navigations","zoomUnits","chartView","tableView","milestone","createTask","createMilestone","destroyDescendants","createSubTask","createSubMilestone","updateMilestone","destroyTask","destroyMilestone","unpick","unfold","durationUnits","_mergeLocaleConf","defaultConf","custom","Con","createEvent","endTarget","hoverTarget","mousedownHandler","mousemoveHandler","mouseupHandler","timestamp","triggerDelay","originalEvent","bubbles","cancelable","composed","startTarget","now","ev","document"],"mappings":"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","sourcesContent":["parseArguments = (date...) ->\n  defaultDate = [new Date().getFullYear(), 1, 1, 0, 0, 0]\n  if not date[0] or date[0] instanceof Date\n    date = if date[0] then date[0] else new Date()\n    return [\n      date.getFullYear()\n      date.getMonth() + 1\n      date.getDate()\n      date.getHours()\n      date.getMinutes()\n      date.getSeconds()\n  ]\n  if date[0] instanceof Time\n    return (date[0][d] for d in [\n      'year', 'month', 'day',\n      'hours', 'minutes', 'seconds'\n    ])\n  if typeof date[0] is 'string' and date[0].length\n    [date, time] = date[0].split(/\\s+/)\n    date = if date then date.split(/-|\\//) else []\n    time = if time then time.split(/:/) else []\n    date.push 0 while date.length < 3\n    time.push 0 while time.length < 3\n    return date.concat(time).map (d, i) -> parseInt(d) or defaultDate[i]\n  defaultDate.map (d, i) -> date[i] or d\n\nmustBeValidYear = (year, silence) ->\n  unless Number.isInteger(year) and year >= 1\n    return false if silence\n    throw new Error 'year must be an integer larger than 1'\n  true\n\nmustBeValidMonth = (month, silence) ->\n  unless Number.isInteger(month) and 1 <= month <= 12\n    return false if silence\n    throw new Error 'month must be an integer between 1 to 12'\n  true\n\nmustBeValidDay = (year, month, day, silence) ->\n  lastDay = Time.lastDayOfTheMonth year, month\n  unless Number.isInteger(day) and 1 <= day <= lastDay\n    return false if silence\n    throw new Error \"day must be an integer between 1 to #{lastDay}\"\n  true\n\nmustBeValidHours = (hours, silence) ->\n  unless Number.isInteger(hours) and 0 <= hours <= 23\n    return false if silence\n    throw new Error 'hours must be an integer between 0 and 23'\n  true\n\nmustBeValidMinutes = (minutes, _prefix = 'minutes', silence) ->\n  unless Number.isInteger(minutes) and 0 <= minutes <= 59\n    return false if silence\n    throw new Error \"#{_prefix} must be an integer between 0 and 59\"\n  true\n\nmustBeValidSeconds = (seconds, silence) ->\n  mustBeValidMinutes(seconds, 'seconds', silence)\n\nmustBeValidCount = (count, silence) ->\n  unless Number.isInteger(count) and count >= 0\n    return false if silence\n    throw new Error 'count must be a positive integer'\n  true\n\nmustBeNumber = (num, silence) ->\n  unless typeof num is 'number'\n    return false if silence\n    throw new Error 'num must be a number'\n  true\n\n\n\nclass Time\n\n  constructor: (date...) ->\n    [@year, @month, @day, @hours, @minutes, @seconds] = parseArguments date...\n    mustBeValidYear @year\n    mustBeValidMonth @month\n    mustBeValidDay @year, @month, @day\n    mustBeValidHours @hours\n    mustBeValidMinutes @minutes\n    mustBeValidSeconds @seconds\n\n\n\nexport {\n  Time\n  Time as default\n  parseArguments\n  mustBeValidYear\n  mustBeValidMonth\n  mustBeValidDay\n  mustBeValidHours\n  mustBeValidMinutes\n  mustBeValidSeconds\n  mustBeValidCount\n  mustBeNumber\n}\n","import {Time, mustBeNumber, mustBeValidCount} from './time.coffee'\n\n\n\nTime.prototype.since = (date...) ->\n  s = new Time date...\n  s = new Date s.year, s.month - 1, s.day, s.hours, s.minutes, s.seconds\n  current = new Date @year, @month - 1, @day, @hours, @minutes, @seconds\n  seconds = (current - s) / 1000\n  minutes = seconds / 60\n  hours = minutes / 60\n  days = hours / 24\n  weeks = days / 7\n  months = days / 30\n  years = days / 365\n  {years, months, days, hours, minutes, seconds, weeks}\n\nTime.prototype.to = (date...) -> new Time(date...).since(this)\n\nTime.prototype.calcYear = (count) ->\n  mustBeNumber count\n  new Time @year + count\n\nTime.prototype.calcMonth = (count) ->\n  mustBeNumber count\n  new Time new Date(@year, @month - 1 + count)\n\nTime.prototype.calcDay = (count) ->\n  mustBeNumber count\n  new Time new Date(@year, @month - 1, @day + count)\n\nTime.prototype.calcHours = (count) ->\n  mustBeNumber count\n  new Time new Date(@year, @month - 1, @day, @hours + count)\n\nTime.prototype.calcMinutes = (count) ->\n  mustBeNumber count\n  new Time new Date(@year, @month - 1, @day, @hours, @minutes + count)\n\nTime.prototype.calcSeconds = (count) ->\n  mustBeNumber count\n  date = new Date(@year, @month - 1, @day, @hours, @minutes, @seconds + count)\n  new Time date\n\nTime.prototype.calcWeeks = (count) ->\n  mustBeNumber count\n  daysCount = Math.abs(count * 7)\n  if count > 0 then @nextDay daysCount else @prevDay daysCount\n\naddPrototypeMethods = (unit) ->\n  s = if ['Hour', 'Minute', 'Second', 'Week'].includes(unit) then 's' else ''\n  Time.prototype[\"prev#{unit}\"] = (count = 1) ->\n    mustBeValidCount count\n    @[\"calc#{unit}#{s}\"] -count\n  Time.prototype[\"next#{unit}\"] = (count = 1) ->\n    mustBeValidCount count\n    @[\"calc#{unit}#{s}\"] count\n\nfor unit in ['Year', 'Month', 'Day', 'Hour', 'Minute', 'Second', 'Week']\n  addPrototypeMethods unit\n","import {Time} from './time.coffee'\nimport './calc.coffee'\n\n\n\ndevideByUnit = (unit, ruleFn, beginning, end) ->\n  [beginning, end, splited] = [new Time(beginning), new Time(end), []]\n  while ruleFn beginning, end\n    splited.push {\n      beginning: beginning[\"beginningOfThe#{unit}\"]()\n      end: beginning[\"endOfThe#{unit}\"]()\n    }\n    beginning = beginning[\"next#{unit}\"]()\n  splited\n\nyearRuleFn = (beginning, end) ->\n  new Date(\n    end.year\n  ) - new Date(\n    beginning.year\n  ) >= 0\n\nmonthRuleFn = (beginning, end) ->\n  new Date(\n    end.year,\n    end.month - 1\n  ) - new Date(\n    beginning.year,\n    beginning.month - 1\n  ) >= 0\n\ndayRuleFn = (beginning, end) ->\n  new Date(\n    end.year,\n    end.month - 1,\n    end.day\n  ) - new Date(\n    beginning.year,\n    beginning.month - 1,\n    beginning.day\n  ) >= 0\n\nhourRuleFn = (beginning, end) ->\n  new Date(\n    end.year,\n    end.month - 1,\n    end.day,\n    end.hours\n  ) - new Date(\n    beginning.year,\n    beginning.month - 1,\n    beginning.day,\n    beginning.hours\n  ) >= 0\n\nbindMethods = (unit, ruleFn) ->\n  Time[\"devideBy#{unit}\"] = (beginning, end) ->\n    devideByUnit unit, ruleFn, beginning, end\n\nruleFns =\n  Year: yearRuleFn\n  Month: monthRuleFn\n  Day: dayRuleFn\n  Week: dayRuleFn\n  Hour: hourRuleFn\n\nbindMethods(unit, ruleFn) for unit, ruleFn of ruleFns\n","import {Time, mustBeValidYear, parseArguments} from './time.coffee'\n\n\n\nisLeapYear = (year) ->\n  mustBeValidYear year\n  return true if year % 400 is 0\n  year % 4 is 0 and year % 100 isnt 0\n\nTime.isLeapYear = (date...) ->\n  [year] = parseArguments date...\n  isLeapYear year\n\nTime.prototype.isLeapYear = -> Time.isLeapYear this\n\n\n\nexport {\n  isLeapYear\n  isLeapYear as default\n}\n","import {\n  Time\n  parseArguments\n  mustBeValidYear\n  mustBeValidMonth\n} from './time.coffee'\nimport {isLeapYear} from './leap-year.coffee'\n\n\n\nlastDayOfTheMonth = (year, month) ->\n  mustBeValidYear year\n  mustBeValidMonth month\n  return 30 if [4, 6, 9, 11].includes month\n  return 29 if month is 2 and isLeapYear year\n  return 28 if month is 2 and not isLeapYear year\n  31\n\nTime.lastDayOfTheMonth = (date...) ->\n  [year, month] = parseArguments date...\n  lastDayOfTheMonth year, month\n\nTime.prototype.lastDayOfTheMonth = -> Time.lastDayOfTheMonth this\n\n\n\nexport {\n  lastDayOfTheMonth\n  lastDayOfTheMonth as default\n}\n","import {\n  Time\n  parseArguments\n  mustBeValidYear\n  mustBeValidMonth\n  mustBeValidDay\n} from './time.coffee'\n\n\n\nwhatDay = (year, month, day) ->\n  mustBeValidYear year\n  mustBeValidMonth month\n  mustBeValidDay year, month, day\n  new Date(year, month - 1, day).getDay()\n\nTime.whatDay = (date...) ->\n  [year, month, day] = parseArguments date...\n  whatDay year, month, day\n\nTime.prototype.whatDay = -> Time.whatDay this\n\n\n\nexport {\n  whatDay\n  whatDay as default\n}\n","import {Time} from './time.coffee'\nimport './last-day.coffee'\nimport './what-day.coffee'\nimport './calc.coffee'\n\n\n\nTime.prototype.beginningOfTheYear = -> new Time @year, 1, 1, 0, 0, 0\n\nTime.prototype.endOfTheYear = -> new Time @year, 12, 31, 23, 59, 59\n\nTime.prototype.beginningOfTheMonth = -> new Time @year, @month, 1, 0, 0, 0\n\nTime.prototype.endOfTheMonth = ->\n  new Time @year, @month, @lastDayOfTheMonth(), 23, 59, 59\n\nTime.prototype.beginningOfTheDay = -> new Time @year, @month, @day, 0, 0, 0\n\nTime.prototype.endOfTheDay = -> new Time @year, @month, @day, 23, 59, 59\n\nTime.prototype.beginningOfTheHour = ->\n  new Time @year, @month, @day, @hours, 0, 0\n\nTime.prototype.endOfTheHour = -> new Time @year, @month, @day, @hours, 59, 59\n\nTime.prototype.beginningOfTheWeek = -> @prevDay(@whatDay()).beginningOfTheDay()\n\nTime.prototype.endOfTheWeek = -> @nextDay(6 - @whatDay()).endOfTheDay()\n","import {\n  Time\n  parseArguments\n  mustBeValidYear\n  mustBeValidMonth\n  mustBeValidDay\n  mustBeValidHours\n  mustBeValidMinutes\n  mustBeValidSeconds\n} from './time.coffee'\n\n\n\ntoStamp = (date...) ->\n  [year, month, day, hours, minutes, seconds] = parseArguments date...\n  mustBeValidYear year\n  mustBeValidMonth month\n  mustBeValidDay year, month, day\n  mustBeValidHours hours\n  mustBeValidMinutes minutes\n  mustBeValidSeconds seconds\n  new Date(year, month - 1, day, hours, minutes, seconds).getTime() / 1000\n\nTime.toStamp = toStamp\n\nTime.prototype.toStamp = -> Time.toStamp this\n\n\n\nexport {\n  toStamp\n  toStamp as default\n}\n","import {Time} from './time.coffee'\nimport {toStamp} from './to-stamp.coffee'\n\n\n\nequals = (one, two) ->\n  [one, two] = [new Time(one), new Time(two)]\n  toStamp(one) is toStamp(two)\n\nlatest = (times...) ->\n  return null unless times.length\n  times = times.map (t) -> new Time t\n  times.sort((a, b) -> toStamp(b) - toStamp(a))[0]\n\nearlist = (times...) ->\n  return null unless times.length\n  times = times.map (t) -> new Time t\n  times.sort((a, b) -> toStamp(a) - toStamp(b))[0]\n\nTime.equals = equals\n\nTime.latest = latest\n\nTime.earlist = earlist\n\nTime.prototype.equals = (time) -> Time.equals this, new Time(time)\n\nTime.prototype.laterThan = (time) -> this.toStamp() > new Time(time).toStamp()\n\nTime.prototype.earlierThan = (time) -> this.toStamp() < new Time(time).toStamp()\n\n\n\nexport {\n  equals\n  equals as default\n}\n","import {Time} from './time.coffee'\n\n\n\nmethodNames = (unit = 'day') ->\n  s = if ['hour', 'minute', 'second', 'week'].includes unit then 's' else ''\n  {\n    nextUnit: luda.camelCase \"next-#{unit}\"\n    prevUnit: luda.camelCase \"prev-#{unit}\"\n    beginningOfUnit: luda.camelCase \"beginning-of-the-#{unit}\"\n    endOfUnit: luda.camelCase \"end-of-the-#{unit}\"\n    calcUnit: luda.camelCase \"calc-#{unit}#{s}\"\n    devideByUnit: luda.camelCase \"devide-by-#{unit}\"\n  }\n\nTime.methodNames = methodNames\n\n\n\nexport {\n  methodNames,\n  methodNames as default\n}\n","import {\n  Time\n  parseArguments\n  mustBeValidYear\n  mustBeValidMonth\n  mustBeValidDay\n  mustBeValidHours\n  mustBeValidMinutes\n  mustBeValidSeconds\n} from './time.coffee'\n\n\n\ndouble = (num) -> if num >= 10 then \"#{num}\" else \"0#{num}\"\n\ntoString = (time, format = '{yyyy}-{mm}-{dd} {HH}:{MM}:{SS}') ->\n  unless Object.prototype.toString.call(time) is \"[object Object]\" \\\n  or time instanceof Time\n    throw new Error 'time must be an object or an instance of Time'\n  return format time if typeof format is 'function'\n  mustBeValidYear time.year if 'year' of time\n  mustBeValidMonth time.month if 'month' of time\n  if 'day' of time and 'year' of time and 'month' of time\n    mustBeValidDay time.year, time.month, time.day\n  mustBeValidHours time.hours if 'hours' of time\n  mustBeValidMinutes time.minutes if 'minutes' of time\n  mustBeValidSeconds time.seconds if 'seconds' of time\n  str = format.replace /\\{yyyy\\}/g, double(time.year)\n  loopObj = {\n    m: time.month or 1, d: time.day or 1,\n    H: time.hours or 0, M: time.minutes or 0, S: time.seconds or 0\n  }\n  for placeholder, value of loopObj\n    pattern = new RegExp \"\\\\{#{placeholder}\\\\}\", 'g'\n    dbPattern = new RegExp \"\\\\{#{placeholder}#{placeholder}\\\\}\", 'g'\n    str = str.replace dbPattern, double(value)\n    str = str.replace pattern, value\n  str.trim()\n\nTime.toString = (time, format) -> toString time, format\n\nTime.prototype.toString = (format) -> Time.toString this, format\n\n\n\nexport {\n  toString\n  toString as default\n}\n","import {\n  Time\n  parseArguments\n  mustBeValidYear\n  mustBeValidMonth\n  mustBeValidDay\n} from './time.coffee'\nimport {lastDayOfTheMonth} from './last-day.coffee'\n\n\n\nweekOfTheYear = (year, month, day) ->\n  mustBeValidYear year\n  mustBeValidMonth month\n  mustBeValidDay year, month, day\n  firstDayWeekDay = new Date(year, 0, 1).getDay()\n  firstWeekDaysCount = 7 - firstDayWeekDay\n  return 1 if month is 1 and 1 <= day <= firstWeekDaysCount\n  [m, daysCount] = [0, 0]\n  daysCount += lastDayOfTheMonth(year, m) while (m += 1) < month\n  daysCount += day\n  1 + Math.ceil((daysCount - firstWeekDaysCount) / 7)\n\nTime.weekOfTheYear = (date...) ->\n  [year, month, day] = parseArguments date...\n  weekOfTheYear year, month, day\n\nTime.prototype.weekOfTheYear = -> Time.weekOfTheYear this\n\n\n\nexport {\n  weekOfTheYear\n  weekOfTheYear as default\n}\n","import {\n  Time\n  parseArguments\n  mustBeValidYear\n  mustBeValidMonth\n  mustBeValidDay\n} from './time.coffee'\nimport {whatDay} from './what-day.coffee'\n\n\n\nisWeekend = (year, month, day) ->\n  mustBeValidYear year\n  mustBeValidMonth month\n  mustBeValidDay year, month, day\n  [0, 6].includes whatDay(year, month, day)\n\nTime.isWeekend = (date...) ->\n  [year, month, day] = parseArguments date...\n  isWeekend year, month, day\n\nTime.isWeekday = (date...) -> not Time.isWeekend date...\n\nTime.prototype.isWeekend = -> Time.isWeekend this\n\nTime.prototype.isWeekday = -> not Time.isWeekend this\n\n\n\nexport {\n  isWeekend\n  isWeekend as default\n}\n","capitalize = (str = '') ->\n  str.charAt(0).toUpperCase() + str.slice(1)\n\n\n\nexport {capitalize}\n","import {Time} from '../../models/time/index.coffee'\nimport {capitalize} from '../../utilities/string.coffee'\n\n\n\nbuiltInProps = [\n  'uid', 'rootId', 'wbs', 'type', 'created', 'isHidden', 'stacks', 'errors',\n  'operations', 'readonlys', 'tasks', 'events', 'pendingDeps'\n]\n\nenhancedProps = [\n  'dependencies', 'predecessors', 'successors', 'end', 'beginning', 'duration',\n  'isPicked', 'isFolded', 'actions', 'readonlyProps'\n]\n\ntaskActions = [\n  'pick', 'update', 'createTask', 'createMilestone', 'destroy', 'fold'\n]\n\nrootTaskActions = [\n  'createTask', 'createMilestone', 'destroyDescendants', 'switchState'\n]\n\nmilestoneActions = [\n  'pick', 'update', 'destroy'\n]\n\ninvalidMilestoneActions = [\n  'createTask', 'createMilestone', 'fold'\n]\n\ndepcTypes = ['finishToStart', 'startToStart', 'finishToFinish', 'startToFinish']\n\ndepcTypeShortcuts = ['f2s', 's2s', 'f2f', 's2f']\n\nisTask = (task) -> task instanceof Task\n\nmustBeTask = (task) ->\n  throw new Error \"Invalid Task instance\" unless isTask task\n\nmustLikeTask = (data = {}) ->\n  return if isTask data\n  error = new Error \"Invalid Task like data\"\n  throw error unless data.data\n  throw error unless (data.rootId or data.data.rootId)\n  throw error unless (data.uid or data.data.uid)\n\nroot = (task) ->\n  mustLikeTask task\n  rootTask = Task.roots[task.rootId or task.data.rootId]\n  throw new Error \"Task root not found.\" unless rootTask\n  rootTask\n\nisRoot = (task) ->\n  mustBeTask task\n  task is root task\n\nmustBeRoot = (task) ->\n  throw new Error \"Invalid root task\" unless isRoot task\n\nisExisted = (task) ->\n  mustBeTask task\n  return false unless rootId = task.rootId\n  return false unless rootTask = Task.roots[rootId]\n  isRoot(task) or rootTask.tasks.includes task\n\nmustExist = (task) ->\n  mustBeTask task\n  throw new Error \"Task doesn't exist\" unless isExisted task\n\nfind = (rootTask, uidOrWbs) ->\n  mustBeRoot rootTask\n  rootTask.tasks.find (t) ->\n    return t.data.wbs is uidOrWbs.trim() if luda.isString uidOrWbs\n    t.uid is uidOrWbs\n\nparent = (task, includeRoot = false) ->\n  mustExist task\n  return null if isRoot task\n  unless parentTaskWbs = parentWbs task.data.wbs\n    return if includeRoot then root task else null\n  find root(task), parentTaskWbs\n\nmustHasConsecutiveWbs = (task) ->\n  mustBeTask task\n  [wbs, rootTask] = [task.data.wbs, root task]\n  throw new Error \"wbs: #{wbs} has been occupied\" if find rootTask, wbs\n  return if wbs is '1'\n  return if find rootTask, prevWbs(wbs)\n  return if find rootTask, parentWbs(wbs)\n  throw new Error \"wbs: #{wbs} is not consecutive\"\n\nisValidWbs = (wbs) -> wbs and wbs.length\n\nmustBeValidWbs = (wbs) ->\n  throw new Error \"Invalid wbs: #{wbs}\" unless isValidWbs wbs\n\nsplitWbs = (wbs = '') ->\n  mustBeValidWbs wbs\n  (if luda.isArray wbs then wbs else wbs.split '.').map (n) ->\n    number = parseInt n, 10\n    unless Number.isInteger(number) and number > 0\n      throw new Error \"wbs: #{wbs} must be combined with positive integers\"\n    number\n\njoinWbs = (wbs = []) -> splitWbs(wbs).join '.'\n\nprevWbs = (wbs = '') ->\n  return null unless isValidWbs wbs\n  arr = splitWbs wbs\n  arr[arr.length - 1] -= 1\n  return null if arr[arr.length - 1] <= 0\n  arr.join '.'\n\nnextWbs = (wbs = '') ->\n  return null unless isValidWbs wbs\n  arr = splitWbs wbs\n  arr[arr.length - 1] += 1\n  arr.join '.'\n\nparentWbs = (wbs = '') ->\n  return null unless isValidWbs wbs\n  arr = splitWbs wbs\n  arr.pop()\n  return null unless arr.length\n  arr.join '.'\n\nfirstChildWbs = (wbs = '') ->\n  return '1' unless isValidWbs wbs\n  arr = splitWbs wbs\n  arr.push 1\n  arr.join '.'\n\nsplitDeps = (deps = '') ->\n  arr = deps.trim().split(',')\n  .map((str) -> str.trim())\n  .filter((str) -> str.length)\n  luda.unique(arr).sort()\n\njoinDeps = (depsArr = []) ->\n  arr = depsArr\n  .map((str) -> str.trim())\n  .filter((str) -> str.length)\n  luda.unique(arr).sort().join ','\n\nrevokeTask = (task) ->\n  allTasks =  root(task).tasks\n  index = allTasks.indexOf this\n  allTasks.splice index, 1 if index >= 0\n  delete task.rootId\n\n\n\nclass Task\n\n  @roots = {}\n\n  constructor: (data = {}, options = {}) ->\n    if options.source is 'history'\n      @[key] = val for key, val of data\n      return root(this).tasks.push this\n    throw new Error \"Task instance cannot be recreated\" if isTask data\n    # Common data structure\n    @uid = luda.guid()\n    @data = Object.assign {}, data\n    delete @data.uid\n    @created = false\n    @errors = {}\n    unless @data.wbs\n      @constructor.roots[@uid] = this\n      # Root task data structure\n      @rootId = @uid\n      delete @data.rootId\n      @tasks = []\n      @events = {}\n      @stacks = {undo: [], redo: []}\n      @data.exclusions ||= []\n      @data.excludeWeekends = true unless 'excludeWeekends' of data\n      @data.inclusions ||= []\n      @data.minDurationSeconds ||= 3600 * 24\n      @data.maxHistorySize ||= Infinity\n      @data.actions ||= rootTaskActions.slice()\n      @actions @data.actions...\n    else\n      rootId = @rootId = @data.rootId\n      taskWbs = @data.wbs\n      mustHasConsecutiveWbs this\n      # Add the task to its root tasks store.\n      root(this).tasks.push this\n      return revokeTask(this) unless @trigger 'before-create', @data, true\n      # Preventing wbs and rootId from being modified\n      # in before-create event callback\n      @rootId = rootId\n      delete @data.rootId\n      @data.wbs = taskWbs\n      # Setting built-in default values\n      isMilestone = @data.type is 'milestone'\n      @data.type = 'task' unless isMilestone\n      @data.name ||= \"New #{capitalize @data.type}\"\n      if @data.end instanceof Time\n        @data.end = @data.end.toString()\n      else\n        @data.end ||= ''\n      if @data.beginning instanceof Time\n        @data.beginning = @data.beginning.toString()\n      else\n        @data.beginning ||= ''\n      @data.dependencies ||= {}\n      @data.dependencies.finishToStart ||= ''\n      @data.dependencies.startToStart ||= ''\n      @data.dependencies.finishToFinish ||= ''\n      @data.dependencies.startToFinish ||= ''\n      @depended = {\n        finishToStart: '', startToStart: '',\n        finishToFinish: '', startToFinish: ''\n      }\n      @operations = []\n      operations = @data.actions\n      operations ||= if isMilestone then milestoneActions else taskActions\n      @actions operations...\n      delete @data.actions\n      @readonlys = []\n      readonlys = luda.unique builtInProps.concat(@data.readonlyProps or [])\n      @readonlyProps readonlys...\n      delete @data.readonlyProps\n      isTopLevel = (p = parent this, true) is root this\n      @isPicked = if isTopLevel then false else Boolean(p.isPicked)\n      @isFolded = @isHidden = if isTopLevel then false else Boolean(p.isFolded)\n      if p.data.type is 'milestone'\n        rollbackIndex = root(this).tasks.indexOf this\n        root(this).tasks.splice rollbackIndex, 1 if rollbackIndex >= 0\n        throw new Error \"A milestone cannot be a parent\"\n      if isMilestone\n        # Making sure the duration of a milestone is 0.\n        # Setting the time of a top level milestone default to current time if\n        # without an initial time.\n        if isTopLevel\n          end = beginning = new Time @data.end or @data.beginning\n          @data.end = @data.beginning = end.toString()\n        # Making sure the duration of a milestone is 0.\n        # Setting the time of a non-top level milestone to\n        # its parent's end time before creating.\n        else\n          end = beginning = @data.end or @data.beginning\n          @data.end = @data.beginning = p.data.end\n      else\n        # Making sure the duration of a top level task\n        # isn't shorter than the min duration setting before creating.\n        # If without an initial time range, make it default to current time to\n        # current time + minDurationSeconds.\n        if isTopLevel\n          [end, beginning] = [new Time(@data.end), new Time(@data.beginning)]\n          earlistEnd = beginning.nextSecond root(this).data.minDurationSeconds\n          end = earlistEnd if end.earlierThan earlistEnd\n          @data.end = end.toString()\n          @data.beginning = beginning.toString()\n        # Setting the beginning and end of a child\n        # the same as its parent before creating.\n        else\n          [end, beginning] = [@data.end, @data.beginning]\n          [@data.end, @data.beginning] = [p.data.end, p.data.beginning]\n      # Setting dependencies\n      # and caching the wbs numbers of dependencies not created yet\n      Object.keys(@data.dependencies).forEach (type) =>\n        wbses = splitDeps @data.dependencies[type]\n        @_addDeps type, wbses...\n        added = splitDeps @data.dependencies[type]\n        pending = wbses.filter (wbs) -> not added.includes wbs\n        @pendingDeps = ({type, wbs} for wbs in pending) if pending.length\n      # Adjusting the beginning and end\n      return revokeTask(this) unless @_tryUpdateSchedule {beginning}\n      return revokeTask(this) unless @_tryUpdateSchedule {end}\n      # Adding this task as a dependency of the ones,\n      # which are depended on this but created earlier.\n      root(this).tasks.forEach (task) =>\n        return unless task.pendingDeps\n        task.pendingDeps = task.pendingDeps.filter (p) =>\n          return true unless p.wbs is @data.wbs\n          task.addDeps p.type, this\n          false\n        delete task.pendingDeps unless task.pendingDeps.length\n    @created = true\n    @trigger 'after-create'\n\n\n\nTask.prototype.isRoot = -> isRoot this\n\n\n\nexport {\n  Task\n  Task as default\n  isTask\n  mustBeTask\n  root\n  isRoot\n  mustBeRoot\n  isExisted\n  mustExist\n  find\n  parent\n  splitWbs\n  joinWbs\n  splitDeps\n  joinDeps\n  prevWbs\n  nextWbs\n  parentWbs\n  firstChildWbs\n  builtInProps\n  enhancedProps\n  taskActions\n  rootTaskActions\n  milestoneActions\n  invalidMilestoneActions\n  depcTypes\n  depcTypeShortcuts\n}\n","import {Time} from '../time/index.coffee'\n\n\nmustBeTimeline = (obj) ->\n  throw new Error 'Not a timeline instance' unless obj instanceof Timeline\n\nmustBeValidLeastRange = mustBeValidPadding = (n) ->\n  unless Number.isInteger(n) and n > 0\n    throw new Error 'must be a positive integer'\n\nclass Timeline\n\n  constructor: (data = {}) ->\n    if data instanceof Timeline\n      throw new Error \"Timeline instance cannot be recreated\"\n    @uid = luda.guid()\n    @unit data.unit or 'day'\n    @events = {}\n    @_padding = data.padding or 4\n    mustBeValidPadding @_padding\n    @_leastRange = data.leastRange or 13\n    mustBeValidLeastRange @_leastRange\n    @_beginning = null\n    @beginning new Time(data.beginning)\n    @_end = null\n    @end if data.end then new Time(data.end) else new Time(data.beginning)\n    @_exclusions = data.exclusions or []\n    @_inclusions = data.inclusions or []\n    if 'excludeWeekends' of data\n      @_excludeWeekends = data.excludeWeekends\n    else\n      @_excludeWeekends = true\n    @_flags = data.flags or []\n    @created = true\n    @trigger 'after-create'\n\n\n\nexport {\n  Timeline\n  Timeline as default\n  mustBeTimeline\n}\n","import {mustBeRoot} from '../models/task/task.coffee'\nimport {mustBeTimeline} from '../models/timeline/timeline.coffee'\n\n\n\nstores = {}\n\ncreate = (rootTask, timeline, config) ->\n  mustBeRoot rootTask\n  mustBeTimeline timeline\n  stores[rootTask.uid] = {root: rootTask, timeline, config}\n\ndestroy = (rootId) ->\n  throw new Error 'rootId must be present' unless rootId\n  rootId = parseInt rootId, 10\n  delete stores[rootId]\n\nfind = (uid) ->\n  throw new Error 'uid must be present' unless uid\n  uid = parseInt uid, 10\n  matched = null\n  return matched = store.root if store = stores[uid]\n  Object.keys(stores).some (rootId) ->\n    store = stores[rootId]\n    matched = store.timeline if store.timeline.uid is uid\n    matched = store.config if store.config.uid is uid\n    return true if matched\n    matched = store.root.find uid\n  matched\n\nrelations = (uid) ->\n  throw new Error 'uid must be present' unless uid\n  uid = parseInt uid, 10\n  matched = null\n  return matched = store if store = stores[uid]\n  Object.keys(stores).some (rootId) ->\n    store = stores[rootId]\n    matched = store if store.timeline.uid is uid\n    matched = store if store.config.uid is uid\n    return true if matched\n    matched = store if store.root.find uid\n  matched\n\n\n\nexport default {create, destroy, find, relations}\n","import store from '../models/store.coffee'\n\n\n\nluda.mixin 'kickoffModelable',\n\n  model: -> store.find @root.data('uid')\n\n  relations: -> store.relations @root.data('uid')\n\n  rootTask: -> @relations()?.root\n\n  timeline: -> @relations()?.timeline\n\n  config: -> @relations()?.config\n\n\n\nexport default luda.mixin 'kickoffModelable'\n","import modelable from '../../mixins/modelable.coffee'\n\n\n\nluda.component 'kickoffButtonDestroyLink'\n\n.protect modelable.all()\n\n.protect\n\n  from: -> @root.data 'from'\n\n.protect\n\n  destroy: ->\n    return if @model().isRoot()\n    @model().removeDeps @from()\n\n.help\n\n  create: ->\n    return unless model = @model()\n    depc = @rootTask().find @from()\n    return unless depc\n    {type, shortcut} = @model().depcType depc\n    return unless shortcut\n    title = \"Remove #{luda.dashCase(type).replace(/-/g, ' ')} association\n             with #{depc.data.wbs} #{depc.data.name}\"\n    html = \"<i class='kickoff-ico-cross'></i> #{shortcut} #{depc.data.wbs}\"\n    @root.attr('title', title).html html\n\n  listen: -> [['click', @destroy]]\n","luda.mixin 'kickoffLocaleable',\n\n  locale: (path = '') ->\n    conf = @_locale ||= @config().locale\n    pathes = path.split '.'\n    for key in pathes\n      conf = conf[key]\n      return '' if conf is undefined or conf is null\n    conf = conf.$ if Object.prototype.toString.call(conf) is '[object Object]'\n    return '' if conf is undefined or conf is null\n    String conf\n\n  l: (path) -> @locale path\n\n\n\nexport default luda.mixin 'kickoffLocaleable'\n","import Time from '../../models/time/index.coffee'\nimport modelable from '../../mixins/modelable.coffee'\nimport localeable from '../../mixins/localeable.coffee'\n\n\n\nluda.component 'kickoffButtonCreateMilestone'\n\n.protect modelable.all()\n\n.protect localeable.all()\n\n.protect\n\n  create: -> @model().create({type: 'milestone'})\n\n.help\n\n  create: ->\n    return unless model = @model()\n    if @model().isRoot()\n      html = @l 'task.actions.createMilestone'\n    else\n      html = \"<i class='kickoff-ico-diamond'></i>\"\n    @root.html html\n    unless @model().isRoot()\n      @root.attr 'title', @l('task.actions.createSubMilestone')\n\n  listen: -> [['click', @create]]\n","import modelable from '../../mixins/modelable.coffee'\nimport localeable from '../../mixins/localeable.coffee'\n\n\n\nluda.component 'kickoffButtonsStateSwitch'\n\n.protect modelable.all()\n\n.protect localeable.all()\n\n.protect\n\n  template: ->\n    uid = @model().uid\n    \"<button class='kickoff-button-state-undo' data-uid='#{uid}'>\n      #{@l 'header.actions.undo'}\n     </button>\n     <button class='kickoff-button-state-redo' data-uid='#{uid}'>\n      #{@l 'header.actions.redo'}\n     </button>\"\n\n  setButtonsStates: ->\n    canUndo = @model().stacks.undo.length > 0\n    canRedo = @model().stacks.redo.length > 0\n    @undoButton.attr 'disabled', if canUndo then null else ''\n    @redoButton.attr 'disabled', if canRedo then null else ''\n\n  undo: -> @model().undo()\n\n  redo: -> @model().redo()\n\n.help\n\n  create: ->\n    @root.html @template()\n    @setButtonsStates()\n    @model().on \"after-update-state-stack.#{@id}\", (event, detail) =>\n      @setButtonsStates()\n\n  listen: ->\n    [\n      ['click', '.kickoff-button-state-undo', @undo]\n      ['click', '.kickoff-button-state-redo', @redo]\n    ]\n\n  find: ->\n    undoButton: '.kickoff-button-state-undo'\n    redoButton: '.kickoff-button-state-redo'\n\n  destroy: ->\n    @model().off \"after-update-state-stack.#{@id}\"\n","import Time from '../../models/time/index.coffee'\nimport modelable from '../../mixins/modelable.coffee'\nimport localeable from '../../mixins/localeable.coffee'\n\n\n\nluda.component 'kickoffButtonCreateTask'\n\n.protect modelable.all()\n\n.protect localeable.all()\n\n.protect\n\n  create: ->\n    return @model().create({}) unless @model().isRoot()\n    unit = @timeline().unit()\n    m = Time.methodNames unit\n    beginning = new Time()[m.beginningOfUnit]()\n    end = beginning[m.endOfUnit]()\n    @model().create({beginning, end})\n\n.help\n\n  create: ->\n    return unless model = @model()\n    if @model().isRoot()\n      html = @l 'task.actions.createTask'\n    else\n      html = \"<i class='kickoff-ico-copy'></i>\"\n    @root.html html\n    unless @model().isRoot()\n      @root.attr 'title', @l('task.actions.createSubTask')\n\n  listen: -> [['click', @create]]\n","import modelable from '../../mixins/modelable.coffee'\nimport localeable from '../../mixins/localeable.coffee'\nimport {capitalize} from '../../utilities/string.coffee'\n\n\n\nluda.component 'kickoffButtonDestroyTask'\n\n.protect modelable.all()\n\n.protect localeable.all()\n\n.protect\n\n  tasksToBeDestroied: ->\n    @model().picked().filter (t) -> t.canBeDestroied()\n\n  destroy: ->\n    return @model().destroy() unless @model().isRoot()\n    return unless (picked = @tasksToBeDestroied()).length\n    @model().destroy picked...\n\n  enableOrDisableButton: ->\n    return @root.removeAttr 'disabled' if @tasksToBeDestroied().length\n    @root.attr 'disabled', ''\n\n.help\n\n  create: ->\n    return unless @model()\n    if @model().isRoot()\n      html = @l 'task.actions.destroyDescendants'\n    else\n      html = \"<i class='kickoff-ico-delete'></i>\"\n    @root.html html\n    title = @l \"task.actions.destroy#{capitalize @model().type()}\"\n    @root.attr('title', title) unless @model().isRoot()\n    return unless @model().isRoot()\n    @enableOrDisableButton()\n    @model().on \"after-create.#{@id}\", => @enableOrDisableButton()\n    @model().on \"after-update.#{@id}\", (event, updated) =>\n      @enableOrDisableButton() if 'isPicked' of updated\n    @model().on \"after-destroy.#{@id}\", =>\n      setTimeout => @enableOrDisableButton()\n\n  listen: -> [['click', @destroy]]\n","import {capitalize} from '../../utilities/string.coffee'\nimport modelable from '../../mixins/modelable.coffee'\nimport localeable from '../../mixins/localeable.coffee'\n\n\n\nluda.component 'kickoffButtonEditTask'\n\n.protect modelable.all()\n\n.protect localeable.all()\n\n.protect\n\n  edit: ->\n    return if @model().isRoot()\n    modal = luda(\".kickoff-modal-edit-task[data-uid='#{@model().uid}']\")\n    unless modal.length\n      kickoffSelector = \".kickoff[data-uid='#{@rootTask().uid}']\"\n      luda(kickoffSelector).append modal = @modalNode()\n      form = modal.find '.kickoff-modal-task-form'\n      closeModal = -> luda.kickoffModal(modal).deactivate()\n      renderName = \"render#{capitalize @model().type()}Form\"\n      return r(@model(), form.get(0), closeModal) if r = @config()[renderName]\n      form.append @defaultFormNode()\n    luda.kickoffModal(modal).activate()\n\n  modalNode: ->\n    return @_modalNode if @_modalNode\n    node = luda \"<div class='kickoff-modal kickoff-modal-edit-task'\n      data-uid='#{@model().uid}'>\n      <div class='kickoff-modal-body'>\n        <button class='kickoff-button-close-modal'>\n          <i class='kickoff-ico-cross'></i>\n        </button>\n        <div class='kickoff-modal-task-form'></div>\n      </div>\n    </div>\"\n    node.toggleClass 'is-milestone', @model().isMilestone()\n    detail = {$form: node.find('.kickoff-modal-task-form').get 0}\n    [oldState, newState] = [null, null]\n    node.on \"after-activate.#{@id}\", =>\n      clearTimeout @_isActivatingForm\n      clearTimeout @_isDeactivatingForm\n      @_isActivatingForm = setTimeout =>\n        oldState = @model().pushUndoState()\n        @model().stopTrackingHistory()\n        @model().trigger 'after-activate-form', detail\n    node.on \"after-deactivate.#{@id}\", =>\n      clearTimeout @_isActivatingForm\n      clearTimeout @_isDeactivatingForm\n      @_isDeactivatingForm = setTimeout =>\n        @model().trigger 'after-deactivate-form', detail\n        @model().startTrackingHistory()\n        newState = @model().pushUndoState()\n        return @model().popUndoState() if newState\n        @model().popUndoState() if oldState\n    @_modalNode = node\n\n  defaultFormNode: ->\n    return @_defaultFormNode if @_defaultFormNode\n    node = luda \"<div class='kickoff-form' data-uid='#{@model().uid}'></div>\"\n    @_defaultFormNode = node\n\n.help\n\n  create: ->\n    return unless @model()\n    html = \"<i class='kickoff-ico-edit'></i>\"\n    @root.html html\n    @root.attr 'title', @l(\"task.actions.update#{capitalize @model().type()}\")\n    @model().on \"after-destroy.#{@id}\", (e) =>\n      clearTimeout @_isActivatingForm\n      clearTimeout @_isDeactivatingForm\n      @modalNode().remove()\n\n  listen: -> [['click', @edit]]\n","import modelable from '../../mixins/modelable.coffee'\nimport localeable from '../../mixins/localeable.coffee'\n\n\n\nluda.component 'kickoffButtonFoldTask'\n\n.protect modelable.all()\n\n.protect localeable.all()\n\n.protect\n\n  render: ->\n    if @model().isFolded\n      title = @l 'task.actions.unfold'\n      html = \"<i class='kickoff-ico-right'></i>\"\n      @root.addClass 'is-folded'\n    else\n      title = @l 'task.actions.fold'\n      html = \"<i class='kickoff-ico-down'></i>\"\n      @root.removeClass 'is-folded'\n    @root.toggleClass('is-hidden', @model().children().length is 0)\n    .attr('title', title).html html\n\n.protect\n\n  toggle: -> @model().fold not @model().isFolded\n\n.help\n\n  create: ->\n    return unless model = @model()\n    @render()\n    model.on \"after-create.#{@id}\", (event) =>\n      return if event.target is model\n      @render()\n    model.on \"after-destroy.#{@id}\", (event) =>\n      return if event.target is model\n      @render()\n    model.on \"after-update.#{@id}\", (event, updated) =>\n      return unless event.target is model\n      @render() if 'isFolded' of updated\n\n  destroy: ->\n    clearTimeout @_isRendering\n    @model()?.off \"after-create.#{@id}\"\n    @model()?.off \"after-update.#{@id}\"\n\n  listen: ->\n    [['click', @toggle]]\n","import modelable from '../../mixins/modelable.coffee'\nimport localeable from '../../mixins/localeable.coffee'\n\n\n\nluda.component 'kickoffButtonPickTask'\n\n.protect modelable.all()\n\n.protect localeable.all()\n\n.protect\n\n  render: ->\n    if @model().isPicked\n      title = @l 'task.actions.unpick'\n      html = \"<i class='kickoff-ico-minus'></i>\"\n      @root.addClass 'is-picked'\n    else\n      title = @l 'task.actions.pick'\n      html = \"<i class='kickoff-ico-plus'></i>\"\n      @root.removeClass 'is-picked'\n    @root.attr('title', title).html html\n\n.protect\n\n  toggle: -> @model().pick not @model().isPicked\n\n.help\n\n  create: ->\n    return unless model = @model()\n    @render()\n    @model().on \"after-update.#{@id}\", (event, updated) =>\n      return unless event.target is @model()\n      @render() if 'isPicked' of updated\n\n  destroy: ->\n    @model()?.off \"after-update.#{@id}\"\n\n  listen: ->\n    [['click', @toggle]]\n","import modelable from '../../mixins/modelable.coffee'\nimport localeable from '../../mixins/localeable.coffee'\n\n\n\nluda.component 'kickoffButtonsViewSwitch'\n\n.protect modelable.all()\n\n.protect localeable.all()\n\n.include\n\n  view: (type = 'gantt') ->\n    luda(\".kickoff[data-uid='#{@rootTask().uid}']\")\n    .toggleClass 'view-switch-to-table', type is 'table'\n    @setButtonsStates type\n\n.protect\n\n  template: ->\n    \"<button class='kickoff-button-view-gantt'>\n       #{@l 'header.navigations.chartView'}\n     </button>\n     <button class='kickoff-button-view-table'>\n       #{@l 'header.navigations.tableView'}\n     </button>\"\n\n  setGanttView: -> @view 'gantt'\n\n  setTableView: -> @view 'table'\n\n  setButtonsStates: (viewType) ->\n    if viewType is 'gantt'\n      @viewGanttButton.attr 'disabled', ''\n      @viewTableButton.removeAttr 'disabled'\n    else\n      @viewGanttButton.removeAttr 'disabled'\n      @viewTableButton.attr 'disabled', ''\n\n.help\n\n  create: ->\n    @root.html @template()\n    @view 'gantt'\n\n  listen: ->\n    [\n      ['click', '.kickoff-button-view-gantt', @setGanttView]\n      ['click', '.kickoff-button-view-table', @setTableView]\n    ]\n\n  find: ->\n    viewGanttButton: '.kickoff-button-view-gantt'\n    viewTableButton: '.kickoff-button-view-table'\n","import './view-switch.coffee'\nimport modelable from '../../mixins/modelable.coffee'\nimport localeable from '../../mixins/localeable.coffee'\n\n\n\nluda.component 'kickoffButtonsUnitZoom'\n\n.protect modelable.all()\n\n.protect localeable.all()\n\n.protect\n\n  template: ->\n    \"<button class='kickoff-button-unit-zoom-in'>\n       #{@l 'header.navigations.zoomIn'}\n     </button>\n     <span class='kickoff-buttons-unit-zoom-current'></span>\n     <button class='kickoff-button-unit-zoom-out'>\n      #{@l 'header.navigations.zoomOut'}\n     </button>\"\n\n.protect\n\n  unitState: ->\n    current = @timeline().unit()\n    all = @timeline().avaliableUnits()\n    index = all.indexOf current\n    zoomInAble = index isnt 0\n    zoomOutAble = index isnt all.length - 1\n    {current, all, index, zoomInAble, zoomOutAble}\n\n  zoomIn: ->\n    @ensureGanttView()\n    {zoomInAble, index, all} = @unitState()\n    @timeline().unit all[index - 1] if zoomInAble\n\n  zoomOut: ->\n    @ensureGanttView()\n    {zoomOutAble, index, all} = @unitState()\n    @timeline().unit all[index + 1] if zoomOutAble\n\n  setButtonsStates: ->\n    {zoomInAble, zoomOutAble} = @unitState()\n    @zoomInButton.attr 'disabled', if zoomInAble then null else ''\n    @zoomOutButton.attr 'disabled', if zoomOutAble then null else ''\n\n  setCurrentUnitText: ->\n    unit = @timeline().unit()\n    @unitText.text @l(\"header.navigations.zoomUnits.#{unit}\") or unit\n\n  ensureGanttView: ->\n    selector = \".kickoff-buttons-view-switch[data-uid='#{@rootTask().uid}']\"\n    switcher = luda(selector)\n    return unless switcher.length\n    luda.kickoffButtonsViewSwitch(switcher).view 'gantt'\n\n.help\n\n  create: ->\n    @root.html @template()\n    @setCurrentUnitText()\n    @timeline().on \"after-update.#{@id}\", (event) =>\n      @setCurrentUnitText()\n      @setButtonsStates()\n\n  destroy: ->\n    @timeline()?.off \"after-update.#{@id}\"\n\n  listen: ->\n    [\n      ['click', '.kickoff-button-unit-zoom-in', @zoomIn]\n      ['click', '.kickoff-button-unit-zoom-out', @zoomOut]\n    ]\n\n  find: ->\n    zoomInButton: '.kickoff-button-unit-zoom-in'\n    zoomOutButton: '.kickoff-button-unit-zoom-out'\n    unitText: '.kickoff-buttons-unit-zoom-current'\n","import modelable from '../../mixins/modelable.coffee'\nimport {capitalize} from '../../utilities/string.coffee'\nimport localeable from '../../mixins/localeable.coffee'\n\n\n\nluda.component 'kickoffForm'\n\n.protect modelable.all()\n\n.protect localeable.all()\n\n.protect\n\n  fieldType: (type) ->\n    return type if type in ['number', 'select', 'textarea', 'time']\n    'text'\n\n.protect\n\n  render: ->\n    formFields = @config().formFields\n    @root.html @fieldTemplate(formFields)\n    @executeCustomRenderers formFields\n\n  fieldTemplate: (fields = [], parentIndex) ->\n    model = @model()\n    fields.map((field, index) =>\n      {prop, type, render, multiple} = field\n      if 'label' of field\n        label = field.label\n      else\n        label = @l(\"task.props.#{prop}\") or capitalize(prop)\n      fieldIndex = if parentIndex? then \"#{parentIndex}-#{index}\" else index\n      if field.fields\n        return \"<div class='kickoff-form-custom-field-group'\n                data-uid='#{model.uid}' data-label='#{label}'\n                data-field-index='#{fieldIndex}'></div>\" if render\n        return \"<div class='kickoff-form-field-group' data-uid='#{model.uid}'\n               data-field-index='#{fieldIndex}'>\n                  <label class='kickoff-form-field-group-label'>\n                    #{label}\n                  </label>\n                  <div class='kickoff-form-field-group-fields'>\n                    #{@fieldTemplate field.fields, fieldIndex}\n                  </div>\n                </div>\"\n      return '' unless prop\n      return \"<div class='kickoff-form-custom-field'\n              data-uid='#{model.uid}' data-prop='#{prop}'\n              data-field-index='#{fieldIndex}'></div>\" if render\n      \"<div class='kickoff-form-#{@fieldType type}' data-uid='#{model.uid}'\n      data-prop='#{prop}' data-field-index='#{fieldIndex}'></div>\"\n    ).join ''\n\n.protect\n\n  executeCustomRenderers: (fields = [], parentIndex) ->\n    model = @model()\n    fields.forEach (field, index) =>\n      {prop, render} = field\n      if render\n        fieldIndex = if parentIndex? then \"#{parentIndex}-#{index}\" else index\n        if field.fields\n          selector =  \".kickoff-form-custom-field-group\"\n          selector += \"[data-field-index='#{fieldIndex}']\"\n        if prop\n          selector = \".kickoff-form-custom-field\"\n          selector += \"[data-field-index='#{fieldIndex}']\"\n        return unless selector\n        render.call model, model, @root.find(selector).get(0)\n      else\n        @executeCustomRenderers field.fields, index if field.fields\n\n.help\n\n  create: -> @render()\n","import {capitalize} from '../utilities/string.coffee'\n\n\n\nluda.mixin 'kickoffInputable',\n\n  inputCls: 'kickoff-form-input'\n\n  errorMarkerCls: 'kickoff-form-input'\n\n  render: ->\n    @root.html @template()\n    # @reset()\n\n  template: ->\n    {bottomLevelProp, prop} = @fieldConfig\n    if 'label' of @fieldConfig\n      label = @fieldConfig.label\n    else\n      label = @l(\"task.props.#{prop}\") or capitalize(bottomLevelProp)\n    \"<label class='kickoff-form-label'>#{label}</label>\n     #{@inputTemplate()}\n     <p class='kickoff-form-error is-hidden'></p>\"\n\n  inputTemplate: ->\n    placeholder = @fieldConfig.placeholder or ''\n    \"<input class='#{@inputCls}' type='text' placeholder='#{placeholder}'\n    data-auto='false'/>\"\n\n  getInputValue: ->\n    String(@input.val()).trim()\n\n  setInputValue: ->\n    @input.val @getModelValue()\n\n  toggleInputReadonly: ->\n    {prop, topLevelProp} = @fieldConfig\n    if @model().readonly(topLevelProp) or @model().readonly(prop)\n      @input.attr 'readonly', ''\n      @setInputValue()\n    else\n      @input.removeAttr 'readonly'\n\n  toggleFieldError: (force) ->\n    return @model().error(@fieldConfig.prop, null) if force is null\n    propError = @model().error @fieldConfig.prop\n    if propError\n      @error.removeClass('is-hidden').html propError.join('</br>')\n      @errorMarker.addClass 'is-invalid'\n    else\n      @error.addClass('is-hidden').html ''\n      @errorMarker.removeClass 'is-invalid'\n\n  reset: ->\n    @setInputValue()\n    @toggleInputReadonly()\n    @toggleFieldError null\n\n  getModelValue: ->\n    {propTree, topLevelProp} = @fieldConfig\n    if topLevelProp is 'successors'\n      value = @model().depended\n    else if topLevelProp in ['predecessors', 'dependencies']\n      value = @model().data.dependencies\n    else\n      value = @model().data[topLevelProp]\n    for p in propTree.slice(1)\n      return unless value = value[p]\n    value\n\n  updateModelValue: ->\n    @toggleFieldError null\n    data = {}\n    data[@fieldConfig.prop] = @getInputValue()\n    @model().update data\n\n  deferUpdateModelValue: ->\n    clearTimeout @_isUpdating\n    @_isUpdating = setTimeout (=> @updateModelValue()), 50\n\n  afterUpdate: (event, updated) ->\n    return unless event.target is @model()\n    {topLevelProp, prop} = @fieldConfig\n    @setInputValue() if updated[topLevelProp] or updated[prop]\n    if updated.error\n      {newVal, oldVal} = updated.error\n      if newVal[topLevelProp] or oldVal[topLevelProp] \\\n      or newVal[prop] or oldVal[prop]\n        @toggleFieldError()\n    if updated.readonlyProps\n      {newVal, oldVal} = updated.readonlyProps\n      if newVal.includes(topLevelProp) or oldVal.includes(topLevelProp) \\\n      or newVal.includes(prop) or oldVal.includes(prop)\n        @toggleInputReadonly()\n\n  creator: ->\n    fieldIndexes = String(@root.data 'field-index').split '-'\n    conf = {fields: @config().formFields}\n    conf = conf.fields[index] while (index = fieldIndexes.shift()) >= 0\n    propTree = conf.prop.split '.'\n    topLevelProp = propTree[0]\n    bottomLevelProp = propTree[propTree.length - 1]\n    @fieldConfig = Object.assign {propTree, topLevelProp, bottomLevelProp}, conf\n    @render()\n    @model().on \"after-activate-form.#{@id}\", (e) =>\n      return unless e.target is @model()\n      @reset e\n    @model().on \"after-deactivate-form.#{@id}\", (e) =>\n      return unless e.target is @model()\n      @reset e\n    @model().on \"after-update.#{@id}\", (e, u) =>\n      return unless e.target is @model()\n      @afterUpdate e, u\n\n  destroyer: ->\n    clearTimeout @_isUpdating\n    @model()?.off \"after-activate-form.#{@id}\"\n    @model()?.off \"after-deactivate-form.#{@id}\"\n    @model()?.off \"after-update.#{@id}\"\n\n  listener: ->\n    [\n      ['change', \".#{@inputCls}\", @updateModelValue]\n      ['keydown keyup', \".#{@inputCls}\", @deferUpdateModelValue]\n    ]\n\n  finder: ->\n    input: \".#{@inputCls}\"\n    error: '.kickoff-form-error'\n    errorMarker: \".#{@errorMarkerCls}\"\n\n\n\nexport default luda.mixin 'kickoffInputable'\n","import modelable from '../../mixins/modelable.coffee'\nimport inputable from '../../mixins/inputable.coffee'\nimport localeable from '../../mixins/localeable.coffee'\n\n\n\nluda.component 'kickoffFormNumber'\n\n.protect modelable.all()\n\n.protect localeable.all()\n\n.protect inputable.except(\n  'inputCls', 'errorMarkerCls', 'inputTemplate', 'getInputValue'\n)\n\n.protect\n\n  inputCls: 'kickoff-form-number-input'\n\n  errorMarkerCls: 'kickoff-form-number-input'\n\n  inputTemplate: ->\n    placeholder = @fieldConfig.placeholder or ''\n    \"<input class='#{@inputCls}' type='number' placeholder='#{placeholder}'\n    data-auto='false' />\"\n\n  getInputValue: ->\n    value = @input.val()\n    return value if typeof value is 'number'\n    return NaN if typeof value is 'string' and not value.trim().length\n    Number value\n\n.help\n\n  create: -> @creator()\n\n  destroy: -> @destroyer()\n\n  listen: -> @listener()\n\n  find: -> @finder()\n","import {Task, mustBeTask, splitWbs} from './task.coffee'\n\n\n\ncompareWbs = (a = '', b = '') ->\n  return -1 unless a\n  return 1 unless b\n  [aWbs, bWbs, result] = [splitWbs(a), splitWbs(b), 0]\n  aWbs.push 0 if aWbs.length < bWbs.length\n  aWbs.some (n, i) -> result = n - (bWbs[i] or 0)\n  result\n\nasc = (tasks...) ->\n  tasks.forEach (t) -> mustBeTask t\n  tasks.sort (a, b) -> compareWbs(a.data?.wbs, b.data?.wbs)\n\ndesc = (tasks...) -> asc(tasks...).reverse()\n\norder = (order = 'asc', tasks...) ->\n  return asc tasks... if order is 'asc'\n  return desc tasks... if order is 'desc'\n  throw new Error \"order can only be 'asc' or 'desc'\"\n\nTask.asc = asc\nTask.desc = desc\nTask.order = order\n\n\n\nexport {\n  compareWbs\n  asc\n  desc\n  order\n  order as default\n}\n","import modelable from '../../mixins/modelable.coffee'\nimport inputable from '../../mixins/inputable.coffee'\nimport localeable from '../../mixins/localeable.coffee'\nimport {splitDeps} from '../../models/task/task.coffee'\nimport {asc} from '../../models/task/order.coffee'\n\n\n\nluda.component 'kickoffFormSelect'\n\n.protect modelable.all()\n\n.protect localeable.all()\n\n.protect inputable.except(\n  'inputCls', 'errorMarkerCls', 'inputTemplate', 'getInputValue',\n  'setInputValue', 'toggleInputReadonly'\n)\n\n.include\n\n  showOptions: -> @options.removeClass 'is-hidden'\n\n  hideOptions: -> @options.addClass 'is-hidden'\n\n  toggleOptions: (hide) -> @options.toggleClass 'is-hidden', hide\n\n.protect\n\n  inputCls: 'kickoff-form-select-input'\n\n  errorMarkerCls: 'kickoff-form-select-selected-labels'\n\n  inputTemplate: ->\n    placeholder = @fieldConfig.placeholder or ''\n    \"<div class='kickoff-form-select-simulated'>\n      <input class='kickoff-form-select-selected-labels' readonly\n      placeholder='#{placeholder}' data-auto='false' />\n      <div class='kickoff-form-select-options is-hidden'></div>\n    </div>\"\n\n  optionsTemplate: (options = []) ->\n    model = @model()\n    {topLevelProp, prop, bottomLevelProp, label, multiple} = @fieldConfig\n    inputType = if multiple then 'checkbox' else 'radio'\n    if topLevelProp in ['predecessors', 'successors'] and not options.length\n      asc(model.root().tasks...).map (t) ->\n        if topLevelProp is 'predecessors'\n          return unless model.predecessors(bottomLevelProp).includes(t) \\\n          or t.isValidPredecessorOf(model)\n        if topLevelProp is 'successors'\n          return unless model.successors(bottomLevelProp).includes(t) \\\n          or t.isValidSuccessorOf(model)\n        options.push {value: t.data.wbs, label: \"#{t.data.wbs} #{t.data.name}\"}\n    options.map((option) =>\n      {label, value} = option\n      {type, str} = @valueToStr value\n      \"<label class='kickoff-form-select-option' data-auto='false'>\n         <input class='kickoff-form-select-input'\n         name='kickoff_task_#{model.uid}_#{prop}'\n         type='#{inputType}' value='#{value}' data-auto='false'\n         data-prop='#{prop}' data-value-type='#{type}' data-label='#{label}' />\n         #{label}\n       </label>\"\n    ).join ''\n\n  refreshOptions: ->\n    self = this\n    {options} = @fieldConfig\n    @hideOptions()\n    if luda.isFunction options\n      useOptions = (deferOptions) ->\n        self.options.html self.optionsTemplate(deferOptions)\n      return options useOptions\n    @options.html @optionsTemplate(options)\n\n  toggleInputReadonly: ->\n    {prop, topLevelProp} = @fieldConfig\n    model = @model()\n    rootTask = model.root()\n    propIsReadonly = model.readonly(topLevelProp) or model.readonly(prop)\n    @setInputValue()\n    @simulatedInput.toggleClass 'is-readonly', propIsReadonly\n    @input.each (item) ->\n      isReadonly = propIsReadonly\n      if topLevelProp in ['predecessors', 'successors']\n        reverseP = {predecessors: 'successors', successors: 'predecessors'}\n        reverseTask = rootTask.find(item.value)\n        isReadonly ||= reverseTask.readonly reverseP[topLevelProp]\n        isReadonly ||= reverseTask.readonly(\n          prop.replace(topLevelProp, reverseP[topLevelProp])\n        )\n      val = if isReadonly then '' else null\n      luda(item).attr 'disabled', val\n      luda(item).parent('.kickoff-form-select-option').attr 'readonly', val\n      undefined\n\n  getInputValue: ->\n    {multiple, topLevelProp} = @fieldConfig\n    vals = []\n    @input.each (item) =>\n      return unless item.checked\n      vals.push @strToValue(item.value, luda(item).data('value-type'))\n      undefined\n    return vals if multiple\n    return vals[0] or '' if topLevelProp in ['predecessors', 'successors']\n    vals[0]\n\n  setInputValue: ->\n    {multiple, topLevelProp} = @fieldConfig\n    vals = @getModelValue()\n    vals = splitDeps vals if multiple and typeof vals is 'string'\n    vals = [vals] unless luda.isArray vals\n    @input.each (item) =>\n      checked = @strToValue(item.value, luda(item).data('value-type')) in vals\n      luda(item).attr 'checked', if checked then '' else null\n      item.checked = Boolean checked\n      undefined\n    @setSimulatedInputValue()\n\n  setSimulatedInputValue: ->\n    checkedLabels = []\n    @input.each (item) ->\n      return unless item.checked\n      checkedLabels.push luda(item).data('label')\n      undefined\n    @simulatedInput.val checkedLabels.join(', ')\n\n  toggleOptionsHandler: (event) ->\n    {prop, topLevelProp} = @fieldConfig\n    return if @model().readonly(topLevelProp) or @model().readonly(prop)\n    if event.type is 'focusin'\n      @showOptions()\n    else if event.type is 'change'\n      @toggleOptions not @fieldConfig.multiple\n\n  toggleOptionsBySimulatedInputHandler: (event) ->\n    {prop, topLevelProp} = @fieldConfig\n    return if @model().readonly(topLevelProp) or @model().readonly(prop)\n    if event.type is 'focusin'\n      isHidden = @options.hasClass 'is-hidden'\n      @showOptions()\n      @_handledByFocusin = isHidden\n    else if event.type is 'click'\n      @toggleOptions() unless @_handledByFocusin\n      delete @_handledByFocusin\n\n.protect\n\n  valueToStr: (value) ->\n    type = Object.prototype.toString.call value\n    if ['[object String]', '[object Boolean]', '[object Number]'].includes type\n      str = String value\n    else if value is undefined or value is null\n      str = ''\n    else\n      str = JSON.stringify(type)\n    {type, str}\n\n  strToValue: (str, type) ->\n    return str if type is '[object String]'\n    return Number str if type is '[object Number]'\n    return Boolean str if type is '[object Boolean]'\n    return undefined if type is '[object Undefined]'\n    return null if type is '[object Null]'\n    JSON.parse str\n\n.help\n\n  create: ->\n    @creator()\n    @model().on \"after-activate-form.#{@id}\", (event) =>\n      return unless event.target is @model()\n      @refreshOptions()\n    @model().on \"after-update.#{@id}\", (event, updated) =>\n      return unless event.target is @model()\n      {topLevelProp, prop} = @fieldConfig\n      return unless topLevelProp in ['predecessors', 'successors']\n      isAffected = false\n      if updated.predecessors\n        isAffected = Object.keys(updated.predecessors.newVal).some (type) ->\n          return if prop is \"predecessors.#{type}\"\n          newVals = splitDeps updated.predecessors.newVal[type]\n          oldVals = splitDeps updated.predecessors.oldVal[type]\n          not luda.arrayEqual newVals, oldVals\n      if updated.successors\n        isAffected ||= Object.keys(updated.successors.newVal).some (type) ->\n          return if prop is \"successors.#{type}\"\n          newVals = splitDeps updated.successors.newVal[type]\n          oldVals = splitDeps updated.successors.oldVal[type]\n          not luda.arrayEqual newVals, oldVals\n      @refreshOptions() if isAffected\n\n  destroy: -> @destroyer()\n\n  listen: ->\n    [\n      ['change', '.kickoff-form-select-input', @setSimulatedInputValue]\n      ['focusin change', '.kickoff-form-select-input', @toggleOptionsHandler]\n      [\n        'focusin click',\n        '.kickoff-form-select-selected-labels',\n        @toggleOptionsBySimulatedInputHandler\n      ]\n      [\n        'focusin click', (e) ->\n          focusedSelect = null\n          e.eventPath().some (element) ->\n            if luda(element).is '.kickoff-form-select'\n              focusedSelect = element\n              return true\n          targets = luda('.kickoff-form-select').not(focusedSelect)\n          luda.kickoffFormSelect(targets).hideOptions()\n      ]\n    ]\n    .concat @listener()\n\n  watch: ->\n    node: [\n      ['.kickoff-form-select-input', @reset]\n    ]\n\n  find: ->\n    Object.assign @finder(), {\n      simulatedInput: '.kickoff-form-select-selected-labels'\n      options: '.kickoff-form-select-options'\n    }\n","import modelable from '../../mixins/modelable.coffee'\nimport inputable from '../../mixins/inputable.coffee'\nimport localeable from '../../mixins/localeable.coffee'\n\n\n\nluda.component 'kickoffFormText'\n\n.protect modelable.all()\n\n.protect localeable.all()\n\n.protect inputable.all()\n\n.help\n\n  create: -> @creator()\n\n  destroy: -> @destroyer()\n\n  listen: -> @listener()\n\n  find: -> @finder()\n","import modelable from '../../mixins/modelable.coffee'\nimport inputable from '../../mixins/inputable.coffee'\nimport localeable from '../../mixins/localeable.coffee'\n\n\n\nluda.component 'kickoffFormTextarea'\n\n.protect modelable.all()\n\n.protect localeable.all()\n\n.protect inputable.except('inputCls', 'errorMarkerCls', 'inputTemplate')\n\n.protect\n\n  inputCls: 'kickoff-form-textarea-input'\n\n  errorMarkerCls: 'kickoff-form-textarea-input'\n\n  inputTemplate: ->\n    placeholder = @fieldConfig.placeholder or ''\n    \"<textarea class='#{@inputCls}' placeholder='#{placeholder}'\n    data-auto='false'></textarea>\"\n\n.help\n\n  create: -> @creator()\n\n  destroy: -> @destroyer()\n\n  listen: -> @listener()\n\n  find: -> @finder()\n","import modelable from '../../mixins/modelable.coffee'\nimport inputable from '../../mixins/inputable.coffee'\nimport localeable from '../../mixins/localeable.coffee'\nimport Time from '../../models/time/index.coffee'\n\n\n\nluda.component 'kickoffFormTime'\n\n.protect modelable.all()\n\n.protect localeable.all()\n\n.protect inputable.except(\n  'inputCls', 'errorMarkerCls', 'inputTemplate', 'getInputValue',\n  'setInputValue', 'toggleInputReadonly'\n)\n\n.include\n\n  showDropdown: -> @dropdown.removeClass 'is-hidden'\n\n  hideDropdown: -> @dropdown.addClass 'is-hidden'\n\n  toggleDropdown: (hide) -> @dropdown.toggleClass 'is-hidden', hide\n\n.protect\n\n  inputCls: 'kickoff-form-time-input'\n\n  errorMarkerCls: 'kickoff-form-time-selected-label'\n\n  inputTemplate: ->\n    placeholder = @fieldConfig.placeholder or ''\n    \"<div class='kickoff-form-time-simulated'>\n      <input class='kickoff-form-time-selected-label'\n      readonly placeholder='#{placeholder}' data-auto='false'/>\n      <div class='kickoff-form-time-dropdown is-hidden'>\n        <div class='kickoff-form-time-dropdown-header'>\n          <button class='kickoff-button-form-time-ctrl-prev-month'>\n            <i class='kickoff-ico-left'></i>\n          </button>\n          <label class='kickoff-form-time-header-label'></label>\n          <button class='kickoff-button-form-time-ctrl-next-month'>\n            <i class='kickoff-ico-right'></i>\n          </button>\n        </div>\n        <table class='kickoff-form-time-month'>\n          <thead><tr>\n            <th>Sun</th><th>Mon</th><th>Thu</th>\n            <th>Wes</th><th>Thr</th><th>Fri</th><th>Sat</th>\n          </tr></thead>\n          <tbody class='kickoff-form-time-month-dates'></tbody>\n        </table>\n      </div>\n    </div>\"\n\n  renderMonth: (time) ->\n    clearTimeout @_isRenderingMonth\n    @_isRenderingMonth = setTimeout =>\n      prop = @fieldConfig.prop\n      selected = new Time @getModelValue()\n      [model, time] = [@model(), new Time(time or selected)]\n      [monthB, monthE] = [time.beginningOfTheMonth(), time.endOfTheMonth()]\n      monthDates = Time.devideByDay monthB, monthE\n      firstDateWeekday = monthDates[0].beginning.whatDay()\n      lastDateWeekday = monthDates[monthDates.length - 1].beginning.whatDay()\n      monthDates.unshift null while (firstDateWeekday -= 1) >= 0\n      monthDates.push null while (lastDateWeekday += 1) <= 6\n      [datesHtml = '', monthLabel = time.toString('{yyyy}/{mm}')]\n      monthDates.forEach (date, index) ->\n        datesHtml += '<tr>' if index % 7 is 0\n        datesHtml += '<td>'\n        if date\n          value = date.beginning.toString()\n          label = date.beginning.toString '{yyyy}/{mm}/{dd}'\n          checked = selected.beginningOfTheDay().equals date.beginning\n          checkedAttr = if checked then 'checked' else ''\n          datesHtml += \"<label class='kickoff-form-time-date' data-auto='false'>\n            <input class='kickoff-form-time-input' #{checkedAttr}\n            name='kickoff_task_#{model.uid}_#{prop}' type='radio'\n            value='#{value}' data-auto='false' data-prop='#{prop}'\n            data-label='#{label}' />\n            <span class='kickoff-form-time-input-label'>\n              #{date.beginning.toString '{dd}'}\n            </span>\n          </label>\"\n        datesHtml += '</td>'\n        datesHtml += '</tr>' if index % 7 is 6\n      @headerLabel.html monthLabel\n      @dates.html datesHtml\n      @_renderedMonth = time\n\n  renderPrevMonth: -> @renderMonth @_renderedMonth.prevMonth()\n\n  renderNextMonth: -> @renderMonth @_renderedMonth.nextMonth()\n\n  toggleInputReadonly: ->\n    {prop, topLevelProp} = @fieldConfig\n    model = @model()\n    propIsReadonly = model.readonly(topLevelProp) or model.readonly(prop)\n    @setInputValue() if propIsReadonly\n    val = if propIsReadonly then '' else null\n    @simulatedInput.toggleClass 'is-readonly', propIsReadonly\n    @input.attr 'disabled', val\n    @date.attr 'readonly', val\n\n  setInputValue: -> @renderMonth @getModelValue()\n\n  getInputValue: -> @input.filter(':checked').val()\n\n  setInputValueWhenNoError: ->\n    @setSimulatedInputValue()\n    return if @model().error @fieldConfig.prop\n    @setInputValue()\n\n  setSimulatedInputValue: ->\n    return unless (checkedInput = @input.filter ':checked').length\n    @simulatedInput.val checkedInput.data('label')\n\n  toggleDropdownHandler: (event) ->\n    {prop, topLevelProp} = @fieldConfig\n    return if @model().readonly(topLevelProp) or @model().readonly(prop)\n    if event.type is 'focusin'\n      @showDropdown()\n    else if event.type is 'change'\n      @hideDropdown()\n\n  toggleDropdownBySimulatedInputHandler: (event) ->\n    {prop, topLevelProp} = @fieldConfig\n    return if @model().readonly(topLevelProp) or @model().readonly(prop)\n    if event.type is 'focusin'\n      isHidden = @dropdown.hasClass 'is-hidden'\n      @showDropdown()\n      @_handledByFocusin = isHidden\n    else if event.type is 'click'\n      @toggleDropdown() unless @_handledByFocusin\n      delete @_handledByFocusin\n\n.help\n\n  create: -> @creator()\n\n  destroy: -> @destroyer()\n\n  listen: ->\n    @listener().concat([\n      ['click', '.kickoff-button-form-time-ctrl-next-month', @renderNextMonth]\n      ['click', '.kickoff-button-form-time-ctrl-prev-month', @renderPrevMonth]\n      ['change', '.kickoff-form-time-input', @setInputValueWhenNoError]\n      ['focusin change', '.kickoff-form-time-input', @toggleDropdownHandler]\n      [\n        'focusin click',\n        '.kickoff-form-time-selected-label',\n        @toggleDropdownBySimulatedInputHandler\n      ]\n      [\n        'focusin click', (e) ->\n          focusedTime = null\n          e.eventPath().some (element) ->\n            if luda(element).is '.kickoff-form-time'\n              focusedTime = element\n              return true\n          targets = luda('.kickoff-form-time').not(focusedTime)\n          luda.kickoffFormTime(targets).hideDropdown()\n      ]\n    ])\n\n  watch: ->\n    node: [\n      ['.kickoff-form-time-input', @setSimulatedInputValue]\n    ]\n\n  find: ->\n    Object.assign @finder(), {\n      simulatedInput: '.kickoff-form-time-selected-label'\n      dropdown: '.kickoff-form-time-dropdown'\n      date: '.kickoff-form-time-date'\n      headerLabel: '.kickoff-form-time-header-label'\n      dates: '.kickoff-form-time-month-dates'\n    }\n","import {\n  Task\n  root\n  isRoot\n  splitWbs\n  parent\n  find\n  mustExist\n  prevWbs\n  nextWbs\n} from './task.coffee'\nimport {asc, desc} from './order.coffee'\n\n\n\nchildren = (task, ruleFn) ->\n  mustExist task\n  if isRoot task\n    return task.tasks.filter (t) -> splitWbs(t.data.wbs).length is 1\n  taskWbs = splitWbs task.data.wbs\n  root(task).tasks.filter (t) ->\n    tWbs = splitWbs t.data.wbs\n    return false unless tWbs.length is taskWbs.length + 1\n    isChd = not taskWbs.some (n, i) -> n isnt tWbs[i]\n    if ruleFn then isChd and ruleFn t else isChd\n\nfirstChild = (task) ->\n  mustExist task\n  return null unless (chd = children task).length\n  (asc chd...)[0]\n\nlastChild = (task) ->\n  mustExist task\n  return null unless (chd = children task).length\n  (desc chd...)[0]\n\nprevSiblings = (task, ruleFn) ->\n  mustExist task\n  return [] if isRoot task\n  chd = asc children(parent(task, true), ruleFn)...\n  chd.slice(0, chd.indexOf(task))\n\nprevSibling = (task) ->\n  mustExist task\n  return null if isRoot task\n  siblingWbs = prevWbs task.data.wbs\n  return null unless siblingWbs\n  find root(task), siblingWbs\n\nnextSiblings = (task, ruleFn) ->\n  mustExist task\n  return [] if isRoot task\n  chd = asc children(parent(task, true), ruleFn)...\n  chd.slice(chd.indexOf(task) + 1)\n\nnextSibling = (task) ->\n  mustExist task\n  return null if isRoot task\n  siblingWbs = nextWbs task.data.wbs\n  return null unless siblingWbs\n  find root(task), siblingWbs\n\ndescendants = (task, ruleFn) ->\n  mustExist task\n  return task.tasks if isRoot task\n  taskWbs = splitWbs task.data.wbs\n  root(task).tasks.filter (t) ->\n    tWbs = splitWbs t.data.wbs\n    return false unless tWbs.length > taskWbs.length\n    isDescendant = not taskWbs.some (n, i) -> n isnt tWbs[i]\n    if ruleFn then isDescendant and ruleFn t else isDescendant\n\nancestors = (task, ruleFn, includeRoot = false) ->\n  mustExist task\n  return [] if isRoot task\n  taskWbs = splitWbs task.data.wbs\n  collected = root(task).tasks.filter (t) ->\n    tWbs = splitWbs t.data.wbs\n    return false unless tWbs.length < taskWbs.length\n    isAncestor = not tWbs.some (n, i) -> n isnt taskWbs[i]\n    if ruleFn then isAncestor and ruleFn t else isAncestor\n  collected.unshift root task if includeRoot\n  collected\n\nwhere = (task, conOrRule) ->\n  mustExist task\n  if typeof conOrRule is 'function'\n    descendants(task).filter (t) -> conOrRule t\n  else if typeof conOrRule is 'object'\n    descendants(task).filter (t) ->\n      for key, val of conditions\n        return false if t.data[key] isnt val\n      true\n  else\n    []\n\nTask.prototype.root = -> root this\n\nTask.prototype.children = (ruleFn) -> children this, ruleFn\n\nTask.prototype.firstChild = -> firstChild this\n\nTask.prototype.lastChild = -> lastChild this\n\nTask.prototype.nextSiblings = (ruleFn) -> nextSiblings this, ruleFn\n\nTask.prototype.nextSibling = Task.prototype.next = -> nextSibling this\n\nTask.prototype.prevSiblings = (ruleFn) -> prevSiblings this, ruleFn\n\nTask.prototype.prevSibling = Task.prototype.prev = -> prevSibling this\n\nTask.prototype.descendants = Task.prototype.tasks = (ruleFn) ->\n  descendants this, ruleFn\n\nTask.prototype.ancestors = (ruleFn, includeRoot = false) ->\n  ancestors this, ruleFn, includeRoot\n\nTask.prototype.parent = (includeRoot = false) -> parent this, includeRoot\n\nTask.prototype.find = (uidOrWbs) -> find root(this), uidOrWbs\n\nTask.prototype.where = (conOrRule) -> where this, conOrRule\n\n\n\nexport {\n  children\n  firstChild\n  lastChild\n  nextSiblings\n  prevSiblings\n  descendants\n  ancestors\n  parent\n  find\n  where\n}\n","import {\n  Task\n  mustExist\n  mustBeTask\n} from './task.coffee'\n\n\n\nisTask = (task) ->\n  mustBeTask task\n  task.data.type isnt 'milestone'\n\nisMilestone = (task) ->\n  mustBeTask task\n  task.data.type is 'milestone'\n\ntype = (task) ->\n  mustExist task\n  if isTask(task) then 'task' else 'milestone'\n\nTask.prototype.type = -> type this\n\nTask.prototype.isTask = -> isTask this\n\nTask.prototype.isMilestone = -> isMilestone this\n\n\n\nexport {\n  type\n  type as default\n  isTask\n  isMilestone\n}\n","class CustomEvent\n\n  constructor: (target, event, detail = null, original = {}) ->\n    {type} = parseEvent event\n    @type = type\n    @target = target\n    @originalTarget = original.target or target\n    @original = Object.assign {target: @originalTarget}, original\n    @detail = detail\n    @_stopped = false\n    @_immediateStopped = false\n    @_prevented = false\n\n  stopImmediatePropagation: -> @_immediateStopped = true\n\n  stopPropagation: -> @_stopped = true\n\n  preventDefault: -> @_prevented = true\n\n  isImmediatePropagationStopped: -> @_immediateStopped is true\n\n  isPropagationStopped: -> @_stopped is true\n\n  isDefaultPrevented: -> @_prevented is true\n\n\nmustBeValidCallback = (callback) ->\n  unless luda.isFunction callback\n    throw new Error \"Invalid callback: #{callback}\"\n\nparseEvent = (event = '') ->\n  unless luda.isString(event) and event.trim().length\n    throw new Error \"Invalid event #{event}\"\n  splited = event.split '.'\n  {type: splited[0], namespace: splited.slice 1}\n\nnsMatches = (ns, definedNs) -> ns.every (n) -> definedNs.includes n\n\n\n\nexport {\n  CustomEvent\n  mustBeValidCallback\n  parseEvent\n  nsMatches\n}\n","import {Task, root, mustExist, mustBeTask, depcTypes} from './task.coffee'\nimport {desc} from './order.coffee'\nimport {ancestors} from './query.coffee'\nimport {\n  CustomEvent\n  mustBeValidCallback\n  nsMatches\n  parseEvent\n} from '../../utilities/event.coffee'\n\n\n\nclass TaskEvent extends CustomEvent\n\n\n\neventCache = (task, type) ->\n  cache = root(task).events\n  cache[type] ||= []\n\naddEvent = (task, event, callback, _one = false) ->\n  {type, namespace} = parseEvent event\n  mustBeValidCallback callback\n  mustExist task\n  eventCache(task, type).push {task, namespace, callback, _one}\n\naddEventOnce = (task, event, callback) -> addEvent task, event, callback, true\n\nremoveEvent = (task, event, callback) ->\n  {type, namespace} = parseEvent event if event\n  mustBeValidCallback callback if callback\n  mustExist task\n  eventCache task, type\n  types = if type then [type] else Object.keys root(task).events\n  for type in types\n    root(task).events[type] = eventCache(task, type).filter (q) ->\n      return true if task.uid isnt q.task.uid\n      return true if callback and callback isnt q.callback\n      return true if namespace and namespace.length and \\\n      not nsMatches namespace, q.namespace\n\ntriggerEvent = (task, event, detail, original) ->\n  mustExist task\n  {type, namespace} = parseEvent event\n  shouldTrigger = task.created or type is 'before-create'\n  return unless shouldTrigger\n  taskEvent = new TaskEvent task, event, detail, original\n  eventQuene = eventCache task, type\n  eventPath = desc ancestors(task, null, true).concat(task)...\n  eventPath.some (t) ->\n    eventQuene.some (q) ->\n      return unless t.uid is q.task.uid\n      return unless nsMatches namespace, q.namespace\n      taskEvent.currentTarget = t\n      if q.callback.call(t, taskEvent, taskEvent.detail) is false\n        taskEvent.stopPropagation()\n        taskEvent.preventDefault()\n      removeEvent task, event, q.callback if q._one\n      taskEvent.isImmediatePropagationStopped()\n    taskEvent.isPropagationStopped()\n  not taskEvent.isDefaultPrevented()\n\nTask.prototype.on = (event, callback) ->\n  addEvent this, event, callback\n  this\n\nTask.prototype.one = (event, callback) ->\n  addEventOnce this, event, callback\n  this\n\nTask.prototype.off = (event, callback) ->\n  removeEvent this, event, callback\n  this\n\nTask.prototype.trigger = (event, detail, _needResult) ->\n  isTriggered = triggerEvent(this, event, detail) isnt false\n  return isTriggered if _needResult\n  this\n\n\n\nexport {\n  addEvent\n  addEventOnce\n  removeEvent\n  triggerEvent\n}\n","import {\n  Task\n  root\n  isRoot\n  splitDeps\n  joinDeps\n  find\n  mustExist\n  depcTypes as types\n  depcTypeShortcuts as typeShortcuts\n} from './task.coffee'\nimport {\n  ancestors\n  descendants\n} from './query.coffee'\nimport {triggerEvent} from './event.coffee'\n\n\n\ntypeMustBeValid = (type) ->\n  type = types[typeShortcuts.indexOf type] unless types.includes type\n  throw new Error \"Invalid type: #{type}\" unless types.includes type\n  type\n\ndepWbses = (task, type = '') ->\n  depsObj = task.data.dependencies\n  unless type\n    wbses = []\n    types.forEach (t) ->\n      wbses = wbses.concat splitDeps(depsObj[t])\n    return wbses\n    # return types.map((t) -> splitDeps depsObj[t]).flat() unless type\n  type = typeMustBeValid type\n  splitDeps depsObj[type]\n\nparseDeps = (task, deps...) ->\n  depTasks = []\n  deps.forEach (d) ->\n    d = find root(task), d unless d instanceof Task\n    depTasks.push d if d and d.rootId is task.rootId\n  depTasks\n\ncompareNewAndOld = (task, type = '', newVals = []) ->\n  type = typeMustBeValid type\n  oldVals = depWbses task, type\n  oldVal = joinDeps oldVals\n  newVals = splitDeps newVals if typeof newVals is 'string'\n  newVal = joinDeps newVals\n  {newVal, oldVal, oldVals, newVals, isEqual: newVal is oldVal}\n\ncollectDepdWbsData = (task, filter) ->\n  mustExist task\n  val = {}\n  for type in types\n    val[type] = joinDeps task.depd(type, filter).map((t) -> t.data.wbs)\n  val\n\ntriggerDepsEvent = (task, event, type, detail, _original) ->\n  type = typeMustBeValid type\n  # trigger dependencies event of current task\n  typeDetail = {}\n  typeDetail[type] = detail\n  isPrevented = triggerEvent(task, event, typeDetail, _original) is false\n  return false if isPrevented and event is 'before-update'\n  # trigger predecessor event of current task\n  depsDetail = {predecessors: {}}\n  [newVal, oldVal] = [{}, {}]\n  for key, val of task.data.dependencies\n    if key is type\n      newVal[key] = detail.newVal\n      oldVal[key] = detail.oldVal\n    else\n      newVal[key] = oldVal[key] = val\n  depsDetail.predecessors.newVal = newVal\n  depsDetail.predecessors.oldVal = oldVal\n  isDepsEventPrevented = triggerEvent(\n    task, event, depsDetail, _original\n  ) is false\n  isPrevented ||= isDepsEventPrevented\n  return false if isPrevented and event is 'before-update'\n  # trigger successors events of current task's predecessors\n  depdDetail = {successors: {}}\n  oldDeps = splitDeps(oldVal[type]).map (wbs) -> find root(task), wbs\n  newDeps = splitDeps(newVal[type]).map (wbs) -> find root(task), wbs\n  isDepdEventPrevented = luda.unique(oldDeps.concat newDeps).some (t) ->\n    return unless t\n    existInOld = oldDeps.includes t\n    existInNew = newDeps.includes t\n    existInNew = false unless task.created\n    return if existInNew and existInOld\n    if event is 'before-update'\n      oldVal = collectDepdWbsData t\n      newVal = JSON.parse JSON.stringify(oldVal)\n      depdWbsArr = splitDeps oldVal[type]\n      if existInNew\n        depdWbsArr.push task.data.wbs\n      else\n        depdWbsArr.splice depdWbsArr.indexOf(task.data.wbs), 1\n      newVal[type] = joinDeps depdWbsArr\n    else\n      newVal = collectDepdWbsData t\n      oldVal = JSON.parse JSON.stringify(newVal)\n      depdWbsArr = splitDeps newVal[type]\n      if existInNew\n        depdWbsArr.splice depdWbsArr.indexOf(task.data.wbs), 1\n      else\n        depdWbsArr.push task.data.wbs\n      oldVal[type] = joinDeps depdWbsArr\n      t.depended = newVal # hack\n    depdDetail.successors.newVal = newVal\n    depdDetail.successors.oldVal = oldVal\n    triggerEvent(t, event, depdDetail, _original) is false\n  isPrevented ||= isDepdEventPrevented\n  return false if isPrevented and event is 'before-update'\n  not isPrevented\n\nbeforeUpdateDeps = (task, type, newVals = [], _returnSchedul, _original = {}) ->\n  original = Object.assign(\n    {target: task, prop: \"predecessors.#{type}\"}, _original\n  )\n  [triggered, schedules] = [true, []]\n  result = ->\n    if _returnSchedul then {triggered, schedules} else triggered\n  {newVal, oldVal, oldVals, isEqual} = compareNewAndOld task, type, newVals\n  return result() if isEqual\n  triggered = triggerDepsEvent(\n    task, 'before-update', type, {newVal, oldVal}, original\n  )\n  return result() unless triggered\n  return result() unless newVals.some (v) -> not oldVals.includes v\n  task.data.dependencies[type] = newVal\n  [newB, newE] = [task.data.beginning, task.data.end]\n  {triggered, resources} = task._beforeUpdateSchedule(\n    {beginning: newB, end: newE}, 'flex', _returnSchedul, original\n  )\n  schedules = resources\n  task.data.dependencies[type] = oldVal\n  result()\n\ntouchDeps = (task, type, newVals = [], _schedules = [], _original = {}) ->\n  original = Object.assign(\n    {target: task, prop: \"predecessors.#{type}\"}, _original\n  )\n  {newVal, oldVal, isEqual} = compareNewAndOld task, type, newVals\n  unless isEqual\n    task.data.dependencies[type] = newVal\n    [newBegin, newEnd] = [task.data.beginning, task.data.end]\n    task._touchSchedule(\n      {beginning: newBegin, end: newEnd}, 'flex', _schedules, original\n    )\n  triggerDepsEvent task, 'after-touch', type, {newVal, oldVal}, original\n  return if isEqual\n  triggerDepsEvent task, 'after-update', type, {newVal, oldVal}, original\n\ntryUpdateDeps = (task, type, newVals = [], _original) ->\n  {triggered, schedules} = beforeUpdateDeps(\n    task, type, newVals, true, _original\n  )\n  newVals = depWbses(task, type) unless triggered\n  touchDeps task, type, newVals, schedules, _original\n  triggered\n\ndeps = (task, type = '', ruleFn, deep = false) ->\n  mustExist task\n  return [] if isRoot task\n  wbses = depWbses task, type\n  collected = root(task).tasks.filter (t) ->\n    matched = wbses.includes t.data.wbs\n    if ruleFn then matched and ruleFn t else matched\n  return collected unless deep\n  index = 0\n  while index < collected.length\n    collected = collected.concat deps(collected[index], type, ruleFn)\n    index += 1\n  luda.unique collected\n\nf2sDeps = (task, ruleFn, deep) -> deps task, 'finishToStart', ruleFn, deep\n\ns2sDeps = (task, ruleFn, deep) -> deps task, 'startToStart', ruleFn, deep\n\nf2fDeps = (task, ruleFn, deep) -> deps task, 'finishToFinish', ruleFn, deep\n\ns2fDeps = (task, ruleFn, deep) -> deps task, 'startToFinish', ruleFn, deep\n\nisValidDepc = (depc, task) ->\n  depc = parseDeps(task, depc)[0]\n  return false unless depc\n  return false if task is depc\n  return false if ancestors(task).includes depc\n  return false if descendants(task).includes depc\n  return true unless task.created\n  return false if deps(task).includes depc\n  return false if task.depd(null, null, true).includes depc\n  # return false if depd(task, null, null, true).includes depc\n  true\n\naddDeps = (task, type, depTasks = [], _original) ->\n  mustExist task\n  return if isRoot task\n  addedWbs = []\n  parseDeps(task, depTasks...).forEach (depc) ->\n    addedWbs.push depc.data.wbs if isValidDepc depc, task\n  return unless addedWbs.length\n  tryUpdateDeps task, type, depWbses(task, type).concat(addedWbs), _original\n\naddF2SDeps = (task, deps...) -> addDeps task, 'finishToStart', deps\n\naddS2SDeps = (task, deps...) -> addDeps task, 'startToStart', deps\n\naddF2FDeps = (task, deps...) -> addDeps task, 'finishToFinish', deps\n\naddS2FDeps = (task, deps...) -> addDeps task, 'startToFinish', deps\n\nremoveDeps = (task, deps = [], _original) ->\n  mustExist task\n  return if isRoot task\n  unless deps.length\n    for key, val of task.data.dependencies\n      tryUpdateDeps task, key, [], _original\n    return\n  depTasks = parseDeps task, deps...\n  types.forEach (t) ->\n    arr = depWbses task, t\n    depTasks.forEach (d) ->\n      arr.splice index, 1 if (index = arr.indexOf d.data.wbs) >= 0\n    tryUpdateDeps task, t, arr, _original\n\ndepcType = (task, depc) ->\n  mustExist task\n  return unless depc\n  depc = parseDeps(task, depc)[0]\n  type = ''\n  types.some (t) ->\n    wbses = depWbses task, t\n    return false unless wbses.includes depc.data.wbs\n    type = t\n  shortcut = typeShortcuts[types.indexOf type] or ''\n  return {type, shortcut}\n\nTask.prototype.predecessors = Task.prototype.deps = (type, ruleFn, deep) ->\n  deps this, type, ruleFn, deep\n\nTask.prototype.f2sPredecessors = Task.prototype.f2sDeps = (ruleFn, deep) ->\n  f2sDeps this, ruleFn, deep\n\nTask.prototype.s2sPredecessors = Task.prototype.s2sDeps = (ruleFn, deep) ->\n  s2sDeps this, ruleFn, deep\n\nTask.prototype.f2fPredecessors = Task.prototype.f2fDeps = (ruleFn, deep) ->\n  f2fDeps this, ruleFn, deep\n\nTask.prototype.s2fPredecessors = Task.prototype.s2fDeps = (ruleFn, deep) ->\n  s2fDeps this, ruleFn, deep\n\nTask.prototype.isValidPredecessorOf = Task.prototype.isValidDepcOf = (depd) ->\n  return false unless depd = parseDeps(this, depd)[0]\n  isValidDepc this, depd\n\nTask.prototype._addDeps = (type, deps...) ->\n  addDeps this, type, deps\n  this\n\nTask.prototype.addPredecessors = Task.prototype.addDeps = (type, deps...) ->\n  @_pushUndoState => addDeps this, type, deps\n  this\n\nTask.prototype.addF2SPredecessors = Task.prototype.addF2SDeps = (deps...) ->\n  @_pushUndoState => addF2SDeps this, deps...\n  this\n\nTask.prototype.addS2SPredecessors = Task.prototype.addS2SDeps = (deps...) ->\n  @_pushUndoState => addS2SDeps this, deps...\n  this\n\nTask.prototype.addF2FPredecessors = Task.prototype.addF2FDeps = (deps...) ->\n  @_pushUndoState => addF2FDeps this, deps...\n  this\n\nTask.prototype.addS2FPredecessors = Task.prototype.addS2FDeps = (deps...) ->\n  @_pushUndoState => addS2FDeps this, deps...\n  this\n\nTask.prototype.removePredecessors = Task.prototype.removeDeps = (deps...) ->\n  @_pushUndoState => removeDeps this, deps\n  this\n\nTask.prototype.predecessorType = Task.prototype.depcType = (depc) ->\n  depcType this, depc\n\n\n\nexport {\n  depWbses\n  deps\n  f2sDeps\n  s2sDeps\n  f2fDeps\n  s2fDeps\n  isValidDepc\n  addDeps\n  removeDeps\n  beforeUpdateDeps\n  touchDeps\n  tryUpdateDeps\n  depcType\n  types\n  typeMustBeValid\n  parseDeps\n}\n","import {\n  Task\n  mustExist\n  isRoot\n  root\n  splitDeps\n  joinDeps\n  depcTypes\n} from './task.coffee'\nimport {\n  depWbses\n  addDeps\n  removeDeps\n  depcType\n  isValidDepc\n  typeMustBeValid\n  parseDeps\n  beforeUpdateDeps\n  touchDeps\n} from './predecessor.coffee'\nimport {\n  triggerEvent\n} from './event.coffee'\n\n\n\ndepd = (task, type = '', ruleFn, deep = false) ->\n  mustExist task\n  return [] if isRoot task\n  collected = root(task).tasks.filter (t) ->\n    matched = depWbses(t, type).includes task.data.wbs\n    if ruleFn then matched and ruleFn t else matched\n  return collected unless deep\n  index = 0\n  while index < collected.length\n    collected = collected.concat depd(collected[index], type, ruleFn)\n    index += 1\n  luda.unique collected\n\nf2sDepd = (task, ruleFn, deep) -> depd task, 'finishToStart', ruleFn, deep\n\ns2sDepd = (task, ruleFn, deep) -> depd task, 'startToStart', ruleFn, deep\n\nf2fDepd = (task, ruleFn, deep) -> depd task, 'finishToFinish', ruleFn, deep\n\ns2fDepd = (task, ruleFn, deep) -> depd task, 'startToFinish', ruleFn, deep\n\nisValidDepd = (depd, task) -> isValidDepc task, depd\n\naddDepd = (task, type, depds = [], _original = {}) ->\n  # original = Object.assign(\n  #   {target: task, prop: \"successors.#{type}\"}, _original\n  # )\n  # parseDeps(task, depds...).forEach (d) -> addDeps d, type, [task], original\n  original = Object.assign {target: task, prop: \"successors.#{type}\"}, _original\n  depc = task\n  mustExist depc\n  return if isRoot depc\n  resources = []\n  tasks = parseDeps depc, depds...\n  isPrevented = tasks.some (task) ->\n    return unless isValidDepc depc, task\n    oldVals = depWbses task, type\n    newVals = oldVals.concat depc.data.wbs\n    {triggered, schedules} = beforeUpdateDeps(\n      task, type, newVals, true, original\n    )\n    resources.push {task, type, newVals, schedules}\n    not triggered\n  if isPrevented\n    resources = []\n    tasks.forEach (task) ->\n      return unless isValidDepc depc, task\n      resources.push {task, type, newVals: depWbses(task, type), schedules: []}\n  resources.forEach (r) ->\n    {task, type, newVals, schedules} = r\n    touchDeps task, type, newVals, schedules, original\n\naddF2SDepd = (task, depd...) -> addDepd task, 'finishToStart', depd\n\naddS2SDepd = (task, depd...) -> addDepd task, 'startToStart', depd\n\naddF2FDepd = (task, depd...) -> addDepd task, 'finishToFinish', depd\n\naddS2FDepd = (task, depd...) -> addDepd task, 'startToFinish', depd\n\nremoveDepd = (task, depds = [], _original = {}) ->\n  # if depds.length\n  #   depds = parseDeps task, depds...\n  # else\n  #   depds = depd task\n  # depds.forEach (d) ->\n  #   original = Object.assign(\n  #     {target: task, prop: \"successors.#{depdType task, d}\"}, _original\n  #   )\n  #   removeDeps d, [task], original\n  depc = task\n  mustExist depc\n  return if isRoot depc\n  if depds.length\n    tasks = parseDeps depc, depds...\n  else\n    tasks = depd depc\n  resources = []\n  isPrevented = tasks.some (task) ->\n    return unless type = depdType(depc, task).type\n    newVals = depWbses task, type\n    newVals.splice index, 1 if (index = newVals.indexOf depc.data.wbs) >= 0\n    original = Object.assign(\n      {target: depc, prop: \"successors.#{type}\"}, _original\n    )\n    {triggered, schedules} = beforeUpdateDeps(\n      task, type, newVals, true, original\n    )\n    resources.push {task, type, newVals, schedules, original}\n    not triggered\n  if isPrevented\n    resources = []\n    tasks.forEach (task) ->\n      return unless type = depdType(depc, task).type\n      newVals = depWbses task, type\n      original = Object.assign(\n        {target: depc, prop: \"successors.#{type}\"}, _original\n      )\n      resources.push {task, type, newVals, schedules: [], original}\n  resources.forEach (r) ->\n    {task, type, newVals, schedules, original} = r\n    touchDeps task, type, newVals, schedules, original\n\ndepdType = (task, depd) -> depcType depd, task\n\nTask.prototype.successors = Task.prototype.depd = (type, ruleFn, deep) ->\n  depd this, type, ruleFn, deep\n\nTask.prototype.f2sSuccessors = Task.prototype.f2sDepd = (ruleFn, deep) ->\n  f2sDepd this, ruleFn, deep\n\nTask.prototype.s2sSuccessors = Task.prototype.s2sDepd = (ruleFn, deep) ->\n  s2sDepd this, ruleFn, deep\n\nTask.prototype.f2fSuccessors = Task.prototype.f2fDepd = (ruleFn, deep) ->\n  f2fDepd this, ruleFn, deep\n\nTask.prototype.s2fSuccessors = Task.prototype.s2fDepd = (ruleFn, deep) ->\n  s2fDepd this, ruleFn, deep\n\nTask.prototype.isValidSuccessorOf = Task.prototype.isValidDepdOf = (depc) ->\n  isValidDepd this, depc\n\nTask.prototype.addSuccessors = Task.prototype.addDepd = (type, depd...) ->\n  @_pushUndoState => addDepd this, type, depd\n  this\n\nTask.prototype.addF2SSuccessors = Task.prototype.addF2SDepd = (depd...) ->\n  @_pushUndoState => addF2SDepd this, depd...\n  this\n\nTask.prototype.addS2SSuccessors = Task.prototype.addS2SDepd = (depd...) ->\n  @_pushUndoState => addS2SDepd this, depd...\n  this\n\nTask.prototype.addF2FSuccessors = Task.prototype.addF2FDepd = (depd...) ->\n  @_pushUndoState => addF2FDepd this, depd...\n  this\n\nTask.prototype.addS2FSuccessors = Task.prototype.addS2FDepd = (depd...) ->\n  @_pushUndoState => addS2FDepd this, depd...\n  this\n\nTask.prototype.removeSuccessors = Task.prototype.removeDepd = (depd...) ->\n  @_pushUndoState => removeDepd this, depd\n  this\n\nTask.prototype.successorType = Task.prototype.depdType = (depd) ->\n  depdType this, depd\n\n\n\nexport {\n  depd\n  f2sDepd\n  s2sDepd\n  f2fDepd\n  s2fDepd\n  isValidDepd\n  addDepd\n  removeDepd\n  depdType\n}\n","import {Time} from '../../models/time/index.coffee'\nimport {\n  Task\n  mustExist\n  root\n  isRoot\n  joinDeps\n} from './task.coffee'\nimport {\n  isMilestone\n  isTask\n} from './type.coffee'\nimport {\n  children\n  ancestors\n  descendants\n} from './query.coffee'\nimport {\n  s2fDeps\n  s2sDeps\n  f2fDeps\n  f2sDeps\n} from './predecessor.coffee'\nimport {\n  s2fDepd\n  s2sDepd\n  f2fDepd\n  f2sDepd\n} from './successor.coffee'\nimport {desc} from './order.coffee'\nimport {triggerEvent} from './event.coffee'\n\n\n\nearlistTaskEnd = (task, newBegin) ->\n  return new Time newBegin if isMilestone task\n  minDuration = root(task).data.minDurationSeconds\n  new Time(newBegin).nextSecond minDuration\n\ncheckEarlistTaskEnd = (task, newBegin) ->\n  current = new Time task.data.end\n  earlist = earlistTaskEnd task, newBegin\n  ok = not current.earlierThan earlist\n  {ok, current, earlist}\n\ntaskEndByBeginDiff = (task, newBegin) ->\n  diff = new Time(task.data.beginning).to(newBegin).seconds\n  new Time(task.data.end).calcSeconds diff\n\ntaskBeginByEndDiff = (task, newEnd) ->\n  diff = new Time(task.data.end).to(newEnd).seconds\n  new Time(task.data.beginning).calcSeconds diff\n\nhasNoTaskChildren = (task) ->\n  return true if (taskChildren = children task).length is 0\n  not taskChildren.some (chd) -> not isMilestone chd\n\ncreateS2SDepdEntries = (task, newBegin, filter, mode = 'travel') ->\n  entries = []\n  s2sDepd(task, filter).forEach (depd) ->\n    currentBegin = new Time depd.data.beginning\n    return unless currentBegin.earlierThan newBegin\n    entry = {mode, task: depd, newBegin}\n    if mode is 'travel' or isMilestone depd\n      entry.newEnd = taskEndByBeginDiff depd, entry.newBegin\n    else\n      {ok, earlist} = checkEarlistTaskEnd depd, entry.newBegin\n      entry.newEnd = earlist unless ok\n    entries.push entry\n  entries\n\ncreateS2FDepdEntries = (task, newBegin, filter, mode = 'travel') ->\n  entries = []\n  s2fDepd(task, filter).forEach (depd) ->\n    currentEnd = new Time depd.data.end\n    return unless currentEnd.earlierThan newBegin\n    entry = {mode, task: depd, newEnd: newBegin}\n    if mode is 'travel' or isMilestone depd\n      entry.newBegin = taskBeginByEndDiff depd, entry.newEnd\n    entries.push entry\n  entries\n\ncreateF2FDepdEntries = (task, newEnd, filter, mode = 'travel') ->\n  entries = []\n  f2fDepd(task, filter).forEach (depd) ->\n    currentEnd = new Time depd.data.end\n    return unless currentEnd.earlierThan newEnd\n    entry = {mode, task: depd, newEnd}\n    if mode is 'travel' or isMilestone depd\n      entry.newBegin = taskBeginByEndDiff depd, entry.newEnd\n    entries.push entry\n  entries\n\ncreateF2SDepdEntries = (task, newEnd, filter, mode = 'travel') ->\n  entries = []\n  f2sDepd(task, filter).forEach (depd) ->\n    currentBegin = new Time depd.data.beginning\n    return unless currentBegin.earlierThan newEnd\n    entry = {mode, task: depd, newBegin: newEnd}\n    if mode is 'travel' or isMilestone depd\n      entry.newEnd = taskEndByBeginDiff depd, entry.newBegin\n    else\n      {ok, earlist} = checkEarlistTaskEnd depd, entry.newBegin\n      entry.newEnd = earlist unless ok\n    entries.push entry\n  entries\n\ncollectTreeLeafForwardBeginResources = (task, newBegin) ->\n  [depdEntries, leafResources] = [[], []]\n  treeDownNodes = descendants task\n  belongsToTask = (t) -> treeDownNodes.includes t\n  notBelongsToTask = (t) -> not belongsToTask t\n  leafsWithEarlierBegin = treeDownNodes.filter (n) ->\n    new Time(n.data.beginning).earlierThan(newBegin) and hasNoTaskChildren(n)\n  leafsWithEarlierBegin.concat(task).forEach (leaf) ->\n    leafResource = {task: leaf, beginning: newBegin}\n    {ok, earlist} = checkEarlistTaskEnd leaf, newBegin\n    leafResource.end = earlist unless ok\n    leafResource.end = newBegin if isMilestone leaf\n    leafResources.push leafResource\n    depdEntries = depdEntries.concat(\n      createS2SDepdEntries(leaf, newBegin, belongsToTask, 'flex'),\n      createS2FDepdEntries(leaf, newBegin, belongsToTask, 'flex'),\n      createS2SDepdEntries(leaf, newBegin, notBelongsToTask),\n      createS2FDepdEntries(leaf, newBegin, notBelongsToTask)\n    )\n    depdEntries = depdEntries.concat(\n      createF2FDepdEntries(leaf, leafResource.end, belongsToTask, 'flex'),\n      createF2SDepdEntries(leaf, leafResource.end, belongsToTask, 'flex'),\n      createF2FDepdEntries(leaf, leafResource.end, notBelongsToTask),\n      createF2SDepdEntries(leaf, leafResource.end, notBelongsToTask)\n    ) if leafResource.end\n  {depdEntries, leafs: leafsWithEarlierBegin.concat(task), leafResources}\n\ncollectTreeLeafForwardEndResources = (task, newEnd) ->\n  [depdEntries, leafResources] = [[], []]\n  treeDownNodes = descendants task\n  belongsToTask = (t) -> treeDownNodes.includes t\n  notBelongsToTask = (t) -> not belongsToTask t\n  leafsWithSameEnd = treeDownNodes.filter (n) ->\n    new Time(n.data.end).equals(task.data.end) and hasNoTaskChildren(n)\n  leafsWithSameEnd.concat(task).forEach (leaf) ->\n    leafResource = {task: leaf, end: newEnd}\n    leafResource.beginning = newEnd if isMilestone leaf\n    leafResources.push leafResource\n    depdEntries = depdEntries.concat(\n      createS2SDepdEntries(leaf, leafResource.beginning, belongsToTask, 'flex'),\n      createS2FDepdEntries(leaf, leafResource.beginning, belongsToTask, 'flex'),\n      createS2SDepdEntries(leaf, leafResource.beginning, notBelongsToTask),\n      createS2FDepdEntries(leaf, leafResource.beginning, notBelongsToTask)\n    ) if leafResource.beginning\n    depdEntries = depdEntries.concat(\n      createF2FDepdEntries(leaf, newEnd, belongsToTask, 'flex'),\n      createF2SDepdEntries(leaf, newEnd, belongsToTask, 'flex'),\n      createF2FDepdEntries(leaf, newEnd, notBelongsToTask),\n      createF2SDepdEntries(leaf, newEnd, notBelongsToTask)\n    )\n  {depdEntries, leafs: leafsWithSameEnd.concat(task), leafResources}\n\ncheckEarlistTreeBegin = (task, newBegin, mode = 'flex') ->\n  [earlist, ok] = [null, true]\n  [f2sDepcEnds, s2sDepcBegins, f2fDepcEnds, s2fDepcBegins] = [[], [], [], []]\n  affectedTreeDownNodes = descendants task, (n) ->\n    new Time(n.data.beginning).equals task.data.beginning\n  affectedTreeUpNodes = ancestors(task).filter (n) ->\n    new Time(n.data.beginning).laterThan newBegin\n  notBelongsToTask = (t) -> not affectedTreeDownNodes.includes t\n  affectedTreeDownNodes.concat(task, affectedTreeUpNodes).forEach (n) ->\n    f2sDepcEnds.push d.data.end for d in f2sDeps n, notBelongsToTask\n    s2sDepcBegins.push d.data.beginning for d in s2sDeps n, notBelongsToTask\n    return unless isMilestone n\n    f2fDepcEnds.push d.data.end for d in f2fDeps n, notBelongsToTask\n    s2fDepcBegins.push d.data.beginning for d in s2fDeps n, notBelongsToTask\n  limitions = [].concat f2sDepcEnds, s2sDepcBegins, f2fDepcEnds, s2fDepcBegins\n  return {earlist, ok} unless limitions.length\n  earlist = Time.latest limitions...\n  ok = not earlist.laterThan newBegin\n  {earlist, ok}\n\ncheckEarlistTreeEnd = (task, newEnd, mode = 'flex') ->\n  [earlist, ok] = [null, true]\n  [f2fDepcEnds, s2fDepcBegins, earlistTaskEnds] = [[], [], []]\n  [f2sDepcEnds, s2sDepcBegins] = [[], []]\n  affectedTreeDownNodes = descendants task, (n) ->\n    new Time(n.data.end).laterThan newEnd\n  affectedTreeUpNodes = ancestors(task).filter (n) ->\n    childrenWithSameOrLaterEnd = children n, (c) ->\n      not new Time(c.data.end).earlierThan task.data.end\n    childrenWithSameOrLaterEnd.length is 1\n  notBelongsToTask = (t) -> not affectedTreeDownNodes.includes t\n  affectedTreeDownNodes.concat(task, affectedTreeUpNodes).forEach (n) ->\n    if mode is 'flex' and isTask n\n      earlistTaskEnds.push earlistTaskEnd(n, n.data.beginning)\n    s2fDepcBegins.push d.data.beginning for d in s2fDeps n, notBelongsToTask\n    f2fDepcEnds.push d.data.end for d in f2fDeps n, notBelongsToTask\n    return unless isMilestone n\n    s2sDepcBegins.push d.data.beginning for d in s2sDeps n, notBelongsToTask\n    f2sDepcEnds.push d.data.end for d in f2sDeps n, notBelongsToTask\n  limitions = [].concat(\n    f2fDepcEnds, s2fDepcBegins, earlistTaskEnds, f2sDepcEnds, s2sDepcBegins\n  )\n  return {earlist, ok} unless limitions.length\n  earlist = Time.latest limitions...\n  ok = not earlist.laterThan newEnd\n  {earlist, ok}\n\ncollectTreeLeafBackwardBeginResources = (task, newBegin) ->\n  leafResources = []\n  treeDownNodes = descendants task\n  leafsWithSameBegin = treeDownNodes.filter (n) ->\n    new Time(n.data.beginning).equals(task.data.beginning) \\\n    and hasNoTaskChildren(n)\n  leafsWithSameBegin.concat(task).forEach (leaf) ->\n    leafResource = {task: leaf, beginning: newBegin}\n    leafResource.end = newBegin if isMilestone leaf\n    leafResources.push leafResource\n  {leafs: leafsWithSameBegin.concat(task), leafResources}\n\ncollectTreeLeafBackwardEndResources = (task, newEnd) ->\n  leafResources = []\n  treeDownNodes = descendants task\n  leafsWithLaterEnd = treeDownNodes.filter (n) ->\n    new Time(n.data.end).laterThan(newEnd) and hasNoTaskChildren(n)\n  leafsWithLaterEnd.concat(task).forEach (leaf) ->\n    leafResource = {task: leaf, end: newEnd}\n    leafResource.beginning = newEnd if isMilestone leaf\n    leafResources.push leafResource\n  {leafs: leafsWithLaterEnd.concat(task), leafResources}\n\ncollectTreeDownTravelResources = (task, newBegin, newEnd) ->\n  [depdEntries, resources] = [[], []]\n  beginDiff = new Time(task.data.beginning).to(newBegin).seconds if newBegin\n  endDiff = new Time(task.data.end).to(newEnd).seconds if newEnd\n  diff = Math.max beginDiff, endDiff if beginDiff? and endDiff?\n  diff = beginDiff or endDiff unless diff?\n  treeDownNodes = descendants task\n  notBelongsToTask = (t) -> not treeDownNodes.includes t\n  treeDownNodes.concat(task).forEach (instance) ->\n    instanceOldBegin = new Time instance.data.beginning\n    instanceOldEnd = new Time instance.data.end\n    instanceNewBegin = instanceOldBegin.calcSeconds diff\n    instanceNewEnd = instanceOldEnd.calcSeconds diff\n    resources.push {\n      task: instance, beginning: instanceNewBegin, end: instanceNewEnd\n    }\n    depdEntries = depdEntries.concat(\n      createS2SDepdEntries(instance, instanceNewBegin, notBelongsToTask),\n      createS2FDepdEntries(instance, instanceNewBegin, notBelongsToTask)\n    ) if instanceNewBegin.laterThan instanceOldBegin\n    depdEntries = depdEntries.concat(\n      createF2FDepdEntries(instance, instanceNewEnd, notBelongsToTask),\n      createF2SDepdEntries(instance, instanceNewEnd, notBelongsToTask)\n    ) if instanceNewEnd.laterThan instanceOldEnd\n  {depdEntries, resources}\n\naddUniqueResource = (resources = [], newResources...) ->\n  newResources.forEach (resource) ->\n    [task, newB, newE] = [resource.task, resource.beginning, resource.end]\n    newDeps = resource.dependencies\n    if existed = resources.find (r) -> r.task is task\n      [oldB, oldE] = [existed.beginning, existed.end]\n      if newB\n        newB = new Time newB\n        existed.beginning = newB.toString() if not oldB or newB.laterThan oldB\n      if newE\n        newE = new Time newE\n        existed.end = newE.toString() if not oldE or newE.laterThan oldE\n      if newDeps\n        existed.dependencies = newDeps\n    else\n      newResource = {task}\n      newResource.beginning = new Time(newB).toString() if newB\n      newResource.end = new Time(newE).toString() if newE\n      newResource.dependencies = newDeps if newDeps\n      resources.push newResource\n\npropagateResources = (resources = [], targets = [], childFilter, mode) ->\n  depdEntries = []\n  targets.forEach (task) ->\n    desc(ancestors(task)...).some (ancestor) ->\n      return true unless (childTasks = children ancestor, childFilter).length\n      [childrenBegins, childrenEnds] = [[], []]\n      childTasks.forEach (child) ->\n        childResource = resources.find (p) -> p.task is child\n        childrenBegins.push childResource?.beginning or child.data.beginning\n        childrenEnds.push childResource?.end or child.data.end\n      correctBegin = Time.earlist childrenBegins...\n      correctEnd = Time.latest childrenEnds...\n      beginIsCorrect = correctBegin.equals ancestor.data.beginning\n      endIsCorrect = correctEnd.equals ancestor.data.end\n      if hasNoTaskChildren ancestor\n        beginIsCorrect ||= correctBegin.laterThan ancestor.data.beginning\n        endIsCorrect ||= correctEnd.earlierThan ancestor.data.end\n      return true if beginIsCorrect and endIsCorrect\n      ancestorResource = {task: ancestor}\n      ancestorResource.beginning = correctBegin unless beginIsCorrect\n      ancestorResource.end = correctEnd unless endIsCorrect\n      if mode is 'destroy' and not endIsCorrect\n        dependencies = JSON.parse JSON.stringify(ancestor.data.dependencies)\n        newS2FDeps = joinDeps s2fDeps(\n          ancestor, (d) -> not correctEnd.earlierThan d.data.beginning\n        ).map((d) -> d.data.wbs)\n        depsChanged = newS2FDeps isnt dependencies.startToFinish\n        dependencies.startToFinish = newS2FDeps\n        newF2FDeps = joinDeps f2fDeps(\n          ancestor, (d) -> not correctEnd.earlierThan d.data.end\n        ).map((d) -> d.data.wbs)\n        depsChanged ||= newF2FDeps isnt dependencies.finishToFinish\n        dependencies.finishToFinish = newF2FDeps\n        ancestorResource.dependencies = dependencies if depsChanged\n      addUniqueResource resources, ancestorResource\n      depdEntries = depdEntries.concat(\n        createS2SDepdEntries(ancestor, correctBegin),\n        createS2FDepdEntries(ancestor, correctBegin)\n      ) if correctBegin.laterThan ancestor.data.beginning\n      depdEntries = depdEntries.concat(\n        createF2FDepdEntries(ancestor, correctEnd),\n        createF2SDepdEntries(ancestor, correctEnd)\n      ) if correctEnd.laterThan ancestor.data.end\n      false\n  {depdEntries}\n\ndescResources = (resources = []) ->\n  return resources unless resources.length > 1\n  sortedResources = []\n  descTasks = desc resources.map((resource) -> resource.task)...\n  descTasks.forEach (task) ->\n    resource = resources.find (r) -> r.task is task\n    sortedResources.push resource\n  sortedResources\n\ncollectResources = (entryTask, newVals = {}, mode = 'flex') ->\n  uniqueResources = []\n  entries = [Object.assign({mode, task: entryTask}, newVals)]\n  {task, newBegin, newEnd} = entries[0]\n  if newBegin and mode isnt 'destroy'\n    {ok, earlist} = checkEarlistTreeBegin task, newBegin, mode\n    entries[0].newBegin = earlist unless ok\n  if newEnd and mode isnt 'destroy'\n    {ok, earlist} = checkEarlistTreeEnd task, newEnd, mode\n    entries[0].newEnd = earlist unless ok\n  while entry = entries.shift()\n    {mode, task, newBegin, newEnd} = entry\n    if mode is 'destroy'\n      fit = (child) -> child isnt task\n      {depdEntries} = propagateResources uniqueResources, [task], fit, 'destroy'\n      entries = entries.concat depdEntries if depdEntries?.length\n    else if mode is 'travel'\n      {\n        resources, depdEntries\n      } = collectTreeDownTravelResources task, newBegin, newEnd\n      addUniqueResource uniqueResources, resources...\n      entries = entries.concat depdEntries if depdEntries?.length\n      {depdEntries} = propagateResources uniqueResources, [task], null\n      entries = entries.concat depdEntries if depdEntries?.length\n    else\n      if newBegin\n        if new Time(newBegin).earlierThan task.data.beginning\n          collected = collectTreeLeafBackwardBeginResources task, newBegin\n        else\n          collected = collectTreeLeafForwardBeginResources task, newBegin\n        {leafs, leafResources, depdEntries} = collected\n        addUniqueResource uniqueResources, leafResources...\n        entries = entries.concat depdEntries if depdEntries?.length\n        {depdEntries} = propagateResources uniqueResources, leafs, null\n        entries = entries.concat depdEntries if depdEntries?.length\n      if newEnd\n        if new Time(newEnd).earlierThan task.data.end\n          collected = collectTreeLeafBackwardEndResources task, newEnd\n        else\n          collected = collectTreeLeafForwardEndResources task, newEnd\n        {leafs, leafResources, depdEntries} = collected\n        addUniqueResource uniqueResources, leafResources...\n        entries = entries.concat depdEntries if depdEntries?.length\n        {depdEntries} = propagateResources uniqueResources, leafs, null\n        entries = entries.concat depdEntries if depdEntries?.length\n  descResources uniqueResources\n\nmergeOriginal = (task, newVals = {}, _original = {}) ->\n  merged = []\n  merged.push 'beginning' if newVals and 'beginning' of newVals\n  merged.push 'end' if newVals and 'end' of newVals\n  prop = merged.join ','\n  Object.assign {target: task, prop}, _original\n\nbeforeUpdateSchedule = (task, newVals = {}, mode, _returnRes, _original = {}) ->\n  original = mergeOriginal task, newVals, _original\n  resources = collectResources(\n    task, {newBegin: newVals.beginning, newEnd: newVals.end}, mode\n  )\n  isPrevented = resources.some (resource) ->\n    {task, beginning, end, dependencies} = resource\n    detail = {}\n    if beginning and not new Time(beginning).equals task.data.beginning\n      detail.beginning = {newVal: beginning, oldVal: task.data.beginning}\n    if end and not new Time(end).equals task.data.end\n      detail.end = {newVal: end, oldVal: task.data.end}\n    if dependencies\n      detail.dependencies = detail.predecessors = dependencies\n    return unless Object.keys(detail).length\n    triggerEvent(task, 'before-update', detail, original) is false\n  return not isPrevented unless _returnRes\n  {resources, triggered: not isPrevented}\n\ntouchSchedule = (task, newVals = {}, mode, _resources, _original = {}) ->\n  original = mergeOriginal task, newVals, _original\n  resources = _resources or collectResources(\n    task, {newBegin: newVals.beginning, newEnd: newVals.end}, mode\n  )\n  resources.forEach (resource) ->\n    {task, beginning, end, dependencies} = resource\n    [touchDetail, updateDetail] = [{}, null]\n    if newVal = beginning\n      oldVal = task.data.beginning\n      touchDetail.beginning = {newVal, oldVal}\n      unless new Time(newVal).equals oldVal\n        task.data.beginning = newVal\n        updateDetail ||= {}\n        updateDetail.beginning = {newVal, oldVal}\n    if newVal = end\n      oldVal = task.data.end\n      touchDetail.end = {newVal, oldVal}\n      unless new Time(newVal).equals oldVal\n        task.data.end = newVal\n        updateDetail ||= {}\n        updateDetail.end = {newVal, oldVal}\n    if mode is 'destroy' and newVal = dependencies\n      oldVal = task.data.dependencies\n      touchDetail.dependencies = touchDetail.predecessors = {newVal, oldVal}\n      task.data.dependencies = newVal\n      updateDetail ||= newVal\n      updateDetail.dependencies = updateDetail.predecessors = {newVal, oldVal}\n    triggerEvent task, 'after-touch', touchDetail, original\n    return unless updateDetail\n    triggerEvent task, 'after-update', updateDetail, original\n\ntryUpdateSchedule = (task, newVals = {}, mode = 'flex') ->\n  {triggered, resources} = beforeUpdateSchedule task, newVals, mode, true\n  unless triggered\n    resources = resources.map (r) ->\n      resource = {task: r.task}\n      resource.beginning = r.task.data.beginning if r.beginning\n      resource.end = r.task.data.end if r.end\n      resource.dependencies = r.task.data.dependencies if dependencies\n  touchSchedule task, newVals, mode, resources\n  triggered\n\nTask.prototype._beforeUpdateSchedule = (newVals, mode, _returnRes, _original) ->\n  beforeUpdateSchedule this, newVals, mode, _returnRes, _original\n\nTask.prototype._touchSchedule = (newVals, mode, _resources, _original) ->\n  touchSchedule this, newVals, mode, _resources, _original\n\nTask.prototype._tryUpdateSchedule = (newVals, mode) ->\n  tryUpdateSchedule this, newVals, mode\n\n\n\nexport {\n  beforeUpdateSchedule\n  touchSchedule\n  tryUpdateSchedule\n  tryUpdateSchedule as default\n}\n","import {Time} from '../../models/time/index.coffee'\nimport {\n  Task\n  mustExist\n  isRoot\n} from './task.coffee'\nimport {children} from './query.coffee'\nimport {tryUpdateSchedule} from './schedule.coffee'\n\n\n\nbeginning = (task, val) ->\n  mustExist task\n  unless val\n    return new Time task.data.beginning unless isRoot task\n    beginnings = children(task).map (c) -> c.data.beginning\n    return Time.earlist beginnings...\n  return if isRoot task\n  tryUpdateSchedule task, {beginning: new Time val}, 'flex'\n\nTask.prototype.beginning = (val) ->\n  return beginning this, val unless val\n  @_pushUndoState => beginning this, val\n  this\n\n\n\nexport {\n  beginning\n  beginning as default\n}\n","import {\n  Task\n  mustExist\n  isRoot\n  rootTaskActions\n  invalidMilestoneActions\n} from './task.coffee'\nimport {triggerEvent} from './event.coffee'\nimport {isMilestone} from './type.coffee'\n\n\n\ncan = (task, action, auth) ->\n  mustExist task\n  operations = if isRoot task then task.data.actions else task.operations\n  isActionEnabled = operations.includes action\n  return isActionEnabled unless auth?\n  if auth\n    return if isActionEnabled\n    return if isMilestone(task) and invalidMilestoneActions.includes action\n    oldVal = operations.slice()\n    operations.push action\n    newVal = operations.slice()\n  else\n    return unless isActionEnabled\n    oldVal = operations.slice()\n    operations.splice operations.indexOf(action), 1\n    newVal = operations.slice()\n  return task unless oldVal and newVal\n  detail = {actions: {newVal, oldVal}}\n  # It's not necessary to implement the before-update event,\n  # because a tasks's actions cannot controlled by users.\n  triggerEvent task, 'after-touch', detail\n  triggerEvent task, 'after-update', detail\n  task\n\nactions = (task, acts...) ->\n  mustExist task\n  operations = if isRoot task then task.data.actions else task.operations\n  return operations.slice() unless acts.length\n  for act in operations.concat(acts)\n    can task, act, acts.includes(act)\n  task\n\ncanBePicked = (task, auth) -> can task, 'pick', auth\n\ncanBeFolded = (task, auth) -> can task, 'fold', auth\n\ncanCreateTask = (task, auth) -> can task, 'createTask', auth\n\ncanCreateMilestone = (task, auth) -> can task, 'createMilestone', auth\n\ncanBeUpdated = (task, auth) -> can task, 'update', auth\n\ncanBeDestroied = (task, auth) -> can task, 'destroy', auth\n\ncanDestroyDescendants = (task, auth) -> can task, 'destroyDescendants', auth\n\ncanSwitchState = (task, auth) -> can task, 'switchState', auth\n\nTask.prototype.can = (action, auth) ->\n  result = can this, action, auth\n  return result if typeof result is 'boolean'\n  this\n\nTask.prototype.actions = (acts...) ->\n  result = actions this, acts...\n  return result if result instanceof Array\n  this\n\nTask.prototype.canBePicked = (auth) ->\n  result = canBePicked this, auth\n  return result if typeof result is 'boolean'\n  this\n\nTask.prototype.canBeFolded = (auth) ->\n  result = canBeFolded this, auth\n  return result if typeof result is 'boolean'\n  this\n\nTask.prototype.canCreateTask = (auth) ->\n  result = canCreateTask this, auth\n  return result if typeof result is 'boolean'\n  this\n\nTask.prototype.canCreateMilestone = (auth) ->\n  result = canCreateMilestone this, auth\n  return result if typeof result is 'boolean'\n  this\n\nTask.prototype.canBeUpdated = (auth) ->\n  result = canBeUpdated this, auth\n  return result if typeof result is 'boolean'\n  this\n\nTask.prototype.canBeDestroied = (auth) ->\n  result = canBeDestroied this, auth\n  return result if typeof result is 'boolean'\n  this\n\nTask.prototype.canDestroyDescendants = (auth) ->\n  result = canDestroyDescendants this, auth\n  return result if typeof result is 'boolean'\n  this\n\nTask.prototype.canSwitchState = (auth) ->\n  result = canSwitchState this, auth\n  return result if typeof result is 'boolean'\n  this\n\n\nexport {\n  can\n  can as default\n  actions\n  canBePicked\n  canBeFolded\n  canBeUpdated\n  canBeDestroied\n  canCreateTask\n  canCreateMilestone\n}\n","import {Task, mustExist, nextWbs, firstChildWbs, root} from './task.coffee'\nimport {lastChild} from './query.coffee'\nimport {triggerEvent} from './event.coffee'\nimport {compareWbs} from './order.coffee'\n\n\n\ncreateRoot = (settings = {}) ->\n  delete settings.wbs\n  new Task settings\n\ncreateTasks = (existed, datas...) ->\n  mustExist existed\n  [withWbs, withoutWbs, created] = [[], [], []]\n  datas.forEach (data) ->\n    data.rootId = existed.rootId\n    return withWbs.push data if 'wbs' of data\n    withoutWbs.push data\n  withWbs.sort((a, b) -> compareWbs(a.wbs, b.wbs)).forEach (data) ->\n    created.push(new Task data)\n  withoutWbs.forEach (data) ->\n    if lastC = lastChild existed\n      data.wbs = nextWbs lastC.data.wbs\n    else\n      data.wbs = firstChildWbs existed.data.wbs\n    created.push(new Task data)\n  created\n\ncreateHistoricalTask = (datas...) ->\n  tasks = (new Task data, {source: 'history'} for data in datas)\n  setTimeout -> tasks.forEach (task) -> triggerEvent task, 'after-create'\n\ncreate = (settings = {}, datas...) ->\n  delete settings.wbs\n  rootTask = createRoot settings\n  createTasks rootTask, datas...\n  rootTask\n\nTask.create = create\n\nTask.prototype.create = (datas...) ->\n  result = []\n  @_pushUndoState => result = createTasks this, datas...\n  result\n\n\n\nexport {\n  createRoot\n  createTasks\n  create\n  create as default\n  createHistoricalTask\n}\n","import {Task, mustExist, parent} from './task.coffee'\nimport {ancestors, descendants, children} from './query.coffee'\nimport {asc, desc} from './order.coffee'\nimport {triggerEvent} from './event.coffee'\n\n\n\nfold = (task, isFolded = true) ->\n  mustExist task\n  unless isFolded = Boolean isFolded\n    foldedAncestors = ancestors(task, (t) -> t.isFolded)\n    return fold asc(foldedAncestors...)[0], isFolded if foldedAncestors.length\n  asc(descendants(task).concat(task)...).forEach (t) ->\n    [oldFolded, oldHidden] = [Boolean(t.isFolded), Boolean(t.isHidden)]\n    t.isFolded = if children(t).length then isFolded else false\n    if t is task\n      t.isHidden = if isFolded then Boolean(t.isHidden) else false\n    else\n      t.isHidden = Boolean parent(t, true).isFolded\n    isFoldedDetail = {isFolded: {newVal: t.isFolded, oldVal: oldFolded}}\n    isHiddenDetail = {isHidden: {newVal: t.isHidden, oldVal: oldHidden}}\n    touchDetail = Object.assign {}, isFoldedDetail, isHiddenDetail\n    # It's not necessary to implement the before-update event,\n    # because the isFolded property has noting to do\n    # with a task's business data.\n    triggerEvent t, 'after-touch', touchDetail\n    unless oldFolded is t.isFolded\n      triggerEvent t, 'after-update', isFoldedDetail\n    unless oldHidden is t.isHidden\n      triggerEvent t, 'after-update', isHiddenDetail\n\nTask.prototype.fold = (isFolded) ->\n  fold this, isFolded\n  this\n\n\n\nexport {\n  fold\n  fold as default\n}\n","import {\n  Task\n  splitWbs\n  joinWbs\n  root\n  splitDeps\n  joinDeps\n  mustBeRoot\n  mustExist\n  isRoot\n  isTask\n  parent\n  find\n} from './task.coffee'\nimport {\n  nextSiblings\n  descendants\n  ancestors\n  children\n} from './query.coffee'\nimport {removeDepd} from './successor.coffee'\nimport {triggerEvent, removeEvent} from './event.coffee'\nimport {depWbses, beforeUpdateDeps, touchDeps} from './predecessor.coffee'\nimport {beforeUpdateSchedule, touchSchedule} from './schedule.coffee'\nimport {desc} from './order.coffee'\nimport {fold} from './fold.coffee'\n\n\n\nriseNextSiblings = (task) ->\n  taskWbsArr = splitWbs task.data.wbs\n  [oldWbses, newWbses] = [[], []]\n  nextSiblings(task).forEach (c) ->\n    descendants(c).concat(c).forEach (t) ->\n      oldWbses.push oldVal = t.data.wbs\n      wbsArr = splitWbs t.data.wbs\n      wbsArr[taskWbsArr.length - 1] -= 1\n      newVal = t.data.wbs = joinWbs wbsArr\n      detail = {wbs: {oldVal, newVal}}\n      triggerEvent t, 'after-touch', detail\n      triggerEvent t, 'after-update', detail\n      newWbses.push t.data.wbs\n  root(task).tasks.forEach (t) ->\n    for type, val of t.data.dependencies\n      [shouldUpdate, wbses] = [false, splitDeps val]\n      wbses.forEach (wbs, index) ->\n        return unless oldWbses.includes wbs\n        wbses[index] = newWbses[oldWbses.indexOf wbs]\n        shouldUpdate = true\n      touchDeps t, type, wbses, [] if shouldUpdate\n\ndestroyRoot = (rootTask) ->\n  mustBeRoot rootTask\n  delete Task.roots[rootTask.uid]\n  rootTask[k] = null for k, v of rootTask\n  rootTask\n\ndestroy = (existed, tasks...) ->\n  mustExist existed\n  unless tasks.length\n    return destroyRoot existed if isRoot existed\n    tasks = [existed]\n  [destroied, all] = [[], root(existed).tasks]\n  desc(tasks...).forEach (task) ->\n    treeDownNodes = descendants(task).concat(task).filter (t) -> all.includes t\n    return unless treeDownNodes.length\n    treeDownNodes = desc treeDownNodes...\n    # Checking if any before-destroy event of\n    # current task or its descendants is prevented\n    isPrevented = treeDownNodes.some (node) ->\n      triggerEvent(node, 'before-destroy') is false\n    return if isPrevented\n    # Checking if any ancestors of current task need be rescheduled\n    # and if any of the operations is prevented\n    {triggered, resources} = beforeUpdateSchedule task, {}, 'destroy', true\n    [isPrevented, scheduleResources] = [not triggered, resources]\n    return if isPrevented\n    # Checking if any existed task's dependencies property need be updated\n    # and if any of the operations is prevented.\n    depsResources = []\n    treeDownWbses = treeDownNodes.map (node) -> node.data.wbs\n    isPrevented = all.some (node) ->\n      return false if treeDownNodes.includes node\n      Object.keys(node.data.dependencies).some (type) ->\n        depsWbsArr = depWbses node, type\n        filtered = depsWbsArr.filter (w) -> not treeDownWbses.includes w\n        return false if luda.arrayEqual depsWbsArr, filtered\n        triggered = beforeUpdateDeps node, type, filtered\n        # Collecting dependencies resources need be updated\n        depsResources.push {task: node, type, newVals: filtered}\n        not triggered\n    return if isPrevented\n    # Executing destroy actions.\n    touchSchedule task, null, 'destroy', scheduleResources\n    depsResources.forEach (r) -> touchDeps r.task, r.type, r.newVals, []\n    riseNextSiblings task\n    taskAncestors = desc ancestors(task)...\n    treeDownNodes.forEach (node) ->\n      triggerEvent node, 'after-destroy'\n      removeEvent node\n      destroied.push node\n      all.splice all.indexOf(node), 1\n    taskAncestors.forEach (a) ->\n      fold a, false if a.isFolded and children(a).length is 0\n  destroied\n\ndestroyHistoricalTask = (datas...) ->\n  datas.forEach (data) ->\n    rootTask = root data\n    task = find rootTask, data.uid\n    index = rootTask.tasks.indexOf task\n    return unless index >= 0\n    triggerEvent task, 'after-destroy'\n    removeEvent task\n    rootTask.tasks.splice index, 1\n\nTask.prototype.destroy = (tasks...) ->\n  result = []\n  @_pushUndoState => result = destroy this, tasks...\n  result\n\n\n\nexport {\n  destroy\n  destroy as default\n  destroyHistoricalTask\n}\n","import {Time} from '../../models/time/index.coffee'\nimport {\n  Task\n  mustExist\n  isRoot\n} from './task.coffee'\nimport {children} from './query.coffee'\nimport {tryUpdateSchedule} from './schedule.coffee'\n\n\n\nend = (task, val) ->\n  mustExist task\n  unless val\n    return new Time task.data.end unless isRoot task\n    ends = children(task).map (c) -> c.data.end\n    return Time.latest ends...\n  return if isRoot task\n  tryUpdateSchedule task, {end: new Time val}, 'flex'\n\nTask.prototype.end = (val) ->\n  return end this, val unless val\n  @_pushUndoState => end this, val\n  this\n\n\n\nexport {\n  end\n  end as default\n}\n","import {\n  Task\n  mustExist\n  root\n  isRoot\n} from './task.coffee'\nimport {Time} from '../time/index.coffee'\nimport {beginning} from './beginning.coffee'\nimport {end} from './end.coffee'\n\n\n\ncalcSecs = (taskBegin, taskEnd, exclusions = []) ->\n  durationObj = taskEnd.since taskBegin\n  durationSecs = durationObj.seconds\n  return durationSecs unless exclusions and exclusions.length\n  exclusions.some (t) ->\n    [tEnd, tBegin] = [new Time(t.end), new Time(t.beginning)]\n    return if tBegin.laterThan(taskEnd) or tEnd.earlierThan(taskBegin)\n    tEnd = taskEnd if tEnd.laterThan taskEnd\n    tBegin = taskBegin if tBegin.earlierThan taskBegin\n    durationSecs -= tEnd.since(tBegin).seconds\n    durationSecs = 0 if durationSecs < 0\n    durationSecs is 0\n  durationSecs\n\nmergeExclusions = (exclusions = []) ->\n  [exclusions, mergedExclusions] = [exclusions.slice(), []]\n  while exclusions.length\n    range = exclusions.shift()\n    [rEnd, rBegin] = [new Time(range.end), new Time(range.beginning)]\n    exclusions = exclusions.filter (t) ->\n      [tEnd, tBegin] = [new Time(t.end), new Time(t.beginning)]\n      return true if (tBegin.laterThan rEnd) or (tEnd.earlierThan rBegin)\n      [rEnd, rBegin] = [Time.latest(tEnd, rEnd), Time.earlist(tBegin, rBegin)]\n      false\n    mergedExclusions.push {beginning: rBegin, end: rEnd}\n  mergedExclusions\n\nextractInclusions = (exclusions = [], inclusions = []) ->\n  while inclusions.length\n    [range, extracted] = [inclusions.shift(), []]\n    [rE, rB] = [new Time(range.end), new Time(range.beginning)]\n    exclusions = exclusions.filter (t) ->\n      [tE, tB] = [new Time(t.end), new Time(t.beginning)]\n      return true if (not tB.earlierThan rE) or (not tE.laterThan rB)\n      return false if (not tB.earlierThan rB) and (not tE.laterThan rE)\n      return t.end = rB if (tB.earlierThan rB) and (not tE.laterThan rE)\n      return t.beginning = rE if (tE.laterThan rE) and (not tB.earlierThan rB)\n      extracted.push beginning: tB, end: rB\n      extracted.push beginning: rE, end: tE\n      false\n    exclusions = exclusions.concat extracted\n  exclusions\n\ndevideSecs = (seconds) ->\n  minutes = seconds / 60\n  hours = minutes / 60\n  days = hours / 24\n  weeks = days / 7\n  months = days / 30\n  years = days / 365\n  {years, months, weeks, days, hours, minutes, seconds}\n\nduration = (task, secs, exceptExclusions = true) ->\n  mustExist task\n  [taskEnd, taskBegin] = [end(task), beginning(task)]\n  exclusions = root(task).data.exclusions.slice() if exceptExclusions\n  if exceptExclusions and root(task).data.excludeWeekends\n    weekends = Time.devideByDay(taskBegin, taskEnd)\n    .filter (d) -> d.beginning.isWeekend()\n    exclusions = exclusions.concat weekends\n  exclusions = extractInclusions exclusions, root(task).data.inclusions.slice()\n  exclusions = mergeExclusions exclusions\n  return devideSecs calcSecs(taskBegin, taskEnd, exclusions) unless secs\n  return task if isRoot task\n  unless Number.isInteger secs and secs > 0\n    throw new Error \"secs must be a positive integer\"\n  taskEnd = taskBegin.nextSecond secs\n  effectedSecs = calcSecs taskBegin, taskEnd, exclusions\n  while secs isnt effectedSecs\n    taskEnd = taskEnd.nextSecond secs - effectedSecs\n    effectedSecs = calcSecs taskBegin, taskEnd, exclusions\n  end task, taskEnd\n  devideSecs secs\n\nTask.prototype.duration = (secs, exceptExclusions = true) ->\n  return duration this, secs, exceptExclusions unless secs?\n  @_pushUndoState => duration this, secs, exceptExclusions\n  this\n\n\n\nexport {\n  duration\n  duration as default\n}\n","import {Task, mustExist} from './task.coffee'\nimport {descendants} from './query.coffee'\nimport {triggerEvent} from './event.coffee'\n\n\n\npick = (tasks = [], isPicked = true, cascaded = true) ->\n  tasks = [tasks] unless luda.isArray tasks\n  if cascaded\n    taskDescendants = []\n    tasks.forEach (t) ->\n      taskDescendants = taskDescendants.concat descendants(t)\n    tasks = luda.unique(tasks.concat taskDescendants)\n  tasks.forEach (t) ->\n    oldVal = Boolean t.isPicked\n    newVal = t.isPicked = Boolean isPicked\n    detail = {isPicked: {newVal, oldVal}}\n    # It's not necessary to implement the before-update event,\n    # because the isPicked property has noting to do\n    # with a task's business data.\n    triggerEvent t, 'after-touch', detail\n    return if oldVal is newVal\n    triggerEvent t, 'after-update', detail\n    return unless cascaded\n\npicked = (task) ->\n  mustExist task\n  descendants(task).filter (t) -> t.isPicked\n\nTask.pick = pick\n\nTask.prototype.pick = (isPicked, cascaded) ->\n  pick this, isPicked, cascaded\n  this\n\nTask.prototype.picked = ->\n  picked this\n\n\n\nexport {\n  picked\n  pick\n  pick as default\n}\n","import {\n  Task\n  mustExist\n  isRoot\n  builtInProps\n} from './task.coffee'\nimport {triggerEvent} from './event.coffee'\nimport {isMilestone} from './type.coffee'\nimport {canBeUpdated} from './can.coffee'\n\n\n\nreadonly = (task, prop, isReadonly) ->\n  mustExist task\n  if isRoot task\n    return if isReadonly?\n    true\n  else\n    isPropReadonly = task.readonlys.includes prop\n    isPropReadonly ||= not canBeUpdated task\n    return isPropReadonly unless isReadonly?\n    if isReadonly\n      return if isPropReadonly\n      oldVal = task.readonlys.slice()\n      task.readonlys.push prop\n      if prop is 'duration'\n        readonly task, 'beginning', true\n        readonly task, 'end', true\n      if readonly(task, 'beginning') and readonly(task, 'end')\n        readonly task, 'duration', true\n      if isMilestone task\n        if readonly(task, 'duration') \\\n        or readonly(task, 'beginning') or readonly(task, 'end')\n          readonly task, 'duration', true\n      newVal = task.readonlys.slice()\n    else\n      return unless isPropReadonly\n      return if builtInProps.includes prop\n      oldVal = task.readonlys.slice()\n      task.readonlys.splice task.readonlys.indexOf(prop), 1\n      if prop is 'duration'\n        readonly task, 'beginning', false\n        readonly task, 'end', false\n      if not readonly(task, 'beginning') or not readonly(task, 'end')\n        readonly task, 'duration', false\n      if isMilestone task\n        if not readonly(task, 'duration') \\\n        or not readonly(task, 'beginning') or not readonly(task, 'end')\n          readonly task, 'duration', false\n      newVal = task.readonlys.slice()\n    return task unless oldVal and newVal\n    detail = {readonlyProps: {newVal, oldVal}}\n    # It's not necessary to implement the before-update event,\n    # because the readonly properties can not controlled by users.\n    triggerEvent task, 'after-touch', detail\n    triggerEvent task, 'after-update', detail\n    task\n\nreadonlyProps = (task, props...) ->\n  mustExist task\n  if isRoot task\n    return if props.length\n    []\n  else\n    return task.readonlys.slice() unless props.length\n    for prop in task.readonlys.concat(props)\n      readonly task, prop, props.includes(prop)\n    task\n\nTask.prototype.readonly = (prop, isReadonly) ->\n  result = readonly this, prop, isReadonly\n  return result if typeof result is 'boolean'\n  this\n\nTask.prototype.readonlyProps = (props...) ->\n  result = readonlyProps this, props...\n  return result if result instanceof Array\n  this\n\n\n\nexport {\n  readonly\n  readonly as default\n  readonlyProps\n}\n","import {\n  Task\n  mustBeRoot\n  mustExist\n  root\n  isRoot\n  find\n  enhancedProps\n  builtInProps\n  depcTypes\n  splitDeps\n  joinDeps\n} from './task.coffee'\nimport {beginning} from './beginning.coffee'\nimport {end} from './end.coffee'\nimport {duration} from './duration.coffee'\nimport {\n  addDeps\n  removeDeps\n} from './predecessor.coffee'\nimport{\n  addDepd\n  removeDepd\n  depd\n} from './successor.coffee'\nimport {pick} from './pick.coffee'\nimport {fold} from './fold.coffee'\nimport {actions} from './can.coffee'\nimport {readonlyProps} from './readonly.coffee'\nimport {triggerEvent} from './event.coffee'\n\n\n\nupdateRoot = (rootTask, data = {}) ->\n  mustBeRoot rootTask\n  # for p in ['uid', 'rootId', 'wbs', 'tasks', 'events', 'created']\n  #   delete data[p]\n  throw new Error \"Not implemmented\"\n\nupdateTaskEnhancedProps = (task, data = {}) ->\n  if 'predecessors' of data or 'dependencies' of data\n    for type, deps of (data.predecessors or data.dependencies)\n      deps = joinDeps deps if luda.isArray deps\n      newDeps = splitDeps deps\n      currentDeps = splitDeps task.data.dependencies[type]\n      added = newDeps.filter (wbs) -> not currentDeps.includes wbs\n      removed = currentDeps.filter (wbs) -> not newDeps.includes wbs\n      removeDeps task, removed if removed.length\n      addDeps task, type, added if added.length\n  if 'successors' of data\n    for type, depds of data.successors\n      depds = joinDeps depds if luda.isArray depds\n      newDepds = splitDeps depds\n      currentDepds = splitDeps task.depended[type]\n      added = newDepds.filter (wbs) -> not currentDepds.includes wbs\n      removed = currentDepds.filter (wbs) -> not newDepds.includes wbs\n      removeDepd task, removed if removed.length\n      addDepd task, type, added if added.length\n  beginning task, data.beginning if 'beginning' of data\n  end task, data.end if 'end' of data\n  duration task, data.duration if 'duration' of data\n  pick task, data.isPicked if 'isPicked' of data\n  fold task, data.isFolded if 'isFolded' of data\n  actions task, data.actions... if 'actions' of data\n  readonlyProps task, data.readonlyProps... if 'readonlyProps' of data\n\nupdateTask = (existed, datas...) ->\n  mustExist existed\n  [withUid, withoutUid, dataForExisted, updated] = [[], [], {}, []]\n  datas.forEach (data) ->\n    return withUid.push data if 'uid' of data\n    Object.assign dataForExisted, data\n  if Object.keys(dataForExisted).length\n    dataForExisted.uid = existed.uid\n    withUid.push dataForExisted\n  withUid.sort((a, b) -> b.uid - a.uid).forEach (data) ->\n    return unless task = find root(existed), data.uid\n    updated.push task\n    Object.keys(data).forEach (prop) ->\n      propTree = prop.split '.'\n      return if propTree.length is 1\n      [value, topLevelProp] = [data[prop], propTree[0]]\n      if topLevelProp is 'predecessors' or topLevelProp is 'dependencies'\n        newVal = JSON.parse JSON.stringify(task.data.dependencies)\n        newVal[propTree[1]] = value\n      else if topLevelProp is 'successors'\n        newVal = JSON.parse JSON.stringify(task.depended)\n        newVal[propTree[1]] = value\n      else\n        newVal = newValDup = JSON.parse(\n          JSON.stringify task.data[topLevelProp] or {}\n        )\n        propTree.forEach (p, i) ->\n          return if i is 0\n          return newVal = newValDup[p] ||= {} unless i is propTree.length - 1\n          newValDup[p] = value\n      data[topLevelProp] = newVal\n      delete data[prop]\n    delete data[p] for p in builtInProps\n    updateTaskEnhancedProps task, data\n    delete data[p] for p in enhancedProps\n    for key, newVal of data\n      oldVal = task.data[key]\n      detail = {}\n      detail[key] = {newVal, oldVal}\n      # Custom properties are allowed to be changed in before-update event\n      isPrevented = triggerEvent(\n        task, 'before-update', detail, {target: task, prop: key}\n      ) is false\n      if isPrevented\n        detail[key].newVal = oldVal\n        triggerEvent task, 'after-touch', detail\n      else\n        task.data[key] = detail[key].newVal\n        triggerEvent task, 'after-touch', detail\n        unless detail[key].newVal is oldVal\n          triggerEvent task, 'after-update', detail\n  updated\n\nupdateHistoricalTask = (datas...) ->\n  results = datas.map (data) ->\n    data.data ||= {}\n    updated = {}\n    task = find root(data), data.uid\n    delete data.uid\n    delete data.rootId\n    Object.keys(data).forEach (key) ->\n      return if key is 'data'\n      updated[key] = {\n        oldVal: task[key]\n        newVal: task[key] = data[key]\n      }\n      return unless key is 'depended'\n      updated.successors = updated[key]\n    Object.keys(data.data).forEach (key) ->\n      updated[key] = {\n        oldVal: task.data[key]\n        newVal: task.data[key] = data.data[key]\n      }\n      return unless key is 'dependencies'\n      updated.predecessors = updated[key]\n      for type, val of data.data[key]\n        updated[type] = {\n          oldVal: updated[key].oldVal[type]\n          newVal: updated[key].newVal[type]\n        }\n    {task, updated}\n  setTimeout ->\n    results.forEach (r) ->\n      triggerEvent r.task, 'after-touch', r.updated\n      triggerEvent r.task, 'after-update', r.updated\n\nupdate = (existed, datas...) ->\n  return updateRoot existed, datas... if isRoot existed\n  updateTask existed, datas...\n\nTask.prototype.update = (datas...) ->\n  @_pushUndoState => update this, datas...\n  this\n\n\n\nexport {\n  update\n  update as default\n  updateHistoricalTask\n}\n","import {Task, find, mustExist, root} from './task.coffee'\nimport {asc} from './order.coffee'\nimport {createHistoricalTask} from './create.coffee'\nimport {updateHistoricalTask} from './update.coffee'\nimport {destroyHistoricalTask} from './destroy.coffee'\nimport {triggerEvent} from './event.coffee'\n\n\n\nsupportedDataTypes = [\n  '[object String]', '[object Number]', '[object Boolean]',\n  '[object Array]', '[object Object]', '[object Undefined]',\n  '[object Null]'\n]\n\nstateEqual = (one, two) ->\n  return true if one is two\n  oneType = Object.prototype.toString.call one\n  twoType = Object.prototype.toString.call two\n  return false unless oneType is twoType\n  if oneType is '[object Object]'\n    [oneKeys, twoKeys] = [Object.keys(one), Object.keys(two)]\n    return false unless oneKeys.length is twoKeys.length\n    return oneKeys.every (key) -> stateEqual one[key], two[key]\n  if oneType is '[object Array]'\n    return false unless one.length is two.length\n    return true if luda.arrayEqual one, two\n    [one, two] = [one.sort(), two.sort()]\n    return one.every (oneE) -> two.some (twoE) -> stateEqual oneE, twoE\n  Object.is one, two\n\ncurrentState = (task) ->\n  mustExist task\n  state = JSON.parse JSON.stringify(asc root(task).tasks...)\n  state.forEach (item) -> delete item.errors\n  state\n\ndiffState = (newState = [], oldState = []) ->\n  isDiff = false\n  [toCreateUids, toDestroyUids] = [[], []]\n  [toDestroy, toCreate, toUpdate] = [[], [], []]\n  oldState.forEach (task) ->\n    return if newState.find (item) -> item.uid is task.uid\n    toDestroyUids.push task.uid\n    toDestroy.push task\n    isDiff = true\n  newState.forEach (task) ->\n    return if oldState.find (item) -> item.uid is task.uid\n    toCreateUids.push task.uid\n    toCreate.push task\n    isDiff = true\n  newState.forEach (task) ->\n    return if toCreateUids.includes task.uid\n    return if toDestroyUids.includes task.uid\n    return unless oldTask = oldState.find (item) -> item.uid is task.uid\n    return unless diffedTask = diffTask task, oldTask\n    toUpdate.push diffedTask\n    isDiff = true\n  return null unless isDiff\n  {destroy: toDestroy, create: toCreate, update: toUpdate}\n\ndiffTask = (newTask, oldTask, _exclusionKeys = []) ->\n  diffedTask = null\n  [newKeys, oldKeys] = [Object.keys(newTask), Object.keys(oldTask)]\n  newKeys.forEach (key) ->\n    return if _exclusionKeys.includes key\n    oldKeys.splice i, 1 if (i = oldKeys.indexOf key) >= 0\n    return if stateEqual newTask[key], oldTask[key]\n    diffedTask ||= {}\n    diffedTask[key] = newTask[key]\n  oldKeys.forEach (key) ->\n    return if _exclusionKeys.includes key\n    diffedTask ||= {}\n    diffedTask[key] = undefined\n  return diffedTask if _exclusionKeys.includes 'data'\n  if diffedTask\n    diffedTask.uid = newTask.uid\n    diffedTask.rootId = newTask.rootId\n  return diffedTask unless data = diffTask newTask.data, oldTask.data, ['data']\n  diffedTask ||= {}\n  diffedTask.data = data\n  diffedTask\n\npopState = (task, action = 'undo') ->\n  mustExist task\n  rootTask = root task\n  stack = rootTask.stacks[action]\n  return null unless state = stack.pop()\n  state = JSON.parse JSON.stringify(state)\n  triggerEvent(\n    rootTask, 'after-update-state-stack', {action, state, direction: 'pop'}\n  )\n  triggerEvent rootTask, 'after-pop-state-stack', {action, state}\n  triggerEvent rootTask, \"after-pop-#{action}-state-stack\", state\n  state\n\npopUndoState = (task) -> popState task, 'undo'\n\npopRedoState = (task) -> popState task, 'redo'\n\npushState = (task, action = 'undo', _state) ->\n  mustExist task\n  rootTask = root task\n  stack = rootTask.stacks[action]\n  state = _state or currentState task\n  lastState = stack[stack.length - 1]\n  shouldPush = not lastState\n  shouldPush ||= state.length isnt lastState.length\n  shouldPush ||= not stateEqual state, lastState\n  return null unless shouldPush\n  stack.shift() if stack.length >= rootTask.data.maxHistorySize\n  stack.push state\n  triggerEvent(\n    rootTask, 'after-update-state-stack', {action, state, direction: 'push'}\n  )\n  triggerEvent rootTask, 'after-push-state-stack', {action, state}\n  triggerEvent rootTask, \"after-push-#{action}-state-stack\", state\n  state\n\npushUndoState = (task) -> pushState task, 'undo'\n\npushRedoState = (task) -> pushState task, 'redo'\n\nhistory = (task, action = 'undo') ->\n  mustExist task\n  return unless lastState = popState task, action\n  state = currentState task\n  actions = diffState lastState, state\n  return unless actions\n  destroyHistoricalTask actions.destroy...\n  createHistoricalTask actions.create...\n  updateHistoricalTask actions.update...\n  pushState task, (if action is 'undo' then 'redo' else 'undo'), state\n  rootTask = root task\n  detail = {currentState: lastState, oldState: state}\n  triggerEvent rootTask, 'after-switch-state', detail\n  triggerEvent rootTask, \"after-#{action}\", detail\n\nundo = (task) -> history task, 'undo'\n\nredo = (task) -> history task, 'redo'\n\nTask.prototype.pushUndoState = ->\n  return if root(this).historyTrackingDisabled\n  pushUndoState this\n\nTask.prototype.stopTrackingHistory = ->\n  root(this).historyTrackingDisabled = true\n\nTask.prototype.startTrackingHistory = ->\n  delete root(this).historyTrackingDisabled\n\nTask.prototype._pushUndoState = (callback) ->\n  return callback() if callback and root(this).historyTrackingDisabled\n  rootTask = root this\n  oldState = pushUndoState rootTask\n  callback() if callback\n  return unless oldState\n  return unless stateEqual currentState(rootTask), oldState\n  popUndoState rootTask\n\nTask.prototype.pushRedoState = ->\n  return if root(this).historyTrackingDisabled\n  pushRedoState this\n\nTask.prototype.popUndoState = ->\n  return if root(this).historyTrackingDisabled\n  popUndoState this\n\nTask.prototype.popRedoState = ->\n  return if root(this).historyTrackingDisabled\n  popRedoState this\n\nTask.prototype.undo = ->\n  undo this\n  this\n\nTask.prototype.redo = ->\n  redo this\n  this\n\n\n\nexport {\n  pushState\n  pushUndoState\n  pushRedoState\n  popState\n  popUndoState\n  popRedoState\n  undo\n  redo\n  history\n  history as default\n}\n","import {Task, mustExist} from './task.coffee'\nimport {triggerEvent} from './event.coffee'\n\n\n\nhandleError = (task, prop, error) ->\n  mustExist task\n  # read all errors @example error(task)\n  if prop is undefined\n    return null unless Object.keys(task.errors).length\n    task.errors\n  # clear all errors @example error(task, null)\n  else if prop is null\n    task.errors = {}\n    task\n  else if typeof prop is 'string'\n    # get the errors of a single prop @example error(task, 'name')\n    return task.errors[prop] or null if error is undefined\n    # clear the errors of a single prop @example error(task, 'name', null)\n    return delete task.errors[prop] and task if error is null\n    # add an error to a single prop @example error(task, 'name', 'name error')\n    task.errors[prop] ||= []\n    task.errors[prop].push error unless task.errors[prop].includes error\n    task\n  # set or clear multiple prop errors by passing in an object\n  # @example error(task, {name: 'e', beginning: null})\n  else if typeof prop is 'object'\n    handleError task, key, val for key, val of prop\n    task\n  else\n    throw new Error 'Unsupported case'\n\nerror = (task, prop, error) ->\n  mustExist task\n  [oldV, newV] = [{}, {}]\n  oldV[key] = val.slice().sort() for key, val of task.errors\n  result = handleError task, prop, error\n  newV[key] = val.slice().sort() for key, val of task.errors\n  [oldKeys, newKeys] = [Object.keys(oldV), Object.keys(newV)]\n  isUpdated = not luda.arrayEqual newKeys, oldKeys\n  isUpdated ||= newKeys.some (key) -> not luda.arrayEqual oldV[key], newV[key]\n  return result unless isUpdated\n  detail = {error: {oldVal: oldV, newVal: newV}}\n  triggerEvent task, 'after-touch', detail\n  triggerEvent task, 'after-update', detail\n  result\n\nTask.prototype.error = (prop, val) -> error this, prop, val\n\n\n\nexport {\n  error\n  error as default\n}\n","import {Task, mustExist, isRoot} from './task.coffee'\nimport {descendants} from './query.coffee'\nimport {asc} from './order.coffee'\n\n\n\nstringify = (task, cascaded = true) ->\n  mustExist task\n  return JSON.stringify task.data unless cascaded\n  tasks = descendants task\n  tasks.unshift task unless isRoot task\n  sortedTasks = asc(tasks...).map (t) -> t.data\n  JSON.stringify sortedTasks\n\nparse = (task, cascaded = true) -> JSON.parse stringify(task, cascaded)\n\nTask.prototype.parse = (cascaded) -> parse this, cascaded\n\nTask.prototype.stringify = (cascaded) -> stringify this, cascaded\n\n\n\nexport {\n  parse\n  stringify\n}\n","import {Time} from '../../models/time/index.coffee'\nimport {\n  Task\n  mustExist\n  isRoot\n} from './task.coffee'\nimport {children} from './query.coffee'\nimport {tryUpdateSchedule} from './schedule.coffee'\n\n\n\ntravel = (task, secs) ->\n  mustExist task\n  return if isRoot task\n  return if secs is 0\n  throw new Error \"distance must be an integer\" unless Number.isInteger secs\n  [oldBegin, oldEnd] = [new Time(task.data.beginning), new Time(task.data.end)]\n  [newBegin, newEnd] = [oldBegin.calcSeconds(secs), oldEnd.calcSeconds(secs)]\n  tryUpdateSchedule task, {beginning: newBegin, end: newEnd}, 'travel'\n\nTask.prototype.travel = (secs) ->\n  @_pushUndoState => travel this, secs\n  this\n\n\n\nexport {\n  travel\n  travel as default\n}\n","import Time from '../../models/time/index.coffee'\nimport Task from '../../models/task/index.coffee'\nimport modelable from '../../mixins/modelable.coffee'\n\n\n\nluda.component 'kickoffGantt'\n\n.protect modelable.all()\n\n.protect\n\n  ascTasks: ->\n    Task.asc @rootTask().descendants()...\n\n  adjustTimelineRange: (mode) ->\n    @timeline().fit(\n      @rootTask().beginning() or new Time(),\n      @rootTask().end() or new Time(),\n      mode\n    )\n\n.protect\n\n  template: ->\n    \"<div class='kickoff-gantt-timeline' data-uid='#{@rootTask().uid}'></div>\n    <div class='kickoff-gantt-links' data-uid='#{@rootTask().uid}'></div>\n    <div class='kickoff-gantt-tasks' data-uid='#{@rootTask().uid}'></div>\"\n\n  render: -> @root.html @template()\n\n.protect\n\n  linkTemplate: (task) ->\n    \"<div class='kickoff-gantt-link' data-uid='#{task.uid}'></div>\"\n\n  findLinkDom: (task) ->\n    @linksContainerDom.find \".kickoff-gantt-link[data-uid='#{task.uid}']\"\n\n  findLinkDoms: (tasks) ->\n    s = tasks.map (task) -> \".kickoff-gantt-link[data-uid='#{task.uid}']\"\n    @linksContainerDom.children s.join(',')\n\n  refreshLinkDomSiblings: (task) ->\n    ascTasks = @ascTasks()\n    i = ascTasks.indexOf task\n    return if i is ascTasks.length - 1\n    [prevs, nexts] = [ascTasks.slice(0, i), ascTasks.slice(i + 1)]\n    prevs = prevs.filter (t) -> t.deps().some (d) -> nexts.includes d\n    luda.kickoffGanttLink(@findLinkDoms prevs.concat(nexts)).render()\n\n  insertLinkDom: (task) ->\n    return luda.kickoffGanttLink(d).render() if (d = @findLinkDom task).length\n    @linksContainerDom.append @linkTemplate(task)\n    @refreshLinkDomSiblings task\n\n  removeLinkDom: (task) ->\n    @refreshLinkDomSiblings task\n    @findLinkDom(task).remove()\n\n  insertLinkDoms: ->\n    @linksContainerDom.html @ascTasks().map((t) => @linkTemplate t).join('')\n\n.protect\n\n  taskTemplate: (task) ->\n    \"<div class='kickoff-gantt-task' data-uid='#{task.uid}'></div>\"\n\n  findTaskDom: (task) ->\n    @tasksContainerDom.find \".kickoff-gantt-task[data-uid='#{task.uid}']\"\n\n  insertTaskDom: (task) ->\n    return luda.kickoffGanttTask(d).render() if (d = @findTaskDom task).length\n    prev = task.prevSibling()\n    prev = prevLastChd if prev and prevLastChd = prev.lastChild()\n    prev ||= task.parent()\n    task.one \"after-render-in-gantt.#{@id}\", =>\n      node = @findTaskDom(task).find('.kickoff-gantt-task-content').get 0\n      if node.scrollIntoViewIfNeeded\n        node.scrollIntoViewIfNeeded()\n      else\n        node.scrollIntoView()\n    return @findTaskDom(prev).after @taskTemplate(task) if prev\n    @tasksContainerDom.prepend @taskTemplate(task)\n\n  removeTaskDom: (task) -> @findTaskDom(task).remove()\n\n  insertTaskDoms: ->\n    @tasksContainerDom.html @ascTasks().map((t) => @taskTemplate t).join('')\n\n.help\n\n  create: ->\n    @adjustTimelineRange()\n    @rootTask().on \"after-create.#{@id}\", (event) =>\n      return if event.target.isRoot()\n      return if @adjustTimelineRange('grow') or @_reinserting?\n      @insertLinkDom event.target\n      @insertTaskDom event.target\n    @rootTask().on \"after-destroy.#{@id}\", (event) =>\n      return if event.target.isRoot()\n      @removeTaskDom event.target\n      @removeLinkDom event.target\n    @rootTask().on \"after-update.#{@id}\", (event) =>\n      return if event.target.isRoot()\n      return if @adjustTimelineRange 'grow'\n    @rootTask().on \"after-toggle-in-gantt.#{@id}\", (event) =>\n      @refreshLinkDomSiblings event.target\n    @timeline().on \"after-update.#{@id}\", (event) =>\n      event.stopImmediatePropagation() if @adjustTimelineRange()\n    @timeline().on \"after-render.#{@id}\", (event) =>\n      clearTimeout @_reinserting\n      @_reinserting = setTimeout =>\n        @insertLinkDoms()\n        @insertTaskDoms()\n        @_reinserting = null\n    @render()\n\n  destroy: ->\n    clearTimeout @_reinserting\n    @rootTask()?.off \"after-create.#{@id}\"\n    @rootTask()?.off \"after-destroy.#{@id}\"\n    @rootTask()?.off \"after-update.#{@id}\"\n    @rootTask()?.off \"after-toggle-in-gantt.#{@id}\"\n    @timeline()?.off \"after-update.#{@id}\"\n    @timeline()?.off \"after-render.#{@id}\"\n\n  find: ->\n    tasksContainerDom: '.kickoff-gantt-tasks'\n    linksContainerDom: '.kickoff-gantt-links'\n","import modelable from '../../mixins/modelable.coffee'\n\n\n\nluda.component 'kickoffGanttLink'\n\n.protect modelable.all()\n\n.protect\n\n  arrowWidth: 8\n  arrowHeight: 8\n\n.include\n\n  render: ->\n    clearTimeout @_rendering\n    @_rendering = setTimeout =>\n      return unless @model()\n      return unless @findTaskContentDom(@model()).length\n      [lines, shouldKeep] = [@findLineDoms(), luda()]\n      ['s2s', 'f2f', 's2f', 'f2s'].forEach (type) =>\n        @model()[\"#{type}Deps\"]().forEach (depc) =>\n          isExisted = (line = lines.filter \"[data-uid='#{depc.uid}']\").length\n          @root.append(line = @lineDom depc) unless isExisted\n          shouldKeep = shouldKeep.add line\n          polyline = line.children 'polyline'\n          drawLine = ->\n            clearTimeout @_showingLine\n            shouldHide = Boolean depc.isHidden\n            shouldHide ||= not linePoints = @points type, depc\n            return line.addClass 'is-hidden' if shouldHide\n            polyline.attr 'points', linePoints\n            @_showingLine = setTimeout (-> line.removeClass 'is-hidden'), 50\n          return drawLine.call this if isExisted\n          drawLine.call this if @findTaskContentDom(depc).length\n          depc.on \"after-render-in-gantt.#{@id}\", drawLine.bind(this)\n          depc.on \"after-range-in-gantt.#{@id}\", drawLine.bind(this)\n      lines.not(shouldKeep).remove().each (line) =>\n        return unless depc = @rootTask().find luda(line).data('uid')\n        depc.off \"after-render-in-gantt.#{@id}\"\n        depc.off \"after-range-in-gantt.#{@id}\"\n\n  preview: (type, to) ->\n    dict = {start: 'Beginning', finish: 'End'}\n    pointDom = @[\"findTaskLinks#{dict[type]}Dom\"] @model()\n    {left, top} = pointDom.offset()\n    rootPos = @root.offset()\n    left = left - rootPos.left + pointDom.outerWidth() / 2\n    top = top - rootPos.top + pointDom.outerHeight() / 2\n    points = [[left, top], [to.pageX - rootPos.left, to.pageY - rootPos.top]]\n    points = points.concat points.slice().reverse()\n    points = points.map((arr) -> arr.join ' ').join ','\n    isExisted = (line = @findPreviewLineDom()).length\n    @root.prepend(line = @previewLineDom()) unless isExisted\n    line.addClass('is-previewing').children('polyline').attr 'points', points\n\n  resetPreview: ->\n    @findPreviewLineDom().removeClass 'is-previewing'\n\n.protect\n\n  lineDom: (depc) ->\n    luda \"<svg class='kickoff-gantt-link-line' data-uid='#{depc.uid}'>\n          <polyline />\n          </svg>\"\n\n  previewLineDom: ->\n    luda '<svg class=\"kickoff-gantt-link-preview-line\"><polyline /></svg>'\n\n  findLineDom: (depc) ->\n    @root.find \".kickoff-gantt-link-line[data-uid='#{depc.uid}']\"\n\n  findLineDoms: -> @root.children '.kickoff-gantt-link-line'\n\n  findTaskDom: (task) -> luda(\".kickoff-gantt-task[data-uid='#{task.uid}']\")\n\n  findTaskContentDom: (task) ->\n    @findTaskDom(task).find '.kickoff-gantt-task-content'\n\n  findPreviewLineDom: ->\n    @root.find '.kickoff-gantt-link-preview-line'\n\n  findTaskLinksBeginningDom: (task) ->\n    @findTaskDom(task).find '.kickoff-gantt-task-links-beginning'\n\n  findTaskLinksEndDom: (task) ->\n    @findTaskDom(task).find '.kickoff-gantt-task-links-end'\n\n.protect\n\n  points: (type, depc) ->\n    @[\"#{type}Polyline\"](depc).map((arr) -> arr.join ' ').join ','\n\n  s2sPolyline: (depc) ->\n    [from, to] = [@position(depc), @position(@model())]\n    return [] unless from and to\n    minXWidth = @timelineCellWidth() / 2\n    arrow = @arrowRightPoints to\n    x1 = Math.min from.left, to.left\n    [from, to, exchanged] = [to, from, true] unless from.left is x1\n    y1 = from.top\n    [x2, y2] = [x1 - minXWidth, y1]\n    [x4, y4] = [to.left, to.top]\n    [x3, y3] = [x2, y4]\n    points = [[x1, y1], [x2, y2], [x3, y3], [x4, y4]]\n    return points.concat arrow, points.slice().reverse() unless exchanged\n    points.concat points.slice().reverse(), arrow\n\n  f2fPolyline: (depc) ->\n    [from, to] = [@position(depc), @position(@model())]\n    return [] unless from and to\n    minXWidth = @timelineCellWidth() / 2\n    arrow = @arrowLeftPoints to\n    x1 = Math.max from.right, to.right\n    [from, to, exchanged] = [to, from, true] unless from.right is x1\n    y1 = from.top\n    [x2, y2] = [x1 + minXWidth, y1]\n    [x4, y4] = [to.right, to.top]\n    [x3, y3] = [x2, y4]\n    points = [[x1, y1], [x2, y2], [x3, y3], [x4, y4]]\n    return points.concat arrow, points.slice().reverse() unless exchanged\n    points.concat points.slice().reverse(), arrow\n\n  s2fPolyline: (depc) ->\n    [from, to] = [@position(depc), @position(@model())]\n    return [] unless from and to\n    minXWidth = @timelineCellWidth() / 2\n    arrow = @arrowLeftPoints to\n    if to.right + minXWidth > from.left - minXWidth\n      [x1, y1] = [from.left, from.top]\n      [x2, y2] = [x1 - minXWidth, y1]\n      [x6, y6] = [to.right, to.top]\n      [x5, y5] = [x6 + minXWidth, y6]\n      [x3, x4] = [x2, x5]\n      rowGap = @findTaskDom(@model()).outerHeight() / 2\n      y3 = y4 = if y1 < y6 then y5 - rowGap else y5 + rowGap\n      line = [[x1, y1], [x2, y2], [x3, y3], [x4, y4], [x5, y5], [x6, y6]]\n    else\n      [x1, y1] = [from.left, from.top]\n      [x4, y4] = [to.right, to.top]\n      [x3, y3] = [x4 + minXWidth, y4]\n      [x2, y2] = [x3, y1]\n      line = [[x1, y1], [x2, y2], [x3, y3], [x4, y4]]\n    line.concat arrow, line.slice().reverse()\n\n  f2sPolyline: (depc) ->\n    [from, to] = [@position(depc), @position(@model())]\n    return [] unless from and to\n    minXWidth = @timelineCellWidth() / 2\n    arrow = @arrowRightPoints to\n    if from.right + minXWidth > to.left - minXWidth\n      [x1, y1] = [from.right, from.top]\n      [x2, y2] = [x1 + minXWidth, y1]\n      [x6, y6] = [to.left, to.top]\n      [x5, y5] = [x6 - minXWidth, y6]\n      [x3, x4] = [x2, x5]\n      rowGap = @findTaskDom(@model()).outerHeight() / 2\n      y3 = y4 = if y1 < y6 then y5 - rowGap else y5 + rowGap\n      line = [[x1, y1], [x2, y2], [x3, y3], [x4, y4], [x5, y5], [x6, y6]]\n    else\n      [x1, y1] = [from.right, from.top]\n      [x4, y4] = [to.left, to.top]\n      [x3, y3] = [x4 - minXWidth, y4]\n      [x2, y2] = [x3, y1]\n      line = [[x1, y1], [x2, y2], [x3, y3], [x4, y4]]\n    line.concat arrow, line.slice().reverse()\n\n  arrowRightPoints: (to) ->\n    arrowX = to.left - @arrowWidth\n    [arrowT, arrowB] = [to.top + @arrowHeight / 2, to.top - @arrowHeight / 2]\n    [[arrowX, arrowT], [arrowX, arrowB], [to.left, to.top]]\n\n  arrowLeftPoints: (to) ->\n    arrowX = to.right + @arrowWidth\n    [arrowT, arrowB] = [to.top + @arrowHeight / 2, to.top - @arrowHeight / 2]\n    [[arrowX, arrowT], [arrowX, arrowB], [to.right, to.top]]\n\n  position: (model) ->\n    node = @findTaskContentDom model\n    return unless node.length\n    width = luda(node).outerWidth()\n    height = luda(node).outerHeight()\n    {left, top} = luda(node).position()\n    {left, top: top + height / 2, right: left + width}\n\n  timelineCellWidth: ->\n    s = \".kickoff-gantt-timeline-background[data-uid='#{@rootTask().uid}']\n    .kickoff-gantt-timeline-cell\"\n    luda(s).outerWidth()\n\n.help\n\n  create: ->\n    return unless model = @model()\n    @render()\n    @model().on \"after-render-in-gantt.#{@id}\", (event) =>\n      @render() if @model() is event.target\n    @model().on \"after-range-in-gantt.#{@id}\", (event) =>\n      @render() if @model() is event.target\n\n  destroy: ->\n    clearTimeout @_rendering\n    clearTimeout @_showingLine\n    @model()?.off \"after-render-in-gantt.#{@id}\"\n    @model()?.off \"after-range-in-gantt.#{@id}\"\n    @model()?.deps().forEach (depc) =>\n      depc.off \"after-render-in-gantt.#{@id}\"\n      depc.off \"after-range-in-gantt.#{@id}\"\n","import modelable from '../../mixins/modelable.coffee'\nimport {capitalize} from '../../utilities/string.coffee'\nimport {taskActions} from '../../models/task/task.coffee'\nimport localeable from '../../mixins/localeable.coffee'\n\n\n\nluda.component 'kickoffGanttTask'\n\n.protect modelable.all()\n\n.protect localeable.all()\n\n.include\n\n  render: ->\n    clearTimeout @_rendering\n    @_rendering = setTimeout =>\n      return unless model = @model()\n      unless @container.length\n        @root.html '<div class=\"kickoff-gantt-task-content\"></div>'\n      @setCls()\n      @container.html @template()\n      @renderRange()\n      @executeCustomGraphRenderer()\n      @executeCustomActionsRenderer()\n      @executeCustomLinkActionsRenderer()\n      @executeCustomSummaryRenderer()\n      model.trigger 'after-render-in-gantt'\n\n  left: (pos) ->\n    if pos?\n      pos += @root.height() / 2 if @model().isMilestone()\n      @model().beginning @pxToTime(pos)\n      @render()\n    else\n      pos = @timeToPx @model().beginning()\n      pos -= @root.height() / 2 if @model().isMilestone()\n      pos\n\n  right: (pos) ->\n    if pos?\n      pos -= @root.height() / 2 if @model().isMilestone()\n      @model().end @pxToTime(pos)\n      @render()\n    else\n      pos = @timeToPx @model().end()\n      pos += @root.height() / 2 if @model().isMilestone()\n      pos\n\n  move: (pos) ->\n    return unless pos\n    @model().travel parseInt(pos / @pxPerSec(), 10)\n    @render()\n\n.protect\n\n  pxPerSec: ->\n    @root.width() / @timeline().duration().seconds\n\n  pxToTime: (px) ->\n    @timeline().beginning().nextSecond parseInt(px / @pxPerSec(), 10)\n\n  timeToPx: (time) ->\n    time.since(@timeline().beginning()).seconds * @pxPerSec()\n\n.protect\n\n  renderRange: ->\n    [left, right] = [@left(), @right()]\n    width = right - left\n    @container.css {left, width}\n\n  customRenderers: ->\n    [renderers, modelType] = [{}, capitalize(@model().type())]\n    rendererTypes = ['Graph', 'Actions', 'LinkActions', 'Summary']\n    for t in rendererTypes\n      customRenderer = @config()[\"renderGantt#{modelType}#{t}\"]\n      renderers[\"render#{t}\"] = customRenderer if customRenderer\n    actionTypes = (action for action in @model().actions())\n    for t in actionTypes\n      cap = capitalize t\n      configRendererName = \"renderGantt#{modelType}Action#{cap}\"\n      customRenderer = @config()[configRendererName]\n      unless taskActions.includes t\n        console.error \"Custom action #{t} is defined, but #{configRendererName}\n                      is not defined.\" unless customRenderer\n      renderers[\"renderAction#{cap}\"] = customRenderer if customRenderer\n    renderers\n\n  executeCustomGraphRenderer: ->\n    {renderGraph} =  @customRenderers()\n    @root.toggleClass 'with-custom-graph-renderer', Boolean(renderGraph)\n    return unless renderGraph\n    return if @model().isHidden\n    graphContainer = @root.find('.kickoff-gantt-task-bar-body').get 0\n    renderGraph.call @model(), @model(), graphContainer\n\n  executeCustomActionsRenderer: ->\n    renderers = @customRenderers()\n    renderActions =  renderers.renderActions\n    @root.toggleClass 'with-custom-actions-renderer', Boolean(renderActions)\n    if renderActions\n      return if @model().isHidden\n      actionsContainer = @root.find('.kickoff-gantt-task-popover-actions').get 0\n      return renderActions.call @model(), @model(), actionsContainer\n    for action in @model().actions()\n      if renderAction = renderers[\"renderAction#{capitalize action}\"]\n        actionSlot = \".kickoff-gantt-task-popover-actions\n                     .with-custom-action-renderer-#{luda.dashCase action}\"\n        actionContainer = @root.find(actionSlot).get(0)\n        renderAction.call @model(), @model(), actionContainer\n\n  executeCustomLinkActionsRenderer: ->\n    {renderLinkActions} =  @customRenderers()\n    hasClass = Boolean renderLinkActions\n    @root.toggleClass 'with-custom-link-actions-renderer', hasClass\n    return unless renderLinkActions\n    return if @model().isHidden\n    selector = '.kickoff-gantt-task-popover-link-actions'\n    actionsContainer = @root.find(selector).get 0\n    renderLinkActions.call @model(), @model(), actionsContainer\n\n  executeCustomSummaryRenderer: ->\n    {renderSummary} =  @customRenderers()\n    @root.toggleClass 'with-custom-summary-renderer', Boolean(renderSummary)\n    return unless renderSummary\n    return if @model().isHidden\n    summaryContainer = @root.find('.kickoff-gantt-task-popover-summary').get 0\n    renderSummary.call @model(), @model(), summaryContainer\n\n.protect\n\n  dragDimensions: (event) ->\n    @dragStartLeft = @left() unless 'dragStartLeft' of this\n    @dragStartRight = @right() unless 'dragStartRight' of this\n    @dragStartX = event.screenX unless 'dragStartX' of this\n    {\n      startLeft: @dragStartLeft, startRight: @dragStartRight,\n      startX: @dragStartX, startWidth: @dragStartRight - @dragStartLeft,\n      distance: event.screenX - @dragStartX\n    }\n\n  resetDragDimensions: ->\n    delete @dragStartLeft\n    delete @dragStartRight\n    delete @dragStartX\n\n  previewTravel: (event) ->\n    return if luda(event.target).hasClass 'is-readonly'\n    {startLeft, distance} = @dragDimensions event\n    @container.css 'left', startLeft + distance\n    @model().trigger 'after-range-in-gantt'\n\n  travel: (event) ->\n    return if luda(event.target).hasClass 'is-readonly'\n    @move @dragDimensions(event).distance\n    @resetDragDimensions()\n\n  previewBegin: (event) ->\n    {startWidth, startLeft, distance} = @dragDimensions event\n    @container.css {width: startWidth - distance, left: startLeft + distance}\n    @model().trigger 'after-range-in-gantt'\n\n  setBegin: (event) ->\n    {startLeft, distance} = @dragDimensions event\n    @left startLeft + distance\n    @resetDragDimensions()\n\n  previewEnd: (event) ->\n    {startWidth, distance} = @dragDimensions event\n    @container.css 'width', startWidth + distance\n    @model().trigger 'after-range-in-gantt'\n\n  setEnd: (event) ->\n    {startRight, distance} = @dragDimensions event\n    @right startRight + distance\n    @resetDragDimensions()\n\n.protect\n\n  linkNode: -> luda \".kickoff-gantt-link[data-uid='#{@model().uid}']\"\n\n  previewLinkFrom: (type, to) ->\n    successorsPropIsReadonly = @model().readonly 'successors'\n    @con._isLinkingFrom = {task: @model(), type}\n    point = if type is 'finish' then @linksEnd else @linksBeginning\n    point.addClass 'is-linking'\n    cursorCls = if successorsPropIsReadonly then 'is-invalid' else 'is-valid'\n    point.addClass cursorCls\n    @linksContainer.addClass 'is-linking'\n    luda.kickoffGanttLink(@linkNode()).preview type, to\n\n  resetPreviewLinkFrom: ->\n    return unless @rootTask()?\n    luda.kickoffGanttLink(@linkNode()).resetPreview()\n    @linksEnd.removeClass 'is-linking is-valid is-invalid'\n    @linksBeginning.removeClass 'is-linking is-valid is-invalid'\n    @linksContainer.removeClass 'is-linking'\n    delete @con._isLinkingFrom\n\n  previewLinkFromStart: (event) ->\n    @previewLinkFrom 'start', {pageX: event.pageX, pageY: event.pageY}\n\n  previewLinkFromFinish: (event) ->\n    @previewLinkFrom 'finish', {pageX: event.pageX, pageY: event.pageY}\n\n  previewLinkTo: (type) ->\n    return unless from = @con._isLinkingFrom\n    predecessorsPropIsReadonly = @model().readonly 'predecessors'\n    @con._isLinkingTo = {task: @model(), type}\n    return if from.task is @model()\n    point = if type is 'finish' then @linksEnd else @linksBeginning\n    point.addClass 'is-linking'\n    return if point.hasClass 'is-valid'\n    return if point.hasClass 'is-invalid'\n    if predecessorsPropIsReadonly\n      isValid = false\n    else\n      isValid = @con._isLinkingFrom.task.isValidDepcOf @con._isLinkingTo.task\n    cursorCls = if isValid then 'is-valid' else 'is-invalid'\n    point.addClass cursorCls\n\n  previewLinkToStart: (event) -> @previewLinkTo 'start'\n\n  previewLinkToFinish: (event) -> @previewLinkTo 'finish'\n\n  resetPreviewLinkTo: ->\n    return unless to = @con._isLinkingTo\n    selector = \".kickoff-gantt-task[data-uid='#{to.task.uid}']\n          .kickoff-gantt-task-links *\"\n    @root.parent('.kickoff-gantt-tasks').find(selector)\n    .removeClass 'is-linking is-valid is-invalid'\n    delete @con._isLinkingTo\n\n  addLink: ->\n    return unless from = @con._isLinkingFrom\n    return @resetPreviewLinkFrom() if from.task.readonly 'successors'\n    @resetPreviewLinkFrom()\n    return unless to = @con._isLinkingTo\n    return @resetPreviewLinkTo() if to.task.readonly 'predecessors'\n    type = luda.camelCase(\"#{from.type}-to-#{to.type}\")\n    to.task.addPredecessors type, from.task\n    @resetPreviewLinkTo()\n\n.protect\n\n  setCls: ->\n    oldHidden = Boolean @_isHidden\n    @_isHidden = Boolean @model().isHidden\n    @root.toggleClass 'is-picked', Boolean(@model().isPicked)\n    @root.toggleClass 'is-milestone', @model().isMilestone()\n    @root.toggleClass 'is-task', @model().isTask()\n    @root.toggleClass 'is-folded', Boolean(@model().isFolded)\n    @root.toggleClass 'is-hidden', @_isHidden\n    return if oldHidden is @_isHidden\n    @model().trigger 'after-toggle-in-gantt', @_isHidden\n\n  closeProper: ->\n    luda.kickoffProper(@proper).deactivate()\n\n.protect\n\n  template: ->\n    \"<label class='kickoff-gantt-task-label'>#{@labelTemplate()}</label>\n    <div class='kickoff-gantt-task-bar kickoff-proper'>#{@barTemplate()}</div>\n    <div class='kickoff-gantt-task-links'>#{@linkPointsTemplate()}</div>\"\n\n  labelTemplate: ->\n    name = @model().data.name\n    name = '' unless name?\n    \"#{@model().data.wbs} #{name}\"\n\n  barTemplate: ->\n    model = @model()\n    [html, isTask] = ['', model.isTask()]\n    if isTask and not model.readonly 'beginning'\n      html += \"<div class='kickoff-gantt-task-bar-beginning'></div>\"\n    bodyCls = 'kickoff-gantt-task-bar-body'\n    if model.readonly('beginning') or model.readonly('end')\n      bodyCls += ' is-readonly'\n    html += \"<div class='#{bodyCls}'></div>\"\n    if isTask and not model.readonly 'end'\n      html += \"<div class='kickoff-gantt-task-bar-end'></div>\"\n    html += \"<div class='kickoff-proper-popover kickoff-gantt-task-popover'>\n      #{@popoverTemplate()}\n    </div>\"\n\n  linkPointsTemplate: ->\n    \"<div class='kickoff-gantt-task-links-beginning'></div>\n    <div class='kickoff-gantt-task-links-end'></div>\"\n\n  popoverTemplate: ->\n    html = ''\n    {renderActions, renderLinkActions, renderSummary} = @customRenderers()\n    if renderActions\n      html += \"<div class='kickoff-gantt-task-popover-actions'></div>\"\n    else\n      html += @popoverActionsTemplate()\n    if renderLinkActions\n      html += \"<div class='kickoff-gantt-task-popover-link-actions'></div>\"\n    else\n      html += @popoverLinkActionsTemplate()\n    if renderSummary\n      html += \"<div class='kickoff-gantt-task-popover-summary'></div>\"\n    else\n      html += @popoverSummaryTemplate()\n    html\n\n  popoverActionsTemplate: ->\n    [model, renderers] = [@model(), @customRenderers()]\n    [uid, actions] = [model.uid, model.actions()]\n    return '' unless actions.length\n    customRendererSlot = (action) ->\n      \"<div class='with-custom-action-renderer-#{luda.dashCase action}'></div>\"\n    defaultRenderer = (action) ->\n      if ['pick', 'fold', 'destroy'].includes action\n        cls = \"#{action}-task\"\n      else if action is 'update'\n        cls = 'edit-task'\n      else if ['createTask', 'createMilestone'].includes action\n        cls = luda.dashCase action\n      if cls\n        \"<button class='kickoff-button-#{cls}' data-uid='#{uid}'></button>\"\n      else\n        customRendererSlot action\n    html = \"\"\n    for action in actions\n      customRenderer = renderers[\"renderAction#{capitalize action}\"]\n      render = if customRenderer then customRendererSlot else defaultRenderer\n      html += render action\n    \"<div class='kickoff-gantt-task-popover-actions'>#{html}</div>\"\n\n  popoverLinkActionsTemplate: ->\n    [html, model] = [\"\", @model()]\n    [uid, linkButtons] = [model.uid, {s2s: '', s2f: '', f2f: '', f2s: ''}]\n    deps = model.deps()\n    return '' if deps.length is 0 or model.readonly 'predecessors'\n    deps.forEach (depc) ->\n      key = model.depcType(depc).shortcut\n      disabled = if depc.readonly 'successors' then 'disabled' else ''\n      linkButtons[key] += \"<button class='kickoff-button-destroy-link'\n                           data-uid='#{uid}'\n                           data-from='#{depc.uid}' #{disabled}>\n                           </button>\"\n    html += fragment for type, fragment of linkButtons\n    \"<div class='kickoff-gantt-task-popover-link-actions'>#{html}</div>\"\n\n  popoverSummaryTemplate: ->\n    html = \"<h6 class='kickoff-gantt-task-popover-summary-title'>\n              #{@labelTemplate()}\n            </h6>\"\n    if @model().isMilestone()\n      html += \"<p class='kickoff-gantt-task-popover-summary-item'>\n                 <span>#{@l 'task.props.time'}:</span>\n                 <span>#{@model().data.end}</span>\n               </p>\"\n    else\n      dayCount = Math.round @model().duration().days\n      html += \"<p class='kickoff-gantt-task-popover-summary-item'>\n                 <span>#{@l 'task.props.beginning'}:</span>\n                 <span>#{@model().data.beginning}</span>\n               </p>\n               <p class='kickoff-gantt-task-popover-summary-item'>\n                 <span>#{@l 'task.props.end'}:</span>\n                 <span>#{@model().data.end}</span>\n               </p>\n               <p class='kickoff-gantt-task-popover-summary-item'>\n                 <span>#{@l 'task.props.duration'}:</span>\n                 <span>\n                   #{dayCount}\n                   #{@l 'task.durationUnits.day'}\n                 </span>\n               </p>\"\n    \"<div class='kickoff-gantt-task-popover-summary'>#{html}</div>\"\n\n.help\n\n  create: ->\n    return unless model = @model()\n    @render()\n    model.on \"after-touch.#{@id}\", (event, touched) =>\n      return unless model is event.target\n      @render() if 'beginning' of touched or 'end' of touched\n    model.on \"after-update.#{@id}\", (event, updated) =>\n      return unless model is event.target\n      ks = Object.keys updated\n      if ks.length is 1 and ks[0] is 'isPicked'\n        return @setCls()\n      if ks.some (k) -> k in ['wbs', 'name', 'beginning', 'end', 'isHidden']\n        return @render()\n      @setCls()\n      @popover.html @popoverTemplate()\n      @executeCustomGraphRenderer()\n      @executeCustomActionsRenderer()\n      @executeCustomLinkActionsRenderer()\n      @executeCustomSummaryRenderer()\n      model.trigger 'after-render-in-gantt'\n\n  destroy: ->\n    clearTimeout @_rendering\n    @resetPreviewLinkTo()\n    @resetPreviewLinkFrom()\n    @model()?.off \"after-touch.#{@id}\"\n    @model()?.off \"after-update.#{@id}\"\n\n  listen: ->\n    [\n      ['dragging', '.kickoff-gantt-task-bar-body', @previewTravel]\n      ['draggingend', '.kickoff-gantt-task-bar-body', @travel]\n      ['dragging', '.kickoff-gantt-task-bar-beginning', @previewBegin]\n      ['draggingend', '.kickoff-gantt-task-bar-beginning', @setBegin]\n      ['dragging', '.kickoff-gantt-task-bar-end', @previewEnd]\n      ['draggingend', '.kickoff-gantt-task-bar-end', @setEnd]\n      ['dragging', '.kickoff-gantt-task-links-beginning', @previewLinkFromStart]\n      ['draggingend', '.kickoff-gantt-task-links-beginning', @addLink]\n      ['dragging', '.kickoff-gantt-task-links-end', @previewLinkFromFinish]\n      ['draggingend', '.kickoff-gantt-task-links-end', @addLink]\n      ['mouseenter', '.kickoff-gantt-task-links-beginning', @previewLinkToStart]\n      ['mouseleave', '.kickoff-gantt-task-links-beginning', @resetPreviewLinkTo]\n      ['mouseenter', '.kickoff-gantt-task-links-end', @previewLinkToFinish]\n      ['mouseleave', '.kickoff-gantt-task-links-end', @resetPreviewLinkTo]\n      ['click', '.kickoff-button-edit-task', @closeProper]\n    ]\n\n  find: ->\n    container: '.kickoff-gantt-task-content'\n    linksContainer: '.kickoff-gantt-task-links'\n    linksBeginning: '.kickoff-gantt-task-links-beginning'\n    linksEnd: '.kickoff-gantt-task-links-end'\n    proper: '.kickoff-proper'\n    popover: '.kickoff-gantt-task-popover'\n","import modelable from '../../mixins/modelable.coffee'\n\n\n\nluda.component 'kickoffGanttTimeline'\n\n.protect modelable.all()\n\n.protect\n\n  foregroundTemplate: (groups) ->\n    html = \"\"\n    return html unless groups and groups.length\n    for group in groups\n      cls  = \"kickoff-gantt-timeline-#{group.unit} \"\n      cls += \"kickoff-gantt-timeline-depth#{group.depth} \"\n      cls += \"kickoff-gantt-timeline-weekend \" if group.isWeekend\n      cls += \"kickoff-gantt-timeline-cell \" unless group.groups\n      html += \"<div class='#{cls}'>\"\n      html += \"<div class='kickoff-gantt-timeline-label'>#{group.label}</div>\"\n      if group.groups\n        html += \"<div class='kickoff-gantt-timeline-group'>\"\n        html += @foregroundTemplate group.groups\n        html += \"</div>\"\n      else\n        html += @exclusionTemplate group\n        html += @inclusionTemplate group\n        html += @foregroundFlagTemplate group\n      html += \"</div>\"\n    html\n\n  backgroundTemplate: (groups) ->\n    html = \"\"\n    return html unless groups and groups.length\n    for group in groups\n      if group.groups\n        html += @backgroundTemplate group.groups\n      else\n        cls  = \"kickoff-gantt-timeline-cell \"\n        cls += \"kickoff-gantt-timeline-#{group.unit} \"\n        cls += \"kickoff-gantt-timeline-weekend \" if group.isWeekend\n        html += \"<div class='#{cls}'>\"\n        html += @exclusionTemplate group\n        html += @inclusionTemplate group\n        html += @backgroundFlagTemplate group\n        html += \"</div>\"\n    html\n\n  specialDurationTemplate: (cell, type = 'exclusion') ->\n    return '' unless (cells = cell[\"#{type}s\"]).length\n    [cellB, cellE] = [cell.beginning, cell.end]\n    totalSeconds = cell.end.since(cell.beginning).seconds\n    cells.map((t) ->\n      style = \"width:#{t.end.since(t.beginning).seconds / totalSeconds * 100}%;\"\n      if t.end.equals cell.end\n        style += \"right:0\"\n      else\n        left = t.beginning.since(cell.beginning).seconds / totalSeconds\n        style += \"left:#{left * 100}%\"\n      cls  = \"kickoff-gantt-timeline-#{type} \"\n      cls += \"kickoff-gantt-timeline-#{type}-left \" if t.beginning.equals cellB\n      cls += \"kickoff-gantt-timeline-#{type}-right \" if t.end.equals cellE\n      \"<div class='#{cls}' style='#{style}'></div>\"\n    ).join ''\n\n  inclusionTemplate: (cell) ->\n    @specialDurationTemplate cell, 'inclusion'\n\n  exclusionTemplate: (cell) ->\n    @specialDurationTemplate cell, 'exclusion'\n\n  foregroundFlagTemplate: (cell) ->\n    return '' unless cell.flags.length\n    totalSeconds = cell.end.since(cell.beginning).seconds\n    cell.flags.map((flag) ->\n      left = flag.time.since(cell.beginning).seconds / totalSeconds\n      style = \"left:#{left * 100}%\"\n      cls  = \"kickoff-gantt-timeline-flag-label \"\n      cls += flag.cls if flag.cls\n      \"<label class='#{cls}' style='#{style}'>#{flag.label or 'FLAG'}</label>\"\n    ).join ''\n\n  backgroundFlagTemplate: (cell) ->\n    return '' unless cell.flags.length\n    totalSeconds = cell.end.since(cell.beginning).seconds\n    cell.flags.map((flag) ->\n      left = flag.time.since(cell.beginning).seconds / totalSeconds\n      style = \"left:#{left * 100}%\"\n      cls  = \"kickoff-gantt-timeline-flag-line \"\n      cls += flag.cls if flag.cls\n      \"<div class='#{cls}' style='#{style}'></div>\"\n    ).join ''\n\n.protect\n\n  ensureOccupyFullWidth: ->\n    timelineWidth = @root.outerWidth()\n    ganttWidth = @root.parent('.kickoff-gantt').width()\n    return true if timelineWidth >= ganttWidth\n    duration = @timeline().duration().seconds\n    pxPerSec = timelineWidth / duration\n    leastDuration = ganttWidth / pxPerSec\n    @timeline().duration Math.ceil(leastDuration)\n    false\n\n  renderForeground: (groups) ->\n    @root.html @foregroundTemplate(groups)\n\n  renderBackground: (groups) ->\n    uid = @rootTask().uid\n    [cls, dataAttr] = ['kickoff-gantt-timeline-background', \"data-uid='#{uid}'\"]\n    unless (background = luda \".#{cls}[#{dataAttr}]\").length\n      @root.before background = luda \"<div class='#{cls}' #{dataAttr}>\"\n    background.html(@backgroundTemplate groups)\n\n.protect\n\n  ensureResizeDetectorExist: ->\n    return @resizeDetector if @resizeDetector\n    uid = @rootTask().uid\n    [cls, dataAttr] = [\n      \"kickoff-gantt-timeline-resize-detector\"\n      \"data-uid='#{uid}'\"\n    ]\n    unless (detector = luda \".#{cls}[#{dataAttr}]\").length\n      @root.before detector = luda \"<iframe class='#{cls}' #{dataAttr}>\"\n    @resizeDetector = detector.get(0).contentWindow\n\n  listenResize: ->\n    @stopListeningResize()\n    detector = @ensureResizeDetectorExist()\n    @lastRenderWidth = detector.innerWidth\n    @resizeRender = (->\n      clearTimeout @_resizeRendering\n      @_resizeRendering = setTimeout (=>\n        currentWidth = detector.innerWidth\n        return if currentWidth <= @lastRenderWidth\n        @lastRenderWidth = currentWidth\n        @render()\n      ), @config().resizeRenderDelay\n    ).bind this\n    detector.addEventListener 'resize', @resizeRender\n\n  stopListeningResize: ->\n    @ensureResizeDetectorExist()?.removeEventListener 'resize', @resizeRender\n    @resizeRender = null\n\n  render: ->\n    clearTimeout @_rendering\n    @_rendering = setTimeout =>\n      unit = @timeline().unit()\n      groups = @timeline()[\"#{unit}s\"]()\n      @renderForeground groups\n      @renderBackground groups\n      return unless @ensureOccupyFullWidth()\n      @listenResize()\n      @timeline().trigger 'after-render'\n\n.help\n\n  create: ->\n    @timeline().on \"after-update.#{@id}\", (event, updated) =>\n      @render()\n    @render()\n\n  destroy: ->\n    clearTimeout @_rendering\n    clearTimeout @_resizeRendering\n    @stopListeningResize()\n    @timeline()?.off \"after-update.#{@id}\"\n","import modelable from '../../mixins/modelable.coffee'\nimport {capitalize} from '../../utilities/string.coffee'\nimport {rootTaskActions} from '../../models/task/task.coffee'\n\n\n\nluda.component 'kickoffHeader'\n\n.protect modelable.all()\n\n.protect\n\n  render: ->\n    clearTimeout @_rendering\n    @_rendering = setTimeout =>\n      @root.html @template()\n      @executeCustomActionsRenderer()\n      @executeCustomNavigationsRenderer()\n\n  customRenderers: ->\n    [renderers, actions] = [{}, @model().actions()]\n    for type in ['Actions', 'Navigations']\n      renderer = @config()[\"renderHeader#{type}\"]\n      renderers[\"render#{type}\"] = renderer if renderer\n    for action in actions\n      rendererName = \"renderHeaderAction#{capitalize action}\"\n      renderer = @config()[rendererName]\n      unless rootTaskActions.includes action\n        console.error \"Custom action #{action} is defined, but custom render\n        #{rendererName} is not defined.\" unless renderer\n      renderers[\"render#{capitalize action}\"] = renderer if renderer\n    renderers\n\n  executeCustomActionsRenderer: ->\n    renderers = @customRenderers()\n    renderActions =  renderers.renderActions\n    if renderActions\n      actionsContainer = @root.find('.kickoff-header-actions').get 0\n      return renderActions.call @model(), @model(), actionsContainer\n    for action in @model().actions()\n      if renderAction = renderers[\"render#{capitalize action}\"]\n        actionSlot = \".kickoff-header-actions\n                     .with-custom-action-renderer-#{luda.dashCase action}\"\n        actionContainer = @root.find(actionSlot).get(0)\n        renderAction.call @model(), @model(), actionContainer\n\n  executeCustomNavigationsRenderer: ->\n    {renderNavigations} = @customRenderers()\n    return unless renderNavigations\n    navigationsContainer = @root.find('.kickoff-header-navigations').get 0\n    renderNavigations.call @model(), @model(), navigationsContainer\n\n  template: ->\n    \"#{@actionsTemplate()}#{@navigationsTemplate()}\"\n\n  actionsTemplate: ->\n    [uid, renderers] = [@model().uid, @customRenderers()]\n    if renderers.renderActions\n      return \"<div class='kickoff-header-actions\n              with-custom-actions-renderer'></div>\"\n    return '' unless (actions = @model().actions()).length\n    customRendererSlot = (action) ->\n      action = luda.dashCase action\n      \"<div class='with-custom-action-renderer-#{action}'></div>\"\n    defaultRenderer = (action) ->\n      return \"<div class='kickoff-buttons-state-switch'\n             data-uid='#{uid}'></div>\" if action is 'switchState'\n      if action is 'destroyDescendants'\n        cls = 'destroy-task'\n      else if ['createTask', 'createMilestone'].includes action\n        cls = luda.dashCase action\n      return \"<button class='kickoff-button-#{cls}'\n             data-uid='#{uid}'></button>\" if cls\n      customRendererSlot action\n    html = \"\"\n    for action in actions\n      customRenderer = renderers[\"render#{capitalize action}\"]\n      render = if customRenderer then customRendererSlot else defaultRenderer\n      html += render action\n    \"<div class='kickoff-header-actions'>#{html}</div>\"\n\n  navigationsTemplate: ->\n    [uid, renderers] = [@model().uid, @customRenderers()]\n    if renderers.renderNavigations\n      return \"<div class='kickoff-header-navigations\n              with-custom-navigations-renderer'></div>\"\n    tpl = \"<div class='kickoff-header-navigations'>\"\n    if @config().renderGantt\n      tpl += \"<div class='kickoff-buttons-unit-zoom'\n              data-uid='#{uid}'>\n              </div>\"\n    if @config().renderTable and @config().renderGantt\n      tpl += \"<div class='kickoff-buttons-view-switch'\n              data-uid='#{uid}'>\n              </div>\"\n    tpl += \"</div>\"\n    tpl\n\n.help\n\n  create: ->\n    @render()\n    @model().on \"after-update.#{@id}\", (event, updated) =>\n      return unless event.target is @model()\n      return unless updated.actions\n      @render()\n\n  destroy: ->\n    clearTimeout @_rendering\n    @model()?.off \"after-update.#{@id}\"\n","luda.component 'kickoffModal'\n\n.include\n\n  activate: ->\n    @root.addClass 'kickoff-modal-active'\n    @root.trigger 'after-activate'\n\n  deactivate: ->\n    @root.removeClass 'kickoff-modal-active'\n    @root.trigger 'after-deactivate'\n\n  toggle: -> @root.toggleClas 'kickoff-modal-active'\n\n.protect\n\n  tryDeactivate: (event) ->\n    return @deactivate() if event.eventPath().includes @closeButton.get(0)\n    return if event.eventPath().includes @modalBody.get(0)\n    @deactivate()\n\n.help\n\n  listen: ->\n    [['click', @tryDeactivate]]\n\n  find: ->\n    modalBody: '.kickoff-modal-body'\n    closeButton: '.kickoff-button-close-modal'\n","clientX = clientY = 0\n\nluda.component 'kickoffProper'\n\n.protect\n\n  action: -> @root.data('proper-action') or 'hover'\n\n.protect\n\n  deferTime: 300\n\n.protect\n\n  viewPortDimensions: ->\n    width: luda(window).innerWidth()\n    height: luda(window).innerHeight()\n\n  selfDimensions: ->\n    @root.get(0).getBoundingClientRect()\n\n  popoverDimensions: ->\n    @popover.get(0).getBoundingClientRect()\n\n.include\n\n  activate: (event) ->\n    return unless @popover.length\n    return if @root.hasClass 'kickoff-proper-active'\n    @root.addClass 'kickoff-proper-preactive'\n    selfDimensions = @selfDimensions()\n    popoverDimensions = @popoverDimensions()\n    viewPortDimensions = @viewPortDimensions()\n    maxLeft = viewPortDimensions.width - popoverDimensions.width\n    maxTop = viewPortDimensions.height - popoverDimensions.height\n    # left = event.clientX or selfDimensions.left\n    left = clientX or selfDimensions.left\n    top = selfDimensions.bottom\n    if left > maxLeft\n      @popover.addClass('kickoff-proper-popover-right').css {right: 0}\n    else\n      @popover.addClass('kickoff-proper-popover-left').css {left}\n    if top > maxTop\n      top = selfDimensions.top - popoverDimensions.height\n      @popover.addClass('kickoff-proper-popover-top').css {top}\n    else\n      @popover.addClass('kickoff-proper-popover-bottom').css {top}\n    @root.removeClass('kickoff-proper-preactive')\n    .addClass 'kickoff-proper-active'\n\n  deactivate: (event) ->\n    return unless @popover.length\n    return unless @root.hasClass 'kickoff-proper-active'\n    @root.removeClass('kickoff-proper-active kickoff-proper-preactive')\n    @popover.removeClass(\"kickoff-proper-popover-left kickoff-proper-popover-top\n    kickoff-proper-popover-right kickoff-proper-popover-bottom\")\n    .removeCss('left').removeCss('top').removeCss('right')\n\n  deferActivate: (event) ->\n    clearTimeout @_defer\n    @_defer = setTimeout (=> @activate event), @deferTime\n\n  deferDeactivate: (event) ->\n    clearTimeout @_defer\n    @_defer = setTimeout (=> @deactivate event), @deferTime\n\n.protect\n\n  mouseupActivateForHoverAction: ->\n    return unless @action() is 'hover'\n    clearTimeout @_mousedownDeactivateDefer\n    setTimeout (=> @root.removeClass 'kickoff-proper-tmp-hide'), @deferTime\n\n  mousedownDeactivateForHoverAction: (event) ->\n    return unless @action() is 'hover'\n    return if event and event.eventPath().includes @popover.get(0)\n    clearTimeout @_mousedownDeactivateDefer\n    @root.addClass 'kickoff-proper-tmp-hide'\n\n.help\n\n  create: ->\n    return unless @action() is 'focus'\n    @root.attr('tabindex', 0) unless @root.attr('tabindex') >= 0\n\n  destroy: ->\n    clearTimeout @_defer\n    @deactivate()\n    @mousedownDeactivateForHoverAction()\n\n  listen: ->\n    [\n      ['mouseenter focus', @deferActivate]\n      ['mouseleave blur', @deferDeactivate]\n      ['mousedown', @mousedownDeactivateForHoverAction]\n      ['mouseup', @mouseupActivateForHoverAction]\n      ['mousemove', (event) -> {clientX, clientY} = event]\n      ['mousewheel', -> luda.kickoffProper().deactivate()]\n    ]\n\n  find: ->\n    popover: '.kickoff-proper-popover'\n\n","import Task from '../../models/task/index.coffee'\nimport modelable from '../../mixins/modelable.coffee'\nimport localeable from '../../mixins/localeable.coffee'\nimport {capitalize} from '../../utilities/string.coffee'\n\n\n\nluda.component 'kickoffTable'\n\n.protect modelable.all()\n\n.protect localeable.all()\n\n.protect\n\n  ascTasks: ->\n    Task.asc @rootTask().descendants()...\n\n.protect\n\n  template: ->\n    \"<table class='kickoff-table-content'>\n      #{@headTemplate()}#{@bodyTemplate()}\n    </table>\"\n\n  headTemplate: ->\n    titles = ''\n    for column in @config().tableColumns\n      if 'title' of column\n        titleText = column.title\n      else\n        titleText = @l(\"task.props.#{column.prop}\") or capitalize(column.prop)\n      titles += \"<th>#{titleText}</th>\"\n    \"<thead class='kickoff-table-header' data-uid='#{@rootTask().uid}'>\n      <tr class='kickoff-table-header-row'>#{titles}</tr>\n     </thead>\"\n\n  bodyTemplate: ->\n    \"<tbody class='kickoff-table-tasks' data-uid='#{@rootTask().uid}'></tbody>\"\n\n  taskTemplate: (task) ->\n    \"<tr class='kickoff-table-task' data-uid='#{task.uid}'></tr>\"\n\n  render: ->\n    @root.html @template()\n    @insertTaskDoms()\n\n.protect\n\n  tasksContainerDom: -> @root.find '.kickoff-table-tasks'\n\n  findTaskDom: (task) ->\n    @tasksContainerDom().find \".kickoff-table-task[data-uid='#{task.uid}']\"\n\n  insertTaskDom: (task) ->\n    return luda.kickoffTableTask(d).render() if (d = @findTaskDom task).length\n    task.one \"after-render-in-table.#{@id}\", =>\n      node = @findTaskDom(task).get 0\n      if node.scrollIntoViewIfNeeded\n        node.scrollIntoViewIfNeeded()\n      else\n        node.scrollIntoView()\n    rowIndex = @ascTasks().indexOf task\n    taskRow = luda @tasksContainerDom().get(0).insertRow(rowIndex)\n    taskRow.prop 'outerHTML', @taskTemplate(task)\n\n  removeTaskDom: (task) -> @findTaskDom(task).remove()\n\n  insertTaskDoms: ->\n    @tasksContainerDom().html @ascTasks().map((t) => @taskTemplate t).join('')\n\n.help\n\n  create: ->\n    @rootTask().on \"after-create.#{@id}\", (event) =>\n      return if event.target.isRoot()\n      @insertTaskDom event.target\n    @rootTask().on \"after-destroy.#{@id}\", (event) =>\n      return if event.target.isRoot()\n      @removeTaskDom event.target\n    @render()\n\n  destroy: ->\n    @rootTask()?.off \"after-create.#{@id}\"\n    @rootTask()?.off \"after-destroy.#{@id}\"\n","import modelable from '../../mixins/modelable.coffee'\nimport {capitalize} from '../../utilities/string.coffee'\nimport {taskActions} from '../../models/task/task.coffee'\nimport localeable from '../../mixins/localeable.coffee'\n\n\n\nluda.component 'kickoffTableTask'\n\n.protect modelable.all()\n\n.protect localeable.all()\n\n.include\n\n  render: ->\n    clearTimeout @_rendering\n    @_rendering = setTimeout =>\n      return unless model = @model()\n      @root.html @template()\n      @setCls()\n      @executeCustomRenderers()\n      model.trigger 'after-render-in-table'\n\n.protect\n\n  template: ->\n    model = @model()\n    @config().tableColumns.map((column) =>\n      {prop, render} = column\n      dashedProp = luda.dashCase prop\n      hasCustomRender = luda.isFunction render\n      hasCustomRender ||= prop is 'actions' and @customRenderers().renderActions\n      if hasCustomRender\n        html = \"<div class='with-custom-#{dashedProp}-renderer'></div>\"\n      else\n        tplName = \"#{prop}Template\"\n        html = if tplName of this then @[tplName](column) else model.data[prop]\n        html = '' unless html?\n      \"<td data-prop='#{prop}'>#{html}</td>\"\n    ).join ''\n\n  typeTemplate: (column = {}) ->\n    @l \"task.types.#{@model().data.type}\"\n\n  durationTemplate: (column = {}) ->\n    dayCount = Math.round @model().duration().days\n    \"#{dayCount} #{@l 'task.durationUnits.day'}\"\n\n  predecessorsTemplate: (column = {}) ->\n    @model().deps().map((depc) -> depc.data.wbs).join ', '\n\n  successorsTemplate: (column = {}) ->\n    @model().depd().map((depd) -> depd.data.wbs).join ', '\n\n  actionsTemplate: (column = {}) ->\n    [model, renderers] = [@model(), @customRenderers()]\n    [uid, actions] = [model.uid, model.actions()]\n    return '' unless actions.length\n    customRendererSlot = (action) ->\n      \"<div class='with-custom-action-renderer-#{luda.dashCase action}'></div>\"\n    defaultRenderer = (action) ->\n      if ['pick', 'fold', 'destroy'].includes action\n        cls = \"#{action}-task\"\n      else if action is 'update'\n        cls = 'edit-task'\n      else if ['createTask', 'createMilestone'].includes action\n        cls = luda.dashCase action\n      if cls\n        \"<button class='kickoff-button-#{cls}' data-uid='#{uid}'></button>\"\n      else\n        customRendererSlot action\n    html = \"\"\n    for action in actions\n      customRenderer = renderers[\"renderAction#{capitalize action}\"]\n      render = if customRenderer then customRendererSlot else defaultRenderer\n      html += render action\n    html\n\n.protect\n\n  setCls: ->\n    oldHidden = Boolean @_isHidden\n    @_isHidden = Boolean @model().isHidden\n    @root.toggleClass 'is-picked', Boolean(@model().isPicked)\n    @root.toggleClass 'is-milestone', @model().isMilestone()\n    @root.toggleClass 'is-task', @model().isTask()\n    @root.toggleClass 'is-folded', Boolean(@model().isFolded)\n    @root.toggleClass 'is-hidden', @_isHidden\n    return if oldHidden is @_isHidden\n    @model().trigger 'after-toggle-in-table', @_isHidden\n\n  customRenderers: ->\n    [renderers, modelType] = [{}, capitalize(@model().type())]\n    customActionsRenderer = @config()[\"renderTable#{modelType}Actions\"]\n    renderers.renderActions = customActionsRenderer if customActionsRenderer\n    actionTypes = (action for action in @model().actions())\n    for t in actionTypes\n      cap = capitalize t\n      configRendererName = \"renderTable#{modelType}Action#{cap}\"\n      customRenderer = @config()[configRendererName]\n      unless taskActions.includes t\n        console.error \"Custom action #{t} is defined, but #{configRendererName}\n                      is not defined.\" unless customRenderer\n      renderers[\"renderAction#{cap}\"] = customRenderer if customRenderer\n    renderers\n\n  executeCustomRenderers: ->\n    for column in @config().tableColumns\n      {prop, render} = column\n      if prop is 'actions'\n        @executeCustomActionRenderers column\n      else if render\n        selector = \".with-custom-#{luda.dashCase prop}-renderer\"\n        container = @root.find(selector).get 0\n        render.call @model(), @model(), container\n\n  executeCustomActionRenderers: (column = {}) ->\n    renderers = @customRenderers()\n    renderActions = column.render or renderers.renderActions\n    @root.toggleClass 'with-custom-actions-renderer', Boolean(renderActions)\n    if renderActions\n      return if @model().isHidden\n      actionsContainer = @root.find('.with-custom-actions-renderer').get 0\n      return renderActions.call @model(), @model(), actionsContainer\n    for action in @model().actions()\n      if renderAction = renderers[\"renderAction#{capitalize action}\"]\n        actionSlot = \".with-custom-action-renderer-#{luda.dashCase action}\"\n        actionContainer = @root.find(actionSlot).get(0)\n        renderAction.call @model(), @model(), actionContainer\n\n.help\n\n  create: ->\n    return unless model = @model()\n    @render()\n    model.on \"after-update.#{@id}\", (event, updated) =>\n      @render() if model is event.target\n\n  destroy: ->\n    clearTimeout @_rendering\n    @model()?.off \"after-update.#{@id}\"\n","import {Timeline, mustBeTimeline} from './timeline.coffee'\nimport {\n  CustomEvent\n  mustBeValidCallback\n  nsMatches\n  parseEvent\n} from '../../utilities/event.coffee'\n\n\n\nclass TimelineEvent extends CustomEvent\n\n\n\neventCache = (timeline, type) ->\n  cache = timeline.events\n  cache[type] ||= []\n\naddEvent = (timeline, event, callback, _one = false) ->\n  mustBeTimeline timeline\n  {type, namespace} = parseEvent event\n  mustBeValidCallback callback\n  eventCache(timeline, type).push {namespace, callback, _one}\n\naddEventOnce = (timeline, event, callback) ->\n  addEvent timeline, event, callback, true\n\nremoveEvent = (timeline, event, callback) ->\n  mustBeTimeline timeline\n  {type, namespace} = parseEvent event if event\n  mustBeValidCallback callback if callback\n  eventCache timeline, type\n  types = if type then [type] else Object.keys timeline.events\n  for type in types\n    timeline.events[type] = eventCache(timeline, type).filter (q) ->\n      return true if callback and callback isnt q.callback\n      return true if namespace and namespace.length and \\\n      not nsMatches namespace, q.namespace\n\ntriggerEvent = (timeline, event, detail) ->\n  mustBeTimeline timeline\n  return unless timeline.created\n  {type, namespace} = parseEvent event\n  timelineEvent = new TimelineEvent timeline, event, detail\n  timelineEvent.currentTarget = timeline\n  eventCache(timeline, type).some (q) ->\n    return unless nsMatches namespace, q.namespace\n    if q.callback.call(timeline, timelineEvent, timelineEvent.detail) is false\n      timelineEvent.stopPropagation()\n      timelineEvent.preventDefault()\n    removeEvent timeline, event, q.callback if q._one\n    timelineEvent.isImmediatePropagationStopped()\n  not timelineEvent.isDefaultPrevented()\n\nTimeline.prototype.on = (event, callback) ->\n  addEvent this, event, callback\n  this\n\nTimeline.prototype.one = (event, callback) ->\n  addEventOnce this, event, callback\n  this\n\nTimeline.prototype.off = (event, callback) ->\n  removeEvent this, event, callback\n  this\n\nTimeline.prototype.trigger = (event, detail) ->\n  triggerEvent this, event, detail\n  this\n\n\n\nexport {\n  addEvent\n  addEventOnce\n  removeEvent\n  triggerEvent\n}\n","import {Timeline, mustBeTimeline} from './timeline.coffee'\nimport {triggerEvent} from './event.coffee'\n\n\n\nunits = ['hour', 'day', 'week', 'month', 'year']\n\navaliableUnits = -> units\n\nmustBeValidUnit = (unit) ->\n  unless units.includes unit\n    throw new Error 'unit must be one of hour, day, week, month and year'\n\nunit = (timeline, newUnit) ->\n  mustBeTimeline timeline\n  oldVal = timeline._unit\n  return oldVal unless newUnit\n  mustBeValidUnit newUnit\n  newVal = timeline._unit = newUnit\n  detail = {unit: {oldVal, newVal}}\n  triggerEvent timeline, 'after-touch', detail\n  unless newVal is oldVal\n    triggerEvent timeline, 'after-update', detail\n\nTimeline.prototype.unit = (newUnit) ->\n  result = unit this, newUnit\n  return result unless newUnit\n  this\n\nTimeline.avaliableUnits = avaliableUnits\n\nTimeline.prototype.avaliableUnits = -> avaliableUnits()\n\n\n\nexport {\n  unit\n  avaliableUnits\n  unit as default\n}\n","import {Time} from '../time/index.coffee'\nimport {Timeline, mustBeTimeline} from './timeline.coffee'\nimport {unit} from './unit.coffee'\nimport {triggerEvent} from './event.coffee'\n\n\nbeginningIncludePadding = (timeline, beginVal) ->\n  mustBeTimeline timeline\n  m = Time.methodNames unit(timeline)\n  new Time(beginVal)[m.prevUnit](timeline._padding)[m.beginningOfUnit]()\n\nbeginning = (timeline, newBegin) ->\n  mustBeTimeline timeline\n  oldVal = timeline._beginning\n  return oldVal unless newBegin\n  newVal = timeline._beginning = beginningIncludePadding timeline, newBegin\n  detail = {beginning: {oldVal, newVal}}\n  triggerEvent timeline, 'after-touch', detail\n  unless newVal.equals oldVal\n    triggerEvent timeline, 'after-update', detail\n\nTimeline.prototype.beginning = (newBegin) ->\n  result = beginning this, newBegin\n  return result unless newBegin\n  this\n\n\n\nexport {\n  beginning\n  beginning as default\n  beginningIncludePadding\n}\n","import {Timeline} from './timeline.coffee'\n\n\n\ncreate = (args...) -> new Timeline args...\n\nTimeline.create = create\n\n\n\nexport {\n  create\n  create as default\n}\n","import {Time} from '../time/index.coffee'\nimport {Timeline, mustBeTimeline} from './timeline.coffee'\nimport {unit} from './unit.coffee'\nimport {beginning} from './beginning.coffee'\nimport {triggerEvent} from './event.coffee'\n\n\nendIncludePadding = (timeline, endVal) ->\n  mustBeTimeline timeline\n  m = Time.methodNames unit(timeline)\n  endVal = new Time(endVal)[m.endOfUnit]()\n  begin = beginning timeline\n  padding = timeline._padding\n  beginNoPadding = begin[m.nextUnit](padding)[m.beginningOfUnit]()\n  range = endVal.since(beginNoPadding)[\"#{unit(timeline)}s\"]\n  leastRange = timeline._leastRange\n  endVal = beginNoPadding[m.nextUnit](leastRange) if range < leastRange\n  endVal[m.nextUnit](padding)[m.endOfUnit]()\n\nend = (timeline, newEnd) ->\n  mustBeTimeline timeline\n  oldVal = timeline._end\n  return oldVal unless newEnd\n  newVal = timeline._end = endIncludePadding timeline, newEnd\n  detail = {end: {oldVal, newVal}}\n  triggerEvent timeline, 'after-touch', detail\n  unless newVal.equals oldVal\n    triggerEvent timeline, 'after-update', detail\n\nTimeline.prototype.end = (newEnd) ->\n  result = end this, newEnd\n  return result unless newEnd\n  this\n\n\n\nexport {\n  end\n  end as default\n  endIncludePadding\n}\n","import {Timeline, mustBeTimeline} from './timeline.coffee'\nimport {beginning} from './beginning.coffee'\nimport {end} from './end.coffee'\n\n\n\nduration = (timeline, secs) ->\n  mustBeTimeline timeline\n  return end(timeline).since(beginning timeline) unless secs\n  newEnd = beginning(timeline).nextSecond secs\n  end timeline, newEnd\n\nTimeline.prototype.duration = (secs) ->\n  result = duration this, secs\n  return result unless secs?\n  this\n","import Time from '../time/index.coffee'\nimport {Timeline, mustBeTimeline} from './timeline.coffee'\nimport {beginning, beginningIncludePadding} from './beginning.coffee'\nimport {end, endIncludePadding} from './end.coffee'\n\n\n\nfit = (timeline, beginVal, endVal, mode = 'both') ->\n  mustBeTimeline timeline\n  c = timeline._fitCache ||= {}\n  unitSame = c.unit is timeline._unit\n  beginSame = c.beginVal is beginVal\n  beginSame ||= new Time(c.beginVal).equals(new Time beginVal)\n  endSame = c.endVal is endVal\n  endSame ||= new Time(c.endVal).equals(new Time endVal)\n  return false if unitSame and beginSame and endSame\n  unless mode is 'both'\n    [currentBegin, currentEnd] = [beginning(timeline), end(timeline)]\n    newBegin = beginningIncludePadding timeline, beginVal\n    newEnd = endIncludePadding timeline, endVal\n    if mode is 'grow'\n      shouldUpdate = currentBegin.laterThan newBegin\n      shouldUpdate ||= currentEnd.earlierThan newEnd\n    else if mode is 'shrink'\n      shouldUpdate = currentBegin.earlierThan newBegin\n      shouldUpdate ||= currentEnd.laterThan newEnd\n    else\n      throw new Error \"Invalid mode: #{mode}\"\n    return false unless shouldUpdate\n  timeline._fitCache = {beginVal, endVal, unit: timeline._unit}\n  beginning timeline, beginVal\n  end timeline, endVal\n  true\n\nTimeline.prototype.fit = (beginVal, endVal, mode) ->\n  fit this, beginVal, endVal, mode\n\n\n\nexport {\n  fit\n  fit as default\n}\n","import {Time} from '../time/index.coffee'\nimport {Timeline, mustBeTimeline} from './timeline.coffee'\nimport {beginning} from './beginning.coffee'\nimport {end} from './end.coffee'\n\n\n\nyears = (timeline) ->\n  mustBeTimeline timeline\n  [beginTime, endTime] = [beginning(timeline), end(timeline)]\n  Time.devideByYear(beginTime, endTime).map (year) ->\n    Object.assign year, {\n      unit: 'year'\n      depth: 0\n      label: year.beginning.year,\n      inclusions: includedRanges(timeline, year),\n      exclusions: excludedRanges(timeline, year),\n      flags: flagsInRange(timeline, year)\n    }\n\nmonths = (timeline) ->\n  mustBeTimeline timeline\n  [year, units] = [-1, []]\n  [beginTime, endTime] = [beginning(timeline), end(timeline)]\n  for month in Time.devideByMonth beginTime, endTime\n    unless year is month.beginning.year\n      year = month.beginning.year\n      units.push {\n        unit: 'year', depth: 0, label: year, groups: [],\n        beginning: month.beginning.beginningOfTheYear(),\n        end: month.beginning.endOfTheYear()\n      }\n    units[units.length - 1].groups.push Object.assign(month, {\n      unit: 'month', depth: 1, label: month.beginning.month,\n      inclusions: includedRanges(timeline, month),\n      exclusions: excludedRanges(timeline, month),\n      flags: flagsInRange(timeline, month)\n    })\n  units\n\nweeks = (timeline) ->\n  mustBeTimeline timeline\n  [year, units] = [-1, []]\n  [beginTime, endTime] = [beginning(timeline), end(timeline)]\n  splited = Time.devideByWeek beginTime, endTime\n  for week, index in splited\n    unless year is week.beginning.year\n      year = week.beginning.year\n      units.push {\n        unit: 'year', depth: 0, label: year, groups: [],\n        beginning: week.beginning.beginningOfTheYear(),\n        end: week.beginning.endOfTheYear()\n      }\n    weekAssignments = {\n      unit: 'week', depth: 1, label: week.beginning.weekOfTheYear()\n    }\n    unless week.beginning.year is week.end.year\n      weekAssignments.end = week.beginning.endOfTheYear()\n      splited.splice(index + 1, 0, {\n        beginning: week.end.beginningOfTheYear()\n        end: week.end\n      })\n    toBePushed = Object.assign(week, weekAssignments)\n    toBePushed.inclusions = includedRanges(timeline, toBePushed)\n    toBePushed.exclusions = excludedRanges(timeline, toBePushed)\n    toBePushed.flags = flagsInRange(timeline, toBePushed)\n    units[units.length - 1].groups.push toBePushed\n  units\n\ndays = (timeline) ->\n  mustBeTimeline timeline\n  [monthLabel, units] = ['', []]\n  [beginTime, endTime] = [beginning(timeline), end(timeline)]\n  for day in Time.devideByDay beginTime, endTime\n    _monthLabel = day.beginning.toString('{yyyy}-{mm}')\n    unless monthLabel is _monthLabel\n      monthLabel = _monthLabel\n      units.push {\n        unit: 'month', depth: 0, label: monthLabel, groups: [],\n        beginning: day.beginning.beginningOfTheMonth(),\n        end: day.beginning.endOfTheMonth()\n      }\n    units[units.length - 1].groups.push Object.assign(day, {\n      unit: 'day', depth: 1, label: day.beginning.day,\n      isWeekend: day.beginning.isWeekend(),\n      inclusions: includedRanges(timeline, day),\n      exclusions: excludedRanges(timeline, day),\n      flags: flagsInRange(timeline, day)\n    })\n  units\n\nhours = (timeline) ->\n  mustBeTimeline timeline\n  [dayLabel, units] = ['', []]\n  [beginTime, endTime] = [beginning(timeline), end(timeline)]\n  for hour in Time.devideByHour beginTime, endTime\n    _dayLabel = hour.beginning.toString('{yyyy}-{mm}-{dd}')\n    unless dayLabel is _dayLabel\n      dayLabel = _dayLabel\n      units.push {\n        unit: 'day', depth: 0, label: dayLabel, groups: [],\n        beginning: hour.beginning.beginningOfTheDay(),\n        end: hour.beginning.endOfTheDay()\n      }\n    units[units.length - 1].groups.push Object.assign(hour, {\n      unit: 'hour', depth: 1, label: hour.beginning.hours,\n      inclusions: includedRanges(timeline, hour),\n      exclusions: excludedRanges(timeline, hour),\n      flags: flagsInRange(timeline, hour)\n    })\n  units\n\ncoincidentRanges = (rangeArr = [], range) ->\n  coincidents = []\n  rangeArr.forEach (t) ->\n    [tBegin, tEnd] = [new Time(t.beginning), new Time(t.end)]\n    return unless tBegin.earlierThan range.end\n    return unless tEnd.laterThan range.beginning\n    b = if tBegin.earlierThan range.beginning then range.beginning else tBegin\n    e = if tEnd.laterThan range.end then range.end else tEnd\n    coincidents.push beginning: b, end: e\n  coincidents\n\nincludedRanges = (timeline, range) ->\n  mustBeTimeline timeline\n  coincidentRanges timeline._inclusions, range\n\nexcludedRanges = (timeline, range) ->\n  mustBeTimeline timeline\n  coincidentRanges timeline._exclusions, range\n\nflagsInRange = (timeline, range) ->\n  mustBeTimeline timeline\n  timeline._flags.filter((t) ->\n    return false if range.beginning.laterThan t.time\n    return false if range.end.earlierThan t.time\n    true\n  ).map (flag) -> Object.assign {}, flag, {time: new Time flag.time}\n\nTimeline.prototype.years = -> years this\n\nTimeline.prototype.months = -> months this\n\nTimeline.prototype.weeks = -> weeks this\n\nTimeline.prototype.days = -> days this\n\nTimeline.prototype.hours = -> hours this\n\n\n\nexport {\n  years\n  months\n  weeks\n  days\n  hours\n}\n","import {Timeline, mustBeTimeline} from './timeline.coffee'\n\n\n\nupdate = (timeline, data = {}) ->\n  mustBeTimeline timeline\n  throw new Error \"Not implemmented\"\n\n\n\nTimeline.prototype.update = (data) ->\n  update this, data\n  this\n\n\n\nexport {\n  update\n  update as default\n}\n","import Time from '../models/time/index.coffee'\nimport Task from '../models/task/index.coffee'\nimport Timeline from '../models/timeline/index.coffee'\nimport store from '../models/store.coffee'\n\n\n\nclass Kickoff\n\n  constructor: (conf = {}, tasks = []) ->\n    @node = luda conf.target\n    unless @node.length\n      throw new Error \"No HTML element detected by: #{conf.target}\"\n    if @node.length > 1\n      console.warn \"Models are shared among multiple kickoff components\"\n    if @node.hasClass 'kickoff'\n      {root, timeline, config} = store.relations(@node.data 'uid')\n      [@task, @timeline, @config] = [root, timeline, config]\n      console.warn \"The kickoff instance being constructed has already been\n      initialized. You don't have to construct it again.\n      If you need rerender it, use the `render` method. For reconfiguring,\n      use the `configure` method.\n      If it's really necessary to reconstruct the instance, please call the\n      `destroy` method first, then construct a new instance.\"\n      return this\n    conf = @configure conf, true\n    @task = Task.create conf.task\n    @task.create tasks...\n    @task.popUndoState() if tasks.length\n    @timeline = Timeline.create conf.timeline\n    store.create @task, @timeline, @config\n    @render()\n\n  render: ->\n    tpl = \"<main class='kickoff-main' data-uid='#{@task.uid}'>\"\n    if @config.renderHeader\n      tpl += \"<header class='kickoff-header' data-uid='#{@task.uid}'></header>\"\n    if @config.renderGantt\n      tpl += \"<div class='kickoff-gantt' data-uid='#{@task.uid}'></div>\"\n    if @config.renderTable\n      tpl += \"<div class='kickoff-table' data-uid='#{@task.uid}'></div>\"\n    tpl += \"</main>\"\n    rootCls = 'kickoff'\n    if @config.renderTable and not @config.renderGantt\n      rootCls += ' view-switch-to-table'\n    @node.addClass(rootCls).data('uid', @task.uid).html tpl\n    this\n\n  configure: (conf = {}, _returnSplited) ->\n    delete conf.uid\n    isCreated = @task and @timeline\n    return this if isCreated and Object.keys(conf).length is 0\n    @config = {uid: luda.guid()} unless isCreated\n    Object.assign(\n      @config,\n      (taskConf = @_taskConf conf),\n      (timelineConf = @_timelineConf conf),\n      (uiConf = @_uiConf conf)\n    )\n    splitedReturnValue = {task: taskConf, timeline: timelineConf, ui: uiConf}\n    unless isCreated\n      return if _returnSplited then splitedReturnValue else this\n    @node.html ''\n    @task.update taskConf\n    @timeline.update timelineConf\n    @render()\n    if _returnSplited then splitedReturnValue else this\n\n  destroy: ->\n    uid = @task.uid\n    @node.html('').removeClass('kickoff').data('uid', null)\n    store.destroy uid\n    delete @[key] for key of this\n\n  _taskConf: (conf = {}) ->\n    config = {\n      exclusions: []\n      excludeWeekends: true\n      inclusions: []\n      minDurationSeconds: 3600 * 24\n      maxHistorySize: Infinity\n      actions: [\n        'createTask', 'createMilestone', 'destroyDescendants', 'switchState'\n      ]\n    }\n    @_mergeConf config, conf\n    config\n\n  _timelineConf: (conf = {}) ->\n    config = {\n      exclusions: []\n      excludeWeekends: true\n      inclusions: []\n      flags: []\n    }\n    @_mergeConf config, conf\n    config\n\n  _uiConf: (conf = {}) ->\n    config =\n      resizeRenderDelay: 1000\n      renderHeader: true\n      renderHeaderActions: null\n      renderHeaderNavigations: null\n      renderHeaderActionCreateTask: null\n      renderHeaderActionCreateMilestone: null\n      renderHeaderActionDestroyDescendants: null\n      renderHeaderActionSwitchState: null\n      renderGantt: true\n      renderGanttTaskGraph: null\n      renderGanttTaskSummary: null\n      renderGanttTaskActions: null\n      renderGanttTaskActionPick: null\n      renderGanttTaskActionFold: null\n      renderGanttTaskActionUpdate: null\n      renderGanttTaskActionDestroy: null\n      renderGanttTaskActionCreateTask: null\n      renderGanttTaskActionCreateMilestone: null\n      renderGanttTaskLinkActions: null\n      renderGanttMilestoneGraph: null\n      renderGanttMilestoneSummary: null\n      renderGanttMilestoneActions: null\n      renderGanttMilestoneActionPick: null\n      renderGanttMilestoneActionUpdate: null\n      renderGanttMilestoneActionDestroy: null\n      renderGanttMilestoneLinkActions: null\n      tableColumns: [\n        {prop: 'actions', render: null}\n        {prop: 'wbs', render: null}\n        {prop: 'type', render: null}\n        {prop: 'name', render: null}\n        {prop: 'beginning', render: null}\n        {prop: 'end', render: null}\n        {prop: 'duration', render: null}\n        {prop: 'predecessors', render: null}\n        {prop: 'successors', render: null}\n      ]\n      renderTable: true\n      renderTableTaskActions: null\n      renderTableTaskActionPick: null\n      renderTableTaskActionFold: null\n      renderTableTaskActionUpdate: null\n      renderTableTaskActionDestroy: null\n      renderTableTaskActionCreateTask: null\n      renderTableTaskActionCreateMilestone: null\n      renderTableMilestoneActions: null\n      renderTableMilestoneActionPick: null\n      renderTableMilestoneActionUpdate: null\n      renderTableMilestoneActionDestroy: null\n      # If the render property is defined:\n      # 1. If the data type of the filed value need be converted,\n      #    the convertion should be fullfilled by the custom render.\n      # 2. The options property of a select type editor is ignored.\n      # else\n      # 1. Field value type convertion can be automatically fullfiled according\n      #    to the type property and enum value types of the options property\n      # 2. The options property of a select type editor can be an array\n      #    or a function with a param named 'use' which is a function will be\n      #    called to fill the select options.\n      renderTaskForm: null\n      renderMilestoneForm: null\n      formFields: [\n        {\n          prop: 'wbs', type: 'text',\n          placeholder: 'E.g., 1.1', render: null\n        }\n        {\n          prop: 'name', type: 'text',\n          placeholder: 'E.g., A New Task', render: null\n        }\n        {\n          prop: 'beginning', type: 'time',\n          placeholder: 'E.g., 2020/01/01', render: null\n        }\n        {\n          prop: 'end', type: 'time',\n          placeholder: 'E.g., 2020/01/02', render: null\n        }\n        {\n          prop: 'predecessors', render: null,\n          fields: [{\n            prop: 'predecessors.startToStart',\n            type: 'select', multiple: true, options: [],\n            placeholder: 'E.g., 1, 2', render: null\n          }, {\n            prop: 'predecessors.startToFinish',\n            type: 'select', multiple: true, options: [],\n            placeholder: 'E.g., 3, 4', render: null\n          }, {\n            prop: 'predecessors.finishToFinish',\n            type: 'select', multiple: true, options: [],\n            placeholder: 'E.g., 5, 6', render: null\n          }, {\n            prop: 'predecessors.finishToStart',\n            type: 'select', multiple: true, options: [],\n            placeholder: 'E.g., 7, 8', render: null\n          }]\n        }\n        {\n          prop: 'successors', render: null,\n          fields: [{\n            prop: 'successors.startToStart',\n            type: 'select', multiple: true, options: [],\n            placeholder: 'E.g., 1, 2', render: null\n          }, {\n            prop: 'successors.startToFinish',\n            type: 'select', multiple: true, options: [],\n            placeholder: 'E.g., 3, 4', render: null\n          }, {\n            prop: 'successors.finishToFinish',\n            type: 'select', multiple: true, options: [],\n            placeholder: 'E.g., 5, 6', render: null\n          }, {\n            prop: 'successors.finishToStart',\n            type: 'select', multiple: true, options: [],\n            placeholder: 'E.g., 7, 8', render: null\n          }]\n        }\n      ]\n      locale:\n        header:\n          actions:\n            undo: 'Undo'\n            redo: 'Redo'\n          navigations:\n            zoomIn: 'Zoom In'\n            zoomOut: 'Zoom Out'\n            zoomUnits:\n              year: 'Year'\n              month: 'Month'\n              week: 'Week'\n              day: 'Day'\n              hour: 'Hour'\n            chartView: 'Chart View'\n            tableView: 'Table View'\n        task:\n          types:\n            task: 'Task'\n            milestone: 'Milestone'\n          actions:\n            createTask: 'New Task'\n            createMilestone: 'New Milestone'\n            destroyDescendants: 'Destroy Items'\n            createSubTask: 'Create a sub task'\n            createSubMilestone: 'Create a sub milestone'\n            updateTask: 'Edit this task'\n            updateMilestone: 'Edit this milestone'\n            destroyTask: 'Destroy this task'\n            destroyMilestone: 'Destroy this milestone'\n            pick: 'Pick this item'\n            unpick: 'Unpick this item'\n            fold: 'Fold descendants'\n            unfold: 'Unfold descendants'\n          props:\n            wbs: 'Wbs'\n            name: 'Name'\n            type: 'Type'\n            beginning: 'Beginning'\n            end: 'End'\n            time: 'Time'\n            duration: 'Duration'\n            predecessors:\n              $: 'Predecessors'\n              startToStart: 'Start to Start'\n              startToFinish: 'Start to Finish'\n              finishToFinish: 'Finish to Finish'\n              finishToStart: 'Finish to Start'\n            successors:\n              $: 'Successors'\n              startToStart: 'Start to Start'\n              startToFinish: 'Start to Finish'\n              finishToFinish: 'Finish to Finish'\n              finishToStart: 'Finish to Start'\n            actions: 'Actions'\n            readonlyProps: 'Readonly Properties'\n          durationUnits:\n            year: 'years'\n            month: 'months'\n            week: 'weeks'\n            day: 'days'\n            hour: 'hours'\n    modelConfKeys = Object.keys(\n      @_taskConf()\n    ).concat(\n      Object.keys @_timelineConf()\n    )\n    for key, val of conf\n      config[key] = val unless key is 'locale' or modelConfKeys.includes key\n    @_mergeLocaleConf config.locale, conf.locale\n    config\n\n  _mergeLocaleConf: (defaultConf, custom) ->\n    return defaultConf unless custom\n    for key, val of defaultConf\n      if typeof val is 'string'\n        defaultConf[key] = custom[key] if key of custom\n      else\n        @_mergeLocaleConf defaultConf[key], custom[key]\n    for key, val of custom\n      defaultConf[key] = custom[key] unless key of defaultConf\n\n  _mergeConf: (defaultConf, custom) ->\n    for key of defaultConf\n      defaultConf[key] = custom[key] if key of custom\n\n\n\nkickoff = (args...) -> new Kickoff args...\n\n[['time', Time]].forEach (item) ->\n  [name, Con] = [item[0], item[1]]\n  kickoff[name] = (args...) -> new Con args...\n  for key, val of Con\n    kickoff[name][key] = if typeof val is 'function' then val.bind Con else val\n\nkickoff.asc = Task.asc\nkickoff.desc = Task.desc\n\n\n\nexport default window.kickoff ||= kickoff\n","triggerDelay = 100\ntimestamp = null\ntriggered = false\ntarget = null\nhoverTarget = null\nendTarget = null\n\nreset = ->\n  timestamp = null\n  triggered = false\n  target = null\n  hoverTarget = null\n  endTarget = null\n\ncreateEvent = (name, originalEvent) ->\n  props = ['screenX', 'screenY', 'clientX', 'clientY', 'pageX', 'pageY']\n  event = new CustomEvent name,\n    bubbles: true\n    cancelable: true\n    composed: true\n  event.startTarget = target\n  event.hoverTarget = hoverTarget\n  event.endTarget = endTarget\n  event[key] = originalEvent[key] for key in props\n  event\n\nmousedownHandler = (e) ->\n  reset()\n  return if e.isDefaultPrevented()\n  target = e.target\n  timestamp = Date.now()\n\nmousemoveHandler = (e) ->\n  return if e.isDefaultPrevented()\n  if triggered\n    hoverTarget = e.target\n    return luda(target).trigger createEvent('dragging', e)\n  return unless timestamp\n  triggered = Date.now() - timestamp >= triggerDelay\n  return reset() unless triggered\n  ev = luda(target).trigger(createEvent('draggingstart', e), null, true)[0]\n  return reset() if ev.isDefaultPrevented()\n  mousemoveHandler e\n\nmouseupHandler = (e) ->\n  return reset() unless triggered\n  return reset() if e.isDefaultPrevented()\n  endTarget = e.target\n  luda(target).trigger createEvent('draggingend', e)\n  reset()\n\nluda(document).on 'mousedown.simulateddrag', mousedownHandler\nluda(document).on 'mousemove.simulateddrag', mousemoveHandler\nluda(document).on 'mouseup.simulateddrag', mouseupHandler\n"]}